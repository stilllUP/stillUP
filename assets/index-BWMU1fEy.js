const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProductPage-BMG38cMg.js","assets/ProductPage-7DOvYfnx.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Sf(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const at={},Po=[],Rs=()=>{},h_=()=>!1,ru=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Cf=t=>t.startsWith("onUpdate:"),mn=Object.assign,Pf=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Fb=Object.prototype.hasOwnProperty,Je=(t,e)=>Fb.call(t,e),be=Array.isArray,ko=t=>fc(t)==="[object Map]",iu=t=>fc(t)==="[object Set]",xp=t=>fc(t)==="[object Date]",Ne=t=>typeof t=="function",Ft=t=>typeof t=="string",xs=t=>typeof t=="symbol",ct=t=>t!==null&&typeof t=="object",f_=t=>(ct(t)||Ne(t))&&Ne(t.then)&&Ne(t.catch),d_=Object.prototype.toString,fc=t=>d_.call(t),Ub=t=>fc(t).slice(8,-1),p_=t=>fc(t)==="[object Object]",kf=t=>Ft(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Va=Sf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ou=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},$b=/-\w/g,Yn=ou(t=>t.replace($b,e=>e.slice(1).toUpperCase())),jb=/\B([A-Z])/g,Gi=ou(t=>t.replace(jb,"-$1").toLowerCase()),au=ou(t=>t.charAt(0).toUpperCase()+t.slice(1)),ch=ou(t=>t?`on${au(t)}`:""),Wr=(t,e)=>!Object.is(t,e),cl=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},m_=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Tl=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Vp;const cu=()=>Vp||(Vp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function gr(t){if(be(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=Ft(s)?Wb(s):gr(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(Ft(t)||ct(t))return t}const Bb=/;(?![^(]*\))/g,qb=/:([^]+)/,Hb=/\/\*[^]*?\*\//g;function Wb(t){const e={};return t.replace(Hb,"").split(Bb).forEach(n=>{if(n){const s=n.split(qb);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function dc(t){let e="";if(Ft(t))e=t;else if(be(t))for(let n=0;n<t.length;n++){const s=dc(t[n]);s&&(e+=s+" ")}else if(ct(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const zb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Gb=Sf(zb);function g_(t){return!!t||t===""}function Kb(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=lu(t[s],e[s]);return n}function lu(t,e){if(t===e)return!0;let n=xp(t),s=xp(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=xs(t),s=xs(e),n||s)return t===e;if(n=be(t),s=be(e),n||s)return n&&s?Kb(t,e):!1;if(n=ct(t),s=ct(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const l=t.hasOwnProperty(o),u=e.hasOwnProperty(o);if(l&&!u||!l&&u||!lu(t[o],e[o]))return!1}}return String(t)===String(e)}function Qb(t,e){return t.findIndex(n=>lu(n,e))}const __=t=>!!(t&&t.__v_isRef===!0),qt=t=>Ft(t)?t:t==null?"":be(t)||ct(t)&&(t.toString===d_||!Ne(t.toString))?__(t)?qt(t.value):JSON.stringify(t,y_,2):String(t),y_=(t,e)=>__(e)?y_(t,e.value):ko(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[lh(s,i)+" =>"]=r,n),{})}:iu(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>lh(n))}:xs(e)?lh(e):ct(e)&&!be(e)&&!p_(e)?String(e):e,lh=(t,e="")=>{var n;return xs(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let un;class v_{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=un,!e&&un&&(this.index=(un.scopes||(un.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=un;try{return un=this,e()}finally{un=n}}}on(){++this._on===1&&(this.prevScope=un,un=this)}off(){this._on>0&&--this._on===0&&(un=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function E_(t){return new v_(t)}function w_(){return un}function Yb(t,e=!1){un&&un.cleanups.push(t)}let ht;const uh=new WeakSet;class b_{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,un&&un.active&&un.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,uh.has(this)&&(uh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||I_(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Lp(this),A_(this);const e=ht,n=os;ht=this,os=!0;try{return this.fn()}finally{R_(this),ht=e,os=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Df(e);this.deps=this.depsTail=void 0,Lp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?uh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Lh(this)&&this.run()}get dirty(){return Lh(this)}}let T_=0,La,Ma;function I_(t,e=!1){if(t.flags|=8,e){t.next=Ma,Ma=t;return}t.next=La,La=t}function Of(){T_++}function Nf(){if(--T_>0)return;if(Ma){let e=Ma;for(Ma=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;La;){let e=La;for(La=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function A_(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function R_(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),Df(s),Xb(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function Lh(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(S_(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function S_(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ya)||(t.globalVersion=Ya,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Lh(t))))return;t.flags|=2;const e=t.dep,n=ht,s=os;ht=t,os=!0;try{A_(t);const r=t.fn(t._value);(e.version===0||Wr(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{ht=n,os=s,R_(t),t.flags&=-3}}function Df(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Df(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Xb(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let os=!0;const C_=[];function ur(){C_.push(os),os=!1}function hr(){const t=C_.pop();os=t===void 0?!0:t}function Lp(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=ht;ht=void 0;try{e()}finally{ht=n}}}let Ya=0;class Jb{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class xf{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!ht||!os||ht===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ht)n=this.activeLink=new Jb(ht,this),ht.deps?(n.prevDep=ht.depsTail,ht.depsTail.nextDep=n,ht.depsTail=n):ht.deps=ht.depsTail=n,P_(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=ht.depsTail,n.nextDep=void 0,ht.depsTail.nextDep=n,ht.depsTail=n,ht.deps===n&&(ht.deps=s)}return n}trigger(e){this.version++,Ya++,this.notify(e)}notify(e){Of();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Nf()}}}function P_(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)P_(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Il=new WeakMap,Li=Symbol(""),Mh=Symbol(""),Xa=Symbol("");function fn(t,e,n){if(os&&ht){let s=Il.get(t);s||Il.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new xf),r.map=s,r.key=n),r.track()}}function nr(t,e,n,s,r,i){const o=Il.get(t);if(!o){Ya++;return}const l=u=>{u&&u.trigger()};if(Of(),e==="clear")o.forEach(l);else{const u=be(t),h=u&&kf(n);if(u&&n==="length"){const d=Number(s);o.forEach((m,y)=>{(y==="length"||y===Xa||!xs(y)&&y>=d)&&l(m)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),h&&l(o.get(Xa)),e){case"add":u?h&&l(o.get("length")):(l(o.get(Li)),ko(t)&&l(o.get(Mh)));break;case"delete":u||(l(o.get(Li)),ko(t)&&l(o.get(Mh)));break;case"set":ko(t)&&l(o.get(Li));break}}Nf()}function Zb(t,e){const n=Il.get(t);return n&&n.get(e)}function Eo(t){const e=Qe(t);return e===t?e:(fn(e,"iterate",Xa),Kn(t)?e:e.map(Jt))}function uu(t){return fn(t=Qe(t),"iterate",Xa),t}const eT={__proto__:null,[Symbol.iterator](){return hh(this,Symbol.iterator,Jt)},concat(...t){return Eo(this).concat(...t.map(e=>be(e)?Eo(e):e))},entries(){return hh(this,"entries",t=>(t[1]=Jt(t[1]),t))},every(t,e){return Zs(this,"every",t,e,void 0,arguments)},filter(t,e){return Zs(this,"filter",t,e,n=>n.map(Jt),arguments)},find(t,e){return Zs(this,"find",t,e,Jt,arguments)},findIndex(t,e){return Zs(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Zs(this,"findLast",t,e,Jt,arguments)},findLastIndex(t,e){return Zs(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Zs(this,"forEach",t,e,void 0,arguments)},includes(...t){return fh(this,"includes",t)},indexOf(...t){return fh(this,"indexOf",t)},join(t){return Eo(this).join(t)},lastIndexOf(...t){return fh(this,"lastIndexOf",t)},map(t,e){return Zs(this,"map",t,e,void 0,arguments)},pop(){return Aa(this,"pop")},push(...t){return Aa(this,"push",t)},reduce(t,...e){return Mp(this,"reduce",t,e)},reduceRight(t,...e){return Mp(this,"reduceRight",t,e)},shift(){return Aa(this,"shift")},some(t,e){return Zs(this,"some",t,e,void 0,arguments)},splice(...t){return Aa(this,"splice",t)},toReversed(){return Eo(this).toReversed()},toSorted(t){return Eo(this).toSorted(t)},toSpliced(...t){return Eo(this).toSpliced(...t)},unshift(...t){return Aa(this,"unshift",t)},values(){return hh(this,"values",Jt)}};function hh(t,e,n){const s=uu(t),r=s[e]();return s!==t&&!Kn(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const tT=Array.prototype;function Zs(t,e,n,s,r,i){const o=uu(t),l=o!==t&&!Kn(t),u=o[e];if(u!==tT[e]){const m=u.apply(t,i);return l?Jt(m):m}let h=n;o!==t&&(l?h=function(m,y){return n.call(this,Jt(m),y,t)}:n.length>2&&(h=function(m,y){return n.call(this,m,y,t)}));const d=u.call(o,h,s);return l&&r?r(d):d}function Mp(t,e,n,s){const r=uu(t);let i=n;return r!==t&&(Kn(t)?n.length>3&&(i=function(o,l,u){return n.call(this,o,l,u,t)}):i=function(o,l,u){return n.call(this,o,Jt(l),u,t)}),r[e](i,...s)}function fh(t,e,n){const s=Qe(t);fn(s,"iterate",Xa);const r=s[e](...n);return(r===-1||r===!1)&&Mf(n[0])?(n[0]=Qe(n[0]),s[e](...n)):r}function Aa(t,e,n=[]){ur(),Of();const s=Qe(t)[e].apply(t,n);return Nf(),hr(),s}const nT=Sf("__proto__,__v_isRef,__isVue"),k_=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(xs));function sT(t){xs(t)||(t=String(t));const e=Qe(this);return fn(e,"has",t),e.hasOwnProperty(t)}class O_{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?dT:V_:i?x_:D_).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=be(e);if(!r){let u;if(o&&(u=eT[n]))return u;if(n==="hasOwnProperty")return sT}const l=Reflect.get(e,n,kt(e)?e:s);if((xs(n)?k_.has(n):nT(n))||(r||fn(e,"get",n),i))return l;if(kt(l)){const u=o&&kf(n)?l:l.value;return r&&ct(u)?Uh(u):u}return ct(l)?r?Uh(l):pc(l):l}}class N_ extends O_{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const u=Xr(i);if(!Kn(s)&&!Xr(s)&&(i=Qe(i),s=Qe(s)),!be(e)&&kt(i)&&!kt(s))return u||(i.value=s),!0}const o=be(e)&&kf(n)?Number(n)<e.length:Je(e,n),l=Reflect.set(e,n,s,kt(e)?e:r);return e===Qe(r)&&(o?Wr(s,i)&&nr(e,"set",n,s):nr(e,"add",n,s)),l}deleteProperty(e,n){const s=Je(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&nr(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!xs(n)||!k_.has(n))&&fn(e,"has",n),s}ownKeys(e){return fn(e,"iterate",be(e)?"length":Li),Reflect.ownKeys(e)}}class rT extends O_{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const iT=new N_,oT=new rT,aT=new N_(!0);const Fh=t=>t,Jc=t=>Reflect.getPrototypeOf(t);function cT(t,e,n){return function(...s){const r=this.__v_raw,i=Qe(r),o=ko(i),l=t==="entries"||t===Symbol.iterator&&o,u=t==="keys"&&o,h=r[t](...s),d=n?Fh:e?Al:Jt;return!e&&fn(i,"iterate",u?Mh:Li),{next(){const{value:m,done:y}=h.next();return y?{value:m,done:y}:{value:l?[d(m[0]),d(m[1])]:d(m),done:y}},[Symbol.iterator](){return this}}}}function Zc(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function lT(t,e){const n={get(r){const i=this.__v_raw,o=Qe(i),l=Qe(r);t||(Wr(r,l)&&fn(o,"get",r),fn(o,"get",l));const{has:u}=Jc(o),h=e?Fh:t?Al:Jt;if(u.call(o,r))return h(i.get(r));if(u.call(o,l))return h(i.get(l));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&fn(Qe(r),"iterate",Li),r.size},has(r){const i=this.__v_raw,o=Qe(i),l=Qe(r);return t||(Wr(r,l)&&fn(o,"has",r),fn(o,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const o=this,l=o.__v_raw,u=Qe(l),h=e?Fh:t?Al:Jt;return!t&&fn(u,"iterate",Li),l.forEach((d,m)=>r.call(i,h(d),h(m),o))}};return mn(n,t?{add:Zc("add"),set:Zc("set"),delete:Zc("delete"),clear:Zc("clear")}:{add(r){!e&&!Kn(r)&&!Xr(r)&&(r=Qe(r));const i=Qe(this);return Jc(i).has.call(i,r)||(i.add(r),nr(i,"add",r,r)),this},set(r,i){!e&&!Kn(i)&&!Xr(i)&&(i=Qe(i));const o=Qe(this),{has:l,get:u}=Jc(o);let h=l.call(o,r);h||(r=Qe(r),h=l.call(o,r));const d=u.call(o,r);return o.set(r,i),h?Wr(i,d)&&nr(o,"set",r,i):nr(o,"add",r,i),this},delete(r){const i=Qe(this),{has:o,get:l}=Jc(i);let u=o.call(i,r);u||(r=Qe(r),u=o.call(i,r)),l&&l.call(i,r);const h=i.delete(r);return u&&nr(i,"delete",r,void 0),h},clear(){const r=Qe(this),i=r.size!==0,o=r.clear();return i&&nr(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=cT(r,t,e)}),n}function Vf(t,e){const n=lT(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Je(n,r)&&r in s?n:s,r,i)}const uT={get:Vf(!1,!1)},hT={get:Vf(!1,!0)},fT={get:Vf(!0,!1)};const D_=new WeakMap,x_=new WeakMap,V_=new WeakMap,dT=new WeakMap;function pT(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mT(t){return t.__v_skip||!Object.isExtensible(t)?0:pT(Ub(t))}function pc(t){return Xr(t)?t:Lf(t,!1,iT,uT,D_)}function L_(t){return Lf(t,!1,aT,hT,x_)}function Uh(t){return Lf(t,!0,oT,fT,V_)}function Lf(t,e,n,s,r){if(!ct(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=mT(t);if(i===0)return t;const o=r.get(t);if(o)return o;const l=new Proxy(t,i===2?s:n);return r.set(t,l),l}function zr(t){return Xr(t)?zr(t.__v_raw):!!(t&&t.__v_isReactive)}function Xr(t){return!!(t&&t.__v_isReadonly)}function Kn(t){return!!(t&&t.__v_isShallow)}function Mf(t){return t?!!t.__v_raw:!1}function Qe(t){const e=t&&t.__v_raw;return e?Qe(e):t}function Ff(t){return!Je(t,"__v_skip")&&Object.isExtensible(t)&&m_(t,"__v_skip",!0),t}const Jt=t=>ct(t)?pc(t):t,Al=t=>ct(t)?Uh(t):t;function kt(t){return t?t.__v_isRef===!0:!1}function _t(t){return M_(t,!1)}function gT(t){return M_(t,!0)}function M_(t,e){return kt(t)?t:new _T(t,e)}class _T{constructor(e,n){this.dep=new xf,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Qe(e),this._value=n?e:Jt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Kn(e)||Xr(e);e=s?e:Qe(e),Wr(e,n)&&(this._rawValue=e,this._value=s?e:Jt(e),this.dep.trigger())}}function ft(t){return kt(t)?t.value:t}const yT={get:(t,e,n)=>e==="__v_raw"?t:ft(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return kt(r)&&!kt(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function F_(t){return zr(t)?t:new Proxy(t,yT)}function vT(t){const e=be(t)?new Array(t.length):{};for(const n in t)e[n]=wT(t,n);return e}class ET{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Zb(Qe(this._object),this._key)}}function wT(t,e,n){const s=t[e];return kt(s)?s:new ET(t,e,n)}class bT{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new xf(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ya-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&ht!==this)return I_(this,!0),!0}get value(){const e=this.dep.track();return S_(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function TT(t,e,n=!1){let s,r;return Ne(t)?s=t:(s=t.get,r=t.set),new bT(s,r,n)}const el={},Rl=new WeakMap;let Oi;function IT(t,e=!1,n=Oi){if(n){let s=Rl.get(n);s||Rl.set(n,s=[]),s.push(t)}}function AT(t,e,n=at){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:l,call:u}=n,h=ne=>r?ne:Kn(ne)||r===!1||r===0?sr(ne,1):sr(ne);let d,m,y,w,L=!1,M=!1;if(kt(t)?(m=()=>t.value,L=Kn(t)):zr(t)?(m=()=>h(t),L=!0):be(t)?(M=!0,L=t.some(ne=>zr(ne)||Kn(ne)),m=()=>t.map(ne=>{if(kt(ne))return ne.value;if(zr(ne))return h(ne);if(Ne(ne))return u?u(ne,2):ne()})):Ne(t)?e?m=u?()=>u(t,2):t:m=()=>{if(y){ur();try{y()}finally{hr()}}const ne=Oi;Oi=d;try{return u?u(t,3,[w]):t(w)}finally{Oi=ne}}:m=Rs,e&&r){const ne=m,de=r===!0?1/0:r;m=()=>sr(ne(),de)}const U=w_(),Y=()=>{d.stop(),U&&U.active&&Pf(U.effects,d)};if(i&&e){const ne=e;e=(...de)=>{ne(...de),Y()}}let K=M?new Array(t.length).fill(el):el;const X=ne=>{if(!(!(d.flags&1)||!d.dirty&&!ne))if(e){const de=d.run();if(r||L||(M?de.some((Se,S)=>Wr(Se,K[S])):Wr(de,K))){y&&y();const Se=Oi;Oi=d;try{const S=[de,K===el?void 0:M&&K[0]===el?[]:K,w];K=de,u?u(e,3,S):e(...S)}finally{Oi=Se}}}else d.run()};return l&&l(X),d=new b_(m),d.scheduler=o?()=>o(X,!1):X,w=ne=>IT(ne,!1,d),y=d.onStop=()=>{const ne=Rl.get(d);if(ne){if(u)u(ne,4);else for(const de of ne)de();Rl.delete(d)}},e?s?X(!0):K=d.run():o?o(X.bind(null,!0),!0):d.run(),Y.pause=d.pause.bind(d),Y.resume=d.resume.bind(d),Y.stop=Y,Y}function sr(t,e=1/0,n){if(e<=0||!ct(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,kt(t))sr(t.value,e,n);else if(be(t))for(let s=0;s<t.length;s++)sr(t[s],e,n);else if(iu(t)||ko(t))t.forEach(s=>{sr(s,e,n)});else if(p_(t)){for(const s in t)sr(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&sr(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function mc(t,e,n,s){try{return s?t(...s):t()}catch(r){hu(r,e,n)}}function Vs(t,e,n,s){if(Ne(t)){const r=mc(t,e,n,s);return r&&f_(r)&&r.catch(i=>{hu(i,e,n)}),r}if(be(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Vs(t[i],e,n,s));return r}}function hu(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||at;if(e){let l=e.parent;const u=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let m=0;m<d.length;m++)if(d[m](t,u,h)===!1)return}l=l.parent}if(i){ur(),mc(i,null,10,[t,u,h]),hr();return}}RT(t,n,r,s,o)}function RT(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const In=[];let Ts=-1;const Oo=[];let Mr=null,bo=0;const U_=Promise.resolve();let Sl=null;function fu(t){const e=Sl||U_;return t?e.then(this?t.bind(this):t):e}function ST(t){let e=Ts+1,n=In.length;for(;e<n;){const s=e+n>>>1,r=In[s],i=Ja(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function Uf(t){if(!(t.flags&1)){const e=Ja(t),n=In[In.length-1];!n||!(t.flags&2)&&e>=Ja(n)?In.push(t):In.splice(ST(e),0,t),t.flags|=1,$_()}}function $_(){Sl||(Sl=U_.then(B_))}function CT(t){be(t)?Oo.push(...t):Mr&&t.id===-1?Mr.splice(bo+1,0,t):t.flags&1||(Oo.push(t),t.flags|=1),$_()}function Fp(t,e,n=Ts+1){for(;n<In.length;n++){const s=In[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;In.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function j_(t){if(Oo.length){const e=[...new Set(Oo)].sort((n,s)=>Ja(n)-Ja(s));if(Oo.length=0,Mr){Mr.push(...e);return}for(Mr=e,bo=0;bo<Mr.length;bo++){const n=Mr[bo];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Mr=null,bo=0}}const Ja=t=>t.id==null?t.flags&2?-1:1/0:t.id;function B_(t){try{for(Ts=0;Ts<In.length;Ts++){const e=In[Ts];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),mc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Ts<In.length;Ts++){const e=In[Ts];e&&(e.flags&=-2)}Ts=-1,In.length=0,j_(),Sl=null,(In.length||Oo.length)&&B_()}}let Vn=null,q_=null;function Cl(t){const e=Vn;return Vn=t,q_=t&&t.type.__scopeId||null,e}function An(t,e=Vn,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&Ol(-1);const i=Cl(e);let o;try{o=t(...r)}finally{Cl(i),s._d&&Ol(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function or(t,e){if(Vn===null)return t;const n=gu(Vn),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,l,u=at]=e[r];i&&(Ne(i)&&(i={mounted:i,updated:i}),i.deep&&sr(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:u}))}return t}function Pi(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let u=l.dir[s];u&&(ur(),Vs(u,n,8,[t.el,l,t,e]),hr())}}const PT=Symbol("_vte"),kT=t=>t.__isTeleport,OT=Symbol("_leaveCb");function $f(t,e){t.shapeFlag&6&&t.component?(t.transition=e,$f(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function jf(t,e){return Ne(t)?mn({name:t.name},e,{setup:t}):t}function H_(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Pl=new WeakMap;function Fa(t,e,n,s,r=!1){if(be(t)){t.forEach((L,M)=>Fa(L,e&&(be(e)?e[M]:e),n,s,r));return}if(Ua(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Fa(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?gu(s.component):s.el,o=r?null:i,{i:l,r:u}=t,h=e&&e.r,d=l.refs===at?l.refs={}:l.refs,m=l.setupState,y=Qe(m),w=m===at?h_:L=>Je(y,L);if(h!=null&&h!==u){if(Up(e),Ft(h))d[h]=null,w(h)&&(m[h]=null);else if(kt(h)){h.value=null;const L=e;L.k&&(d[L.k]=null)}}if(Ne(u))mc(u,l,12,[o,d]);else{const L=Ft(u),M=kt(u);if(L||M){const U=()=>{if(t.f){const Y=L?w(u)?m[u]:d[u]:u.value;if(r)be(Y)&&Pf(Y,i);else if(be(Y))Y.includes(i)||Y.push(i);else if(L)d[u]=[i],w(u)&&(m[u]=d[u]);else{const K=[i];u.value=K,t.k&&(d[t.k]=K)}}else L?(d[u]=o,w(u)&&(m[u]=o)):M&&(u.value=o,t.k&&(d[t.k]=o))};if(o){const Y=()=>{U(),Pl.delete(t)};Y.id=-1,Pl.set(t,Y),Dn(Y,n)}else Up(t),U()}}}function Up(t){const e=Pl.get(t);e&&(e.flags|=8,Pl.delete(t))}cu().requestIdleCallback;cu().cancelIdleCallback;const Ua=t=>!!t.type.__asyncLoader,W_=t=>t.type.__isKeepAlive;function NT(t,e){z_(t,"a",e)}function DT(t,e){z_(t,"da",e)}function z_(t,e,n=pn){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(du(e,s,n),n){let r=n.parent;for(;r&&r.parent;)W_(r.parent.vnode)&&xT(s,e,n,r),r=r.parent}}function xT(t,e,n,s){const r=du(e,t,s,!0);Bf(()=>{Pf(s[e],r)},n)}function du(t,e,n=pn,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{ur();const l=_c(n),u=Vs(e,n,t,o);return l(),hr(),u});return s?r.unshift(i):r.push(i),i}}const _r=t=>(e,n=pn)=>{(!tc||t==="sp")&&du(t,(...s)=>e(...s),n)},VT=_r("bm"),gc=_r("m"),LT=_r("bu"),MT=_r("u"),FT=_r("bum"),Bf=_r("um"),UT=_r("sp"),$T=_r("rtg"),jT=_r("rtc");function BT(t,e=pn){du("ec",t,e)}const qT="components";function Ki(t,e){return WT(qT,t,!0,e)||t}const HT=Symbol.for("v-ndc");function WT(t,e,n=!0,s=!1){const r=Vn||pn;if(r){const i=r.type;{const l=xI(i,!1);if(l&&(l===e||l===Yn(e)||l===au(Yn(e))))return i}const o=$p(r[t]||i[t],e)||$p(r.appContext[t],e);return!o&&s?i:o}}function $p(t,e){return t&&(t[e]||t[Yn(e)]||t[au(Yn(e))])}function Za(t,e,n,s){let r;const i=n,o=be(t);if(o||Ft(t)){const l=o&&zr(t);let u=!1,h=!1;l&&(u=!Kn(t),h=Xr(t),t=uu(t)),r=new Array(t.length);for(let d=0,m=t.length;d<m;d++)r[d]=e(u?h?Al(Jt(t[d])):Jt(t[d]):t[d],d,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=e(l+1,l,void 0,i)}else if(ct(t))if(t[Symbol.iterator])r=Array.from(t,(l,u)=>e(l,u,void 0,i));else{const l=Object.keys(t);r=new Array(l.length);for(let u=0,h=l.length;u<h;u++){const d=l[u];r[u]=e(t[d],d,u,i)}}else r=[];return r}const $h=t=>t?dy(t)?gu(t):$h(t.parent):null,$a=mn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>$h(t.parent),$root:t=>$h(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>K_(t),$forceUpdate:t=>t.f||(t.f=()=>{Uf(t.update)}),$nextTick:t=>t.n||(t.n=fu.bind(t.proxy)),$watch:t=>dI.bind(t)}),dh=(t,e)=>t!==at&&!t.__isScriptSetup&&Je(t,e),zT={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:l,appContext:u}=t;let h;if(e[0]!=="$"){const w=o[e];if(w!==void 0)switch(w){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(dh(s,e))return o[e]=1,s[e];if(r!==at&&Je(r,e))return o[e]=2,r[e];if((h=t.propsOptions[0])&&Je(h,e))return o[e]=3,i[e];if(n!==at&&Je(n,e))return o[e]=4,n[e];jh&&(o[e]=0)}}const d=$a[e];let m,y;if(d)return e==="$attrs"&&fn(t.attrs,"get",""),d(t);if((m=l.__cssModules)&&(m=m[e]))return m;if(n!==at&&Je(n,e))return o[e]=4,n[e];if(y=u.config.globalProperties,Je(y,e))return y[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return dh(r,e)?(r[e]=n,!0):s!==at&&Je(s,e)?(s[e]=n,!0):Je(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i,type:o}},l){let u,h;return!!(n[l]||t!==at&&l[0]!=="$"&&Je(t,l)||dh(e,l)||(u=i[0])&&Je(u,l)||Je(s,l)||Je($a,l)||Je(r.config.globalProperties,l)||(h=o.__cssModules)&&h[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Je(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function jp(t){return be(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let jh=!0;function GT(t){const e=K_(t),n=t.proxy,s=t.ctx;jh=!1,e.beforeCreate&&Bp(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:l,provide:u,inject:h,created:d,beforeMount:m,mounted:y,beforeUpdate:w,updated:L,activated:M,deactivated:U,beforeDestroy:Y,beforeUnmount:K,destroyed:X,unmounted:ne,render:de,renderTracked:Se,renderTriggered:S,errorCaptured:b,serverPrefetch:T,expose:P,inheritAttrs:C,components:x,directives:A,filters:pt}=e;if(h&&KT(h,s,null),o)for(const Te in o){const Ve=o[Te];Ne(Ve)&&(s[Te]=Ve.bind(n))}if(r){const Te=r.call(n,n);ct(Te)&&(t.data=pc(Te))}if(jh=!0,i)for(const Te in i){const Ve=i[Te],nn=Ne(Ve)?Ve.bind(n,n):Ne(Ve.get)?Ve.get.bind(n,n):Rs,kn=!Ne(Ve)&&Ne(Ve.set)?Ve.set.bind(n):Rs,z=Zt({get:nn,set:kn});Object.defineProperty(s,Te,{enumerable:!0,configurable:!0,get:()=>z.value,set:Tt=>z.value=Tt})}if(l)for(const Te in l)G_(l[Te],s,n,Te);if(u){const Te=Ne(u)?u.call(n):u;Reflect.ownKeys(Te).forEach(Ve=>{ll(Ve,Te[Ve])})}d&&Bp(d,t,"c");function et(Te,Ve){be(Ve)?Ve.forEach(nn=>Te(nn.bind(n))):Ve&&Te(Ve.bind(n))}if(et(VT,m),et(gc,y),et(LT,w),et(MT,L),et(NT,M),et(DT,U),et(BT,b),et(jT,Se),et($T,S),et(FT,K),et(Bf,ne),et(UT,T),be(P))if(P.length){const Te=t.exposed||(t.exposed={});P.forEach(Ve=>{Object.defineProperty(Te,Ve,{get:()=>n[Ve],set:nn=>n[Ve]=nn,enumerable:!0})})}else t.exposed||(t.exposed={});de&&t.render===Rs&&(t.render=de),C!=null&&(t.inheritAttrs=C),x&&(t.components=x),A&&(t.directives=A),T&&H_(t)}function KT(t,e,n=Rs){be(t)&&(t=Bh(t));for(const s in t){const r=t[s];let i;ct(r)?"default"in r?i=Qn(r.from||s,r.default,!0):i=Qn(r.from||s):i=Qn(r),kt(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Bp(t,e,n){Vs(be(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function G_(t,e,n,s){let r=s.includes(".")?ay(n,s):()=>n[s];if(Ft(t)){const i=e[t];Ne(i)&&No(r,i)}else if(Ne(t))No(r,t.bind(n));else if(ct(t))if(be(t))t.forEach(i=>G_(i,e,n,s));else{const i=Ne(t.handler)?t.handler.bind(n):e[t.handler];Ne(i)&&No(r,i,t)}}function K_(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let u;return l?u=l:!r.length&&!n&&!s?u=e:(u={},r.length&&r.forEach(h=>kl(u,h,o,!0)),kl(u,e,o)),ct(e)&&i.set(e,u),u}function kl(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&kl(t,i,n,!0),r&&r.forEach(o=>kl(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const l=QT[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const QT={data:qp,props:Hp,emits:Hp,methods:Ca,computed:Ca,beforeCreate:bn,created:bn,beforeMount:bn,mounted:bn,beforeUpdate:bn,updated:bn,beforeDestroy:bn,beforeUnmount:bn,destroyed:bn,unmounted:bn,activated:bn,deactivated:bn,errorCaptured:bn,serverPrefetch:bn,components:Ca,directives:Ca,watch:XT,provide:qp,inject:YT};function qp(t,e){return e?t?function(){return mn(Ne(t)?t.call(this,this):t,Ne(e)?e.call(this,this):e)}:e:t}function YT(t,e){return Ca(Bh(t),Bh(e))}function Bh(t){if(be(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function bn(t,e){return t?[...new Set([].concat(t,e))]:e}function Ca(t,e){return t?mn(Object.create(null),t,e):e}function Hp(t,e){return t?be(t)&&be(e)?[...new Set([...t,...e])]:mn(Object.create(null),jp(t),jp(e??{})):e}function XT(t,e){if(!t)return e;if(!e)return t;const n=mn(Object.create(null),t);for(const s in e)n[s]=bn(t[s],e[s]);return n}function Q_(){return{app:null,config:{isNativeTag:h_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let JT=0;function ZT(t,e){return function(s,r=null){Ne(s)||(s=mn({},s)),r!=null&&!ct(r)&&(r=null);const i=Q_(),o=new WeakSet,l=[];let u=!1;const h=i.app={_uid:JT++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:LI,get config(){return i.config},set config(d){},use(d,...m){return o.has(d)||(d&&Ne(d.install)?(o.add(d),d.install(h,...m)):Ne(d)&&(o.add(d),d(h,...m))),h},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),h},component(d,m){return m?(i.components[d]=m,h):i.components[d]},directive(d,m){return m?(i.directives[d]=m,h):i.directives[d]},mount(d,m,y){if(!u){const w=h._ceVNode||$e(s,r);return w.appContext=i,y===!0?y="svg":y===!1&&(y=void 0),t(w,d,y),u=!0,h._container=d,d.__vue_app__=h,gu(w.component)}},onUnmount(d){l.push(d)},unmount(){u&&(Vs(l,h._instance,16),t(null,h._container),delete h._container.__vue_app__)},provide(d,m){return i.provides[d]=m,h},runWithContext(d){const m=Mi;Mi=h;try{return d()}finally{Mi=m}}};return h}}let Mi=null;function ll(t,e){if(pn){let n=pn.provides;const s=pn.parent&&pn.parent.provides;s===n&&(n=pn.provides=Object.create(s)),n[t]=e}}function Qn(t,e,n=!1){const s=fy();if(s||Mi){let r=Mi?Mi._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Ne(e)?e.call(s&&s.proxy):e}}function eI(){return!!(fy()||Mi)}const Y_={},X_=()=>Object.create(Y_),J_=t=>Object.getPrototypeOf(t)===Y_;function tI(t,e,n,s=!1){const r={},i=X_();t.propsDefaults=Object.create(null),Z_(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:L_(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function nI(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,l=Qe(r),[u]=t.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let m=0;m<d.length;m++){let y=d[m];if(pu(t.emitsOptions,y))continue;const w=e[y];if(u)if(Je(i,y))w!==i[y]&&(i[y]=w,h=!0);else{const L=Yn(y);r[L]=qh(u,l,L,w,t,!1)}else w!==i[y]&&(i[y]=w,h=!0)}}}else{Z_(t,e,r,i)&&(h=!0);let d;for(const m in l)(!e||!Je(e,m)&&((d=Gi(m))===m||!Je(e,d)))&&(u?n&&(n[m]!==void 0||n[d]!==void 0)&&(r[m]=qh(u,l,m,void 0,t,!0)):delete r[m]);if(i!==l)for(const m in i)(!e||!Je(e,m))&&(delete i[m],h=!0)}h&&nr(t.attrs,"set","")}function Z_(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,l;if(e)for(let u in e){if(Va(u))continue;const h=e[u];let d;r&&Je(r,d=Yn(u))?!i||!i.includes(d)?n[d]=h:(l||(l={}))[d]=h:pu(t.emitsOptions,u)||(!(u in s)||h!==s[u])&&(s[u]=h,o=!0)}if(i){const u=Qe(n),h=l||at;for(let d=0;d<i.length;d++){const m=i[d];n[m]=qh(r,u,m,h[m],t,!Je(h,m))}}return o}function qh(t,e,n,s,r,i){const o=t[n];if(o!=null){const l=Je(o,"default");if(l&&s===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&Ne(u)){const{propsDefaults:h}=r;if(n in h)s=h[n];else{const d=_c(r);s=h[n]=u.call(null,e),d()}}else s=u;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!l?s=!1:o[1]&&(s===""||s===Gi(n))&&(s=!0))}return s}const sI=new WeakMap;function ey(t,e,n=!1){const s=n?sI:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},l=[];let u=!1;if(!Ne(t)){const d=m=>{u=!0;const[y,w]=ey(m,e,!0);mn(o,y),w&&l.push(...w)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!u)return ct(t)&&s.set(t,Po),Po;if(be(i))for(let d=0;d<i.length;d++){const m=Yn(i[d]);Wp(m)&&(o[m]=at)}else if(i)for(const d in i){const m=Yn(d);if(Wp(m)){const y=i[d],w=o[m]=be(y)||Ne(y)?{type:y}:mn({},y),L=w.type;let M=!1,U=!0;if(be(L))for(let Y=0;Y<L.length;++Y){const K=L[Y],X=Ne(K)&&K.name;if(X==="Boolean"){M=!0;break}else X==="String"&&(U=!1)}else M=Ne(L)&&L.name==="Boolean";w[0]=M,w[1]=U,(M||Je(w,"default"))&&l.push(m)}}const h=[o,l];return ct(t)&&s.set(t,h),h}function Wp(t){return t[0]!=="$"&&!Va(t)}const qf=t=>t==="_"||t==="_ctx"||t==="$stable",Hf=t=>be(t)?t.map(As):[As(t)],rI=(t,e,n)=>{if(e._n)return e;const s=An((...r)=>Hf(e(...r)),n);return s._c=!1,s},ty=(t,e,n)=>{const s=t._ctx;for(const r in t){if(qf(r))continue;const i=t[r];if(Ne(i))e[r]=rI(r,i,s);else if(i!=null){const o=Hf(i);e[r]=()=>o}}},ny=(t,e)=>{const n=Hf(e);t.slots.default=()=>n},sy=(t,e,n)=>{for(const s in e)(n||!qf(s))&&(t[s]=e[s])},iI=(t,e,n)=>{const s=t.slots=X_();if(t.vnode.shapeFlag&32){const r=e._;r?(sy(s,e,n),n&&m_(s,"_",r,!0)):ty(e,s)}else e&&ny(t,e)},oI=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=at;if(s.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:sy(r,e,n):(i=!e.$stable,ty(e,r)),o=e}else e&&(ny(t,e),o={default:1});if(i)for(const l in r)!qf(l)&&o[l]==null&&delete r[l]},Dn=wI;function aI(t){return cI(t)}function cI(t,e){const n=cu();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:l,createComment:u,setText:h,setElementText:d,parentNode:m,nextSibling:y,setScopeId:w=Rs,insertStaticContent:L}=t,M=(I,R,D,H=null,W=null,q=null,ie=void 0,te=null,Z=!!R.dynamicChildren)=>{if(I===R)return;I&&!Ra(I,R)&&(H=B(I),Tt(I,W,q,!0),I=null),R.patchFlag===-2&&(Z=!1,R.dynamicChildren=null);const{type:ee,ref:ye,shapeFlag:oe}=R;switch(ee){case mu:U(I,R,D,H);break;case Jr:Y(I,R,D,H);break;case ul:I==null&&K(R,D,H,ie);break;case Pn:x(I,R,D,H,W,q,ie,te,Z);break;default:oe&1?de(I,R,D,H,W,q,ie,te,Z):oe&6?A(I,R,D,H,W,q,ie,te,Z):(oe&64||oe&128)&&ee.process(I,R,D,H,W,q,ie,te,Z,pe)}ye!=null&&W?Fa(ye,I&&I.ref,q,R||I,!R):ye==null&&I&&I.ref!=null&&Fa(I.ref,null,q,I,!0)},U=(I,R,D,H)=>{if(I==null)s(R.el=l(R.children),D,H);else{const W=R.el=I.el;R.children!==I.children&&h(W,R.children)}},Y=(I,R,D,H)=>{I==null?s(R.el=u(R.children||""),D,H):R.el=I.el},K=(I,R,D,H)=>{[I.el,I.anchor]=L(I.children,R,D,H,I.el,I.anchor)},X=({el:I,anchor:R},D,H)=>{let W;for(;I&&I!==R;)W=y(I),s(I,D,H),I=W;s(R,D,H)},ne=({el:I,anchor:R})=>{let D;for(;I&&I!==R;)D=y(I),r(I),I=D;r(R)},de=(I,R,D,H,W,q,ie,te,Z)=>{R.type==="svg"?ie="svg":R.type==="math"&&(ie="mathml"),I==null?Se(R,D,H,W,q,ie,te,Z):T(I,R,W,q,ie,te,Z)},Se=(I,R,D,H,W,q,ie,te)=>{let Z,ee;const{props:ye,shapeFlag:oe,transition:me,dirs:ge}=I;if(Z=I.el=o(I.type,q,ye&&ye.is,ye),oe&8?d(Z,I.children):oe&16&&b(I.children,Z,null,H,W,ph(I,q),ie,te),ge&&Pi(I,null,H,"created"),S(Z,I,I.scopeId,ie,H),ye){for(const Ke in ye)Ke!=="value"&&!Va(Ke)&&i(Z,Ke,null,ye[Ke],q,H);"value"in ye&&i(Z,"value",null,ye.value,q),(ee=ye.onVnodeBeforeMount)&&bs(ee,H,I)}ge&&Pi(I,null,H,"beforeMount");const Ie=lI(W,me);Ie&&me.beforeEnter(Z),s(Z,R,D),((ee=ye&&ye.onVnodeMounted)||Ie||ge)&&Dn(()=>{ee&&bs(ee,H,I),Ie&&me.enter(Z),ge&&Pi(I,null,H,"mounted")},W)},S=(I,R,D,H,W)=>{if(D&&w(I,D),H)for(let q=0;q<H.length;q++)w(I,H[q]);if(W){let q=W.subTree;if(R===q||ly(q.type)&&(q.ssContent===R||q.ssFallback===R)){const ie=W.vnode;S(I,ie,ie.scopeId,ie.slotScopeIds,W.parent)}}},b=(I,R,D,H,W,q,ie,te,Z=0)=>{for(let ee=Z;ee<I.length;ee++){const ye=I[ee]=te?Fr(I[ee]):As(I[ee]);M(null,ye,R,D,H,W,q,ie,te)}},T=(I,R,D,H,W,q,ie)=>{const te=R.el=I.el;let{patchFlag:Z,dynamicChildren:ee,dirs:ye}=R;Z|=I.patchFlag&16;const oe=I.props||at,me=R.props||at;let ge;if(D&&ki(D,!1),(ge=me.onVnodeBeforeUpdate)&&bs(ge,D,R,I),ye&&Pi(R,I,D,"beforeUpdate"),D&&ki(D,!0),(oe.innerHTML&&me.innerHTML==null||oe.textContent&&me.textContent==null)&&d(te,""),ee?P(I.dynamicChildren,ee,te,D,H,ph(R,W),q):ie||Ve(I,R,te,null,D,H,ph(R,W),q,!1),Z>0){if(Z&16)C(te,oe,me,D,W);else if(Z&2&&oe.class!==me.class&&i(te,"class",null,me.class,W),Z&4&&i(te,"style",oe.style,me.style,W),Z&8){const Ie=R.dynamicProps;for(let Ke=0;Ke<Ie.length;Ke++){const qe=Ie[Ke],Wt=oe[qe],Et=me[qe];(Et!==Wt||qe==="value")&&i(te,qe,Wt,Et,W,D)}}Z&1&&I.children!==R.children&&d(te,R.children)}else!ie&&ee==null&&C(te,oe,me,D,W);((ge=me.onVnodeUpdated)||ye)&&Dn(()=>{ge&&bs(ge,D,R,I),ye&&Pi(R,I,D,"updated")},H)},P=(I,R,D,H,W,q,ie)=>{for(let te=0;te<R.length;te++){const Z=I[te],ee=R[te],ye=Z.el&&(Z.type===Pn||!Ra(Z,ee)||Z.shapeFlag&198)?m(Z.el):D;M(Z,ee,ye,null,H,W,q,ie,!0)}},C=(I,R,D,H,W)=>{if(R!==D){if(R!==at)for(const q in R)!Va(q)&&!(q in D)&&i(I,q,R[q],null,W,H);for(const q in D){if(Va(q))continue;const ie=D[q],te=R[q];ie!==te&&q!=="value"&&i(I,q,te,ie,W,H)}"value"in D&&i(I,"value",R.value,D.value,W)}},x=(I,R,D,H,W,q,ie,te,Z)=>{const ee=R.el=I?I.el:l(""),ye=R.anchor=I?I.anchor:l("");let{patchFlag:oe,dynamicChildren:me,slotScopeIds:ge}=R;ge&&(te=te?te.concat(ge):ge),I==null?(s(ee,D,H),s(ye,D,H),b(R.children||[],D,ye,W,q,ie,te,Z)):oe>0&&oe&64&&me&&I.dynamicChildren?(P(I.dynamicChildren,me,D,W,q,ie,te),(R.key!=null||W&&R===W.subTree)&&ry(I,R,!0)):Ve(I,R,D,ye,W,q,ie,te,Z)},A=(I,R,D,H,W,q,ie,te,Z)=>{R.slotScopeIds=te,I==null?R.shapeFlag&512?W.ctx.activate(R,D,H,ie,Z):pt(R,D,H,W,q,ie,Z):Ut(I,R,Z)},pt=(I,R,D,H,W,q,ie)=>{const te=I.component=PI(I,H,W);if(W_(I)&&(te.ctx.renderer=pe),kI(te,!1,ie),te.asyncDep){if(W&&W.registerDep(te,et,ie),!I.el){const Z=te.subTree=$e(Jr);Y(null,Z,R,D),I.placeholder=Z.el}}else et(te,I,R,D,W,q,ie)},Ut=(I,R,D)=>{const H=R.component=I.component;if(vI(I,R,D))if(H.asyncDep&&!H.asyncResolved){Te(H,R,D);return}else H.next=R,H.update();else R.el=I.el,H.vnode=R},et=(I,R,D,H,W,q,ie)=>{const te=()=>{if(I.isMounted){let{next:oe,bu:me,u:ge,parent:Ie,vnode:Ke}=I;{const Nt=iy(I);if(Nt){oe&&(oe.el=Ke.el,Te(I,oe,ie)),Nt.asyncDep.then(()=>{I.isUnmounted||te()});return}}let qe=oe,Wt;ki(I,!1),oe?(oe.el=Ke.el,Te(I,oe,ie)):oe=Ke,me&&cl(me),(Wt=oe.props&&oe.props.onVnodeBeforeUpdate)&&bs(Wt,Ie,oe,Ke),ki(I,!0);const Et=Gp(I),Ot=I.subTree;I.subTree=Et,M(Ot,Et,m(Ot.el),B(Ot),I,W,q),oe.el=Et.el,qe===null&&EI(I,Et.el),ge&&Dn(ge,W),(Wt=oe.props&&oe.props.onVnodeUpdated)&&Dn(()=>bs(Wt,Ie,oe,Ke),W)}else{let oe;const{el:me,props:ge}=R,{bm:Ie,m:Ke,parent:qe,root:Wt,type:Et}=I,Ot=Ua(R);ki(I,!1),Ie&&cl(Ie),!Ot&&(oe=ge&&ge.onVnodeBeforeMount)&&bs(oe,qe,R),ki(I,!0);{Wt.ce&&Wt.ce._def.shadowRoot!==!1&&Wt.ce._injectChildStyle(Et);const Nt=I.subTree=Gp(I);M(null,Nt,D,H,I,W,q),R.el=Nt.el}if(Ke&&Dn(Ke,W),!Ot&&(oe=ge&&ge.onVnodeMounted)){const Nt=R;Dn(()=>bs(oe,qe,Nt),W)}(R.shapeFlag&256||qe&&Ua(qe.vnode)&&qe.vnode.shapeFlag&256)&&I.a&&Dn(I.a,W),I.isMounted=!0,R=D=H=null}};I.scope.on();const Z=I.effect=new b_(te);I.scope.off();const ee=I.update=Z.run.bind(Z),ye=I.job=Z.runIfDirty.bind(Z);ye.i=I,ye.id=I.uid,Z.scheduler=()=>Uf(ye),ki(I,!0),ee()},Te=(I,R,D)=>{R.component=I;const H=I.vnode.props;I.vnode=R,I.next=null,nI(I,R.props,H,D),oI(I,R.children,D),ur(),Fp(I),hr()},Ve=(I,R,D,H,W,q,ie,te,Z=!1)=>{const ee=I&&I.children,ye=I?I.shapeFlag:0,oe=R.children,{patchFlag:me,shapeFlag:ge}=R;if(me>0){if(me&128){kn(ee,oe,D,H,W,q,ie,te,Z);return}else if(me&256){nn(ee,oe,D,H,W,q,ie,te,Z);return}}ge&8?(ye&16&&vt(ee,W,q),oe!==ee&&d(D,oe)):ye&16?ge&16?kn(ee,oe,D,H,W,q,ie,te,Z):vt(ee,W,q,!0):(ye&8&&d(D,""),ge&16&&b(oe,D,H,W,q,ie,te,Z))},nn=(I,R,D,H,W,q,ie,te,Z)=>{I=I||Po,R=R||Po;const ee=I.length,ye=R.length,oe=Math.min(ee,ye);let me;for(me=0;me<oe;me++){const ge=R[me]=Z?Fr(R[me]):As(R[me]);M(I[me],ge,D,null,W,q,ie,te,Z)}ee>ye?vt(I,W,q,!0,!1,oe):b(R,D,H,W,q,ie,te,Z,oe)},kn=(I,R,D,H,W,q,ie,te,Z)=>{let ee=0;const ye=R.length;let oe=I.length-1,me=ye-1;for(;ee<=oe&&ee<=me;){const ge=I[ee],Ie=R[ee]=Z?Fr(R[ee]):As(R[ee]);if(Ra(ge,Ie))M(ge,Ie,D,null,W,q,ie,te,Z);else break;ee++}for(;ee<=oe&&ee<=me;){const ge=I[oe],Ie=R[me]=Z?Fr(R[me]):As(R[me]);if(Ra(ge,Ie))M(ge,Ie,D,null,W,q,ie,te,Z);else break;oe--,me--}if(ee>oe){if(ee<=me){const ge=me+1,Ie=ge<ye?R[ge].el:H;for(;ee<=me;)M(null,R[ee]=Z?Fr(R[ee]):As(R[ee]),D,Ie,W,q,ie,te,Z),ee++}}else if(ee>me)for(;ee<=oe;)Tt(I[ee],W,q,!0),ee++;else{const ge=ee,Ie=ee,Ke=new Map;for(ee=Ie;ee<=me;ee++){const At=R[ee]=Z?Fr(R[ee]):As(R[ee]);At.key!=null&&Ke.set(At.key,ee)}let qe,Wt=0;const Et=me-Ie+1;let Ot=!1,Nt=0;const sn=new Array(Et);for(ee=0;ee<Et;ee++)sn[ee]=0;for(ee=ge;ee<=oe;ee++){const At=I[ee];if(Wt>=Et){Tt(At,W,q,!0);continue}let Dt;if(At.key!=null)Dt=Ke.get(At.key);else for(qe=Ie;qe<=me;qe++)if(sn[qe-Ie]===0&&Ra(At,R[qe])){Dt=qe;break}Dt===void 0?Tt(At,W,q,!0):(sn[Dt-Ie]=ee+1,Dt>=Nt?Nt=Dt:Ot=!0,M(At,R[Dt],D,null,W,q,ie,te,Z),Wt++)}const yr=Ot?uI(sn):Po;for(qe=yr.length-1,ee=Et-1;ee>=0;ee--){const At=Ie+ee,Dt=R[At],li=R[At+1],js=At+1<ye?li.el||li.placeholder:H;sn[ee]===0?M(null,Dt,D,js,W,q,ie,te,Z):Ot&&(qe<0||ee!==yr[qe]?z(Dt,D,js,2):qe--)}}},z=(I,R,D,H,W=null)=>{const{el:q,type:ie,transition:te,children:Z,shapeFlag:ee}=I;if(ee&6){z(I.component.subTree,R,D,H);return}if(ee&128){I.suspense.move(R,D,H);return}if(ee&64){ie.move(I,R,D,pe);return}if(ie===Pn){s(q,R,D);for(let oe=0;oe<Z.length;oe++)z(Z[oe],R,D,H);s(I.anchor,R,D);return}if(ie===ul){X(I,R,D);return}if(H!==2&&ee&1&&te)if(H===0)te.beforeEnter(q),s(q,R,D),Dn(()=>te.enter(q),W);else{const{leave:oe,delayLeave:me,afterLeave:ge}=te,Ie=()=>{I.ctx.isUnmounted?r(q):s(q,R,D)},Ke=()=>{q._isLeaving&&q[OT](!0),oe(q,()=>{Ie(),ge&&ge()})};me?me(q,Ie,Ke):Ke()}else s(q,R,D)},Tt=(I,R,D,H=!1,W=!1)=>{const{type:q,props:ie,ref:te,children:Z,dynamicChildren:ee,shapeFlag:ye,patchFlag:oe,dirs:me,cacheIndex:ge}=I;if(oe===-2&&(W=!1),te!=null&&(ur(),Fa(te,null,D,I,!0),hr()),ge!=null&&(R.renderCache[ge]=void 0),ye&256){R.ctx.deactivate(I);return}const Ie=ye&1&&me,Ke=!Ua(I);let qe;if(Ke&&(qe=ie&&ie.onVnodeBeforeUnmount)&&bs(qe,R,I),ye&6)It(I.component,D,H);else{if(ye&128){I.suspense.unmount(D,H);return}Ie&&Pi(I,null,R,"beforeUnmount"),ye&64?I.type.remove(I,R,D,pe,H):ee&&!ee.hasOnce&&(q!==Pn||oe>0&&oe&64)?vt(ee,R,D,!1,!0):(q===Pn&&oe&384||!W&&ye&16)&&vt(Z,R,D),H&&Mn(I)}(Ke&&(qe=ie&&ie.onVnodeUnmounted)||Ie)&&Dn(()=>{qe&&bs(qe,R,I),Ie&&Pi(I,null,R,"unmounted")},D)},Mn=I=>{const{type:R,el:D,anchor:H,transition:W}=I;if(R===Pn){yn(D,H);return}if(R===ul){ne(I);return}const q=()=>{r(D),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(I.shapeFlag&1&&W&&!W.persisted){const{leave:ie,delayLeave:te}=W,Z=()=>ie(D,q);te?te(I.el,q,Z):Z()}else q()},yn=(I,R)=>{let D;for(;I!==R;)D=y(I),r(I),I=D;r(R)},It=(I,R,D)=>{const{bum:H,scope:W,job:q,subTree:ie,um:te,m:Z,a:ee}=I;zp(Z),zp(ee),H&&cl(H),W.stop(),q&&(q.flags|=8,Tt(ie,I,R,D)),te&&Dn(te,R),Dn(()=>{I.isUnmounted=!0},R)},vt=(I,R,D,H=!1,W=!1,q=0)=>{for(let ie=q;ie<I.length;ie++)Tt(I[ie],R,D,H,W)},B=I=>{if(I.shapeFlag&6)return B(I.component.subTree);if(I.shapeFlag&128)return I.suspense.next();const R=y(I.anchor||I.el),D=R&&R[PT];return D?y(D):R};let ae=!1;const j=(I,R,D)=>{I==null?R._vnode&&Tt(R._vnode,null,null,!0):M(R._vnode||null,I,R,null,null,null,D),R._vnode=I,ae||(ae=!0,Fp(),j_(),ae=!1)},pe={p:M,um:Tt,m:z,r:Mn,mt:pt,mc:b,pc:Ve,pbc:P,n:B,o:t};return{render:j,hydrate:void 0,createApp:ZT(j)}}function ph({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ki({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function lI(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function ry(t,e,n=!1){const s=t.children,r=e.children;if(be(s)&&be(r))for(let i=0;i<s.length;i++){const o=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=Fr(r[i]),l.el=o.el),!n&&l.patchFlag!==-2&&ry(o,l)),l.type===mu&&l.patchFlag!==-1&&(l.el=o.el),l.type===Jr&&!l.el&&(l.el=o.el)}}function uI(t){const e=t.slice(),n=[0];let s,r,i,o,l;const u=t.length;for(s=0;s<u;s++){const h=t[s];if(h!==0){if(r=n[n.length-1],t[r]<h){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,t[n[l]]<h?i=l+1:o=l;h<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function iy(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:iy(e)}function zp(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const hI=Symbol.for("v-scx"),fI=()=>Qn(hI);function No(t,e,n){return oy(t,e,n)}function oy(t,e,n=at){const{immediate:s,deep:r,flush:i,once:o}=n,l=mn({},n),u=e&&s||!e&&i!=="post";let h;if(tc){if(i==="sync"){const w=fI();h=w.__watcherHandles||(w.__watcherHandles=[])}else if(!u){const w=()=>{};return w.stop=Rs,w.resume=Rs,w.pause=Rs,w}}const d=pn;l.call=(w,L,M)=>Vs(w,d,L,M);let m=!1;i==="post"?l.scheduler=w=>{Dn(w,d&&d.suspense)}:i!=="sync"&&(m=!0,l.scheduler=(w,L)=>{L?w():Uf(w)}),l.augmentJob=w=>{e&&(w.flags|=4),m&&(w.flags|=2,d&&(w.id=d.uid,w.i=d))};const y=AT(t,e,l);return tc&&(h?h.push(y):u&&y()),y}function dI(t,e,n){const s=this.proxy,r=Ft(t)?t.includes(".")?ay(s,t):()=>s[t]:t.bind(s,s);let i;Ne(e)?i=e:(i=e.handler,n=e);const o=_c(this),l=oy(r,i.bind(s),n);return o(),l}function ay(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const pI=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Yn(e)}Modifiers`]||t[`${Gi(e)}Modifiers`];function mI(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||at;let r=n;const i=e.startsWith("update:"),o=i&&pI(s,e.slice(7));o&&(o.trim&&(r=n.map(d=>Ft(d)?d.trim():d)),o.number&&(r=n.map(Tl)));let l,u=s[l=ch(e)]||s[l=ch(Yn(e))];!u&&i&&(u=s[l=ch(Gi(e))]),u&&Vs(u,t,6,r);const h=s[l+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Vs(h,t,6,r)}}const gI=new WeakMap;function cy(t,e,n=!1){const s=n?gI:e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},l=!1;if(!Ne(t)){const u=h=>{const d=cy(h,e,!0);d&&(l=!0,mn(o,d))};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!l?(ct(t)&&s.set(t,null),null):(be(i)?i.forEach(u=>o[u]=null):mn(o,i),ct(t)&&s.set(t,o),o)}function pu(t,e){return!t||!ru(e)?!1:(e=e.slice(2).replace(/Once$/,""),Je(t,e[0].toLowerCase()+e.slice(1))||Je(t,Gi(e))||Je(t,e))}function Gp(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:u,render:h,renderCache:d,props:m,data:y,setupState:w,ctx:L,inheritAttrs:M}=t,U=Cl(t);let Y,K;try{if(n.shapeFlag&4){const ne=r||s,de=ne;Y=As(h.call(de,ne,d,m,w,y,L)),K=l}else{const ne=e;Y=As(ne.length>1?ne(m,{attrs:l,slots:o,emit:u}):ne(m,null)),K=e.props?l:_I(l)}}catch(ne){ja.length=0,hu(ne,t,1),Y=$e(Jr)}let X=Y;if(K&&M!==!1){const ne=Object.keys(K),{shapeFlag:de}=X;ne.length&&de&7&&(i&&ne.some(Cf)&&(K=yI(K,i)),X=$o(X,K,!1,!0))}return n.dirs&&(X=$o(X,null,!1,!0),X.dirs=X.dirs?X.dirs.concat(n.dirs):n.dirs),n.transition&&$f(X,n.transition),Y=X,Cl(U),Y}const _I=t=>{let e;for(const n in t)(n==="class"||n==="style"||ru(n))&&((e||(e={}))[n]=t[n]);return e},yI=(t,e)=>{const n={};for(const s in t)(!Cf(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function vI(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:l,patchFlag:u}=e,h=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return s?Kp(s,o,h):!!o;if(u&8){const d=e.dynamicProps;for(let m=0;m<d.length;m++){const y=d[m];if(o[y]!==s[y]&&!pu(h,y))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?Kp(s,o,h):!0:!!o;return!1}function Kp(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!pu(n,i))return!0}return!1}function EI({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const ly=t=>t.__isSuspense;function wI(t,e){e&&e.pendingBranch?be(t)?e.effects.push(...t):e.effects.push(t):CT(t)}const Pn=Symbol.for("v-fgt"),mu=Symbol.for("v-txt"),Jr=Symbol.for("v-cmt"),ul=Symbol.for("v-stc"),ja=[];let Ln=null;function je(t=!1){ja.push(Ln=t?null:[])}function bI(){ja.pop(),Ln=ja[ja.length-1]||null}let ec=1;function Ol(t,e=!1){ec+=t,t<0&&Ln&&e&&(Ln.hasOnce=!0)}function uy(t){return t.dynamicChildren=ec>0?Ln||Po:null,bI(),ec>0&&Ln&&Ln.push(t),t}function We(t,e,n,s,r,i){return uy(k(t,e,n,s,r,i,!0))}function TI(t,e,n,s,r){return uy($e(t,e,n,s,r,!0))}function Nl(t){return t?t.__v_isVNode===!0:!1}function Ra(t,e){return t.type===e.type&&t.key===e.key}const hy=({key:t})=>t??null,hl=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ft(t)||kt(t)||Ne(t)?{i:Vn,r:t,k:e,f:!!n}:t:null);function k(t,e=null,n=null,s=0,r=null,i=t===Pn?0:1,o=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&hy(e),ref:e&&hl(e),scopeId:q_,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Vn};return l?(Wf(u,n),i&128&&t.normalize(u)):n&&(u.shapeFlag|=Ft(n)?8:16),ec>0&&!o&&Ln&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&Ln.push(u),u}const $e=II;function II(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===HT)&&(t=Jr),Nl(t)){const l=$o(t,e,!0);return n&&Wf(l,n),ec>0&&!i&&Ln&&(l.shapeFlag&6?Ln[Ln.indexOf(t)]=l:Ln.push(l)),l.patchFlag=-2,l}if(VI(t)&&(t=t.__vccOpts),e){e=AI(e);let{class:l,style:u}=e;l&&!Ft(l)&&(e.class=dc(l)),ct(u)&&(Mf(u)&&!be(u)&&(u=mn({},u)),e.style=gr(u))}const o=Ft(t)?1:ly(t)?128:kT(t)?64:ct(t)?4:Ne(t)?2:0;return k(t,e,n,s,r,o,i,!0)}function AI(t){return t?Mf(t)||J_(t)?mn({},t):t:null}function $o(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:u}=t,h=e?RI(r||{},e):r,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&hy(h),ref:e&&e.ref?n&&i?be(i)?i.concat(hl(e)):[i,hl(e)]:hl(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Pn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&$o(t.ssContent),ssFallback:t.ssFallback&&$o(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&s&&$f(d,u.clone(d)),d}function Pt(t=" ",e=0){return $e(mu,null,t,e)}function Hh(t,e){const n=$e(ul,null,t);return n.staticCount=e,n}function Fi(t="",e=!1){return e?(je(),TI(Jr,null,t)):$e(Jr,null,t)}function As(t){return t==null||typeof t=="boolean"?$e(Jr):be(t)?$e(Pn,null,t.slice()):Nl(t)?Fr(t):$e(mu,null,String(t))}function Fr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:$o(t)}function Wf(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(be(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Wf(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!J_(e)?e._ctx=Vn:r===3&&Vn&&(Vn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ne(e)?(e={default:e,_ctx:Vn},n=32):(e=String(e),s&64?(n=16,e=[Pt(e)]):n=8);t.children=e,t.shapeFlag|=n}function RI(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=dc([e.class,s.class]));else if(r==="style")e.style=gr([e.style,s.style]);else if(ru(r)){const i=e[r],o=s[r];o&&i!==o&&!(be(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function bs(t,e,n,s=null){Vs(t,e,7,[n,s])}const SI=Q_();let CI=0;function PI(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||SI,i={uid:CI++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new v_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ey(s,r),emitsOptions:cy(s,r),emit:null,emitted:null,propsDefaults:at,inheritAttrs:s.inheritAttrs,ctx:at,data:at,props:at,attrs:at,slots:at,refs:at,setupState:at,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=mI.bind(null,i),t.ce&&t.ce(i),i}let pn=null;const fy=()=>pn||Vn;let Dl,Wh;{const t=cu(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Dl=e("__VUE_INSTANCE_SETTERS__",n=>pn=n),Wh=e("__VUE_SSR_SETTERS__",n=>tc=n)}const _c=t=>{const e=pn;return Dl(t),t.scope.on(),()=>{t.scope.off(),Dl(e)}},Qp=()=>{pn&&pn.scope.off(),Dl(null)};function dy(t){return t.vnode.shapeFlag&4}let tc=!1;function kI(t,e=!1,n=!1){e&&Wh(e);const{props:s,children:r}=t.vnode,i=dy(t);tI(t,s,i,e),iI(t,r,n||e);const o=i?OI(t,e):void 0;return e&&Wh(!1),o}function OI(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,zT);const{setup:s}=n;if(s){ur();const r=t.setupContext=s.length>1?DI(t):null,i=_c(t),o=mc(s,t,0,[t.props,r]),l=f_(o);if(hr(),i(),(l||t.sp)&&!Ua(t)&&H_(t),l){if(o.then(Qp,Qp),e)return o.then(u=>{Yp(t,u)}).catch(u=>{hu(u,t,0)});t.asyncDep=o}else Yp(t,o)}else py(t)}function Yp(t,e,n){Ne(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ct(e)&&(t.setupState=F_(e)),py(t)}function py(t,e,n){const s=t.type;t.render||(t.render=s.render||Rs);{const r=_c(t);ur();try{GT(t)}finally{hr(),r()}}}const NI={get(t,e){return fn(t,"get",""),t[e]}};function DI(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,NI),slots:t.slots,emit:t.emit,expose:e}}function gu(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(F_(Ff(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in $a)return $a[n](t)},has(e,n){return n in e||n in $a}})):t.proxy}function xI(t,e=!0){return Ne(t)?t.displayName||t.name:t.name||e&&t.__name}function VI(t){return Ne(t)&&"__vccOpts"in t}const Zt=(t,e)=>TT(t,e,tc);function my(t,e,n){try{Ol(-1);const s=arguments.length;return s===2?ct(e)&&!be(e)?Nl(e)?$e(t,null,[e]):$e(t,e):$e(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Nl(n)&&(n=[n]),$e(t,e,n))}finally{Ol(1)}}const LI="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zh;const Xp=typeof window<"u"&&window.trustedTypes;if(Xp)try{zh=Xp.createPolicy("vue",{createHTML:t=>t})}catch{}const gy=zh?t=>zh.createHTML(t):t=>t,MI="http://www.w3.org/2000/svg",FI="http://www.w3.org/1998/Math/MathML",tr=typeof document<"u"?document:null,Jp=tr&&tr.createElement("template"),UI={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?tr.createElementNS(MI,t):e==="mathml"?tr.createElementNS(FI,t):n?tr.createElement(t,{is:n}):tr.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>tr.createTextNode(t),createComment:t=>tr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>tr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{Jp.innerHTML=gy(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const l=Jp.content;if(s==="svg"||s==="mathml"){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},$I=Symbol("_vtc");function jI(t,e,n){const s=t[$I];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Zp=Symbol("_vod"),BI=Symbol("_vsh"),qI=Symbol(""),HI=/(?:^|;)\s*display\s*:/;function WI(t,e,n){const s=t.style,r=Ft(n);let i=!1;if(n&&!r){if(e)if(Ft(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&fl(s,l,"")}else for(const o in e)n[o]==null&&fl(s,o,"");for(const o in n)o==="display"&&(i=!0),fl(s,o,n[o])}else if(r){if(e!==n){const o=s[qI];o&&(n+=";"+o),s.cssText=n,i=HI.test(n)}}else e&&t.removeAttribute("style");Zp in t&&(t[Zp]=i?s.display:"",t[BI]&&(s.display="none"))}const em=/\s*!important$/;function fl(t,e,n){if(be(n))n.forEach(s=>fl(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=zI(t,e);em.test(n)?t.setProperty(Gi(s),n.replace(em,""),"important"):t[s]=n}}const tm=["Webkit","Moz","ms"],mh={};function zI(t,e){const n=mh[e];if(n)return n;let s=Yn(e);if(s!=="filter"&&s in t)return mh[e]=s;s=au(s);for(let r=0;r<tm.length;r++){const i=tm[r]+s;if(i in t)return mh[e]=i}return e}const nm="http://www.w3.org/1999/xlink";function sm(t,e,n,s,r,i=Gb(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(nm,e.slice(6,e.length)):t.setAttributeNS(nm,e,n):n==null||i&&!g_(n)?t.removeAttribute(e):t.setAttribute(e,i?"":xs(n)?String(n):n)}function rm(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?gy(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,u=n==null?t.type==="checkbox"?"on":"":String(n);(l!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=g_(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function Di(t,e,n,s){t.addEventListener(e,n,s)}function GI(t,e,n,s){t.removeEventListener(e,n,s)}const im=Symbol("_vei");function KI(t,e,n,s,r=null){const i=t[im]||(t[im]={}),o=i[e];if(s&&o)o.value=s;else{const[l,u]=QI(e);if(s){const h=i[e]=JI(s,r);Di(t,l,h,u)}else o&&(GI(t,l,o,u),i[e]=void 0)}}const om=/(?:Once|Passive|Capture)$/;function QI(t){let e;if(om.test(t)){e={};let s;for(;s=t.match(om);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Gi(t.slice(2)),e]}let gh=0;const YI=Promise.resolve(),XI=()=>gh||(YI.then(()=>gh=0),gh=Date.now());function JI(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Vs(ZI(s,n.value),e,5,[s])};return n.value=t,n.attached=XI(),n}function ZI(t,e){if(be(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const am=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,eA=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?jI(t,s,o):e==="style"?WI(t,n,s):ru(e)?Cf(e)||KI(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):tA(t,e,s,o))?(rm(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&sm(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ft(s))?rm(t,Yn(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),sm(t,e,s,o))};function tA(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&am(e)&&Ne(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return am(e)&&Ft(n)?!1:e in t}const xl=t=>{const e=t.props["onUpdate:modelValue"]||!1;return be(e)?n=>cl(e,n):e};function nA(t){t.target.composing=!0}function cm(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Do=Symbol("_assign"),xo={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[Do]=xl(r);const i=s||r.props&&r.props.type==="number";Di(t,e?"change":"input",o=>{if(o.target.composing)return;let l=t.value;n&&(l=l.trim()),i&&(l=Tl(l)),t[Do](l)}),n&&Di(t,"change",()=>{t.value=t.value.trim()}),e||(Di(t,"compositionstart",nA),Di(t,"compositionend",cm),Di(t,"change",cm))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[Do]=xl(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?Tl(t.value):t.value,u=e??"";l!==u&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===u)||(t.value=u))}},Gh={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const r=iu(e);Di(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Tl(Vl(o)):Vl(o));t[Do](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,fu(()=>{t._assigning=!1})}),t[Do]=xl(s)},mounted(t,{value:e}){lm(t,e)},beforeUpdate(t,e,n){t[Do]=xl(n)},updated(t,{value:e}){t._assigning||lm(t,e)}};function lm(t,e){const n=t.multiple,s=be(e);if(!(n&&!s&&!iu(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],l=Vl(o);if(n)if(s){const u=typeof l;u==="string"||u==="number"?o.selected=e.some(h=>String(h)===String(l)):o.selected=Qb(e,l)>-1}else o.selected=e.has(l);else if(lu(Vl(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Vl(t){return"_value"in t?t._value:t.value}const sA=["ctrl","shift","alt","meta"],rA={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>sA.some(n=>t[`${n}Key`]&&!e.includes(n))},zf=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const l=rA[e[o]];if(l&&l(r,e))return}return t(r,...i)})},iA=mn({patchProp:eA},UI);let um;function oA(){return um||(um=aI(iA))}const aA=(...t)=>{const e=oA().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=lA(s);if(!r)return;const i=e._component;!Ne(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,cA(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function cA(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function lA(t){return Ft(t)?document.querySelector(t):t}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let _y;const _u=t=>_y=t,yy=Symbol();function Kh(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Ba;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Ba||(Ba={}));function uA(){const t=E_(!0),e=t.run(()=>_t({}));let n=[],s=[];const r=Ff({install(i){_u(r),r._a=i,i.provide(yy,r),i.config.globalProperties.$pinia=r,s.forEach(o=>n.push(o)),s=[]},use(i){return this._a?n.push(i):s.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return r}const vy=()=>{};function hm(t,e,n,s=vy){t.push(e);const r=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),s())};return!n&&w_()&&Yb(r),r}function wo(t,...e){t.slice().forEach(n=>{n(...e)})}const hA=t=>t(),fm=Symbol(),_h=Symbol();function Qh(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,s)=>t.set(s,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const s=e[n],r=t[n];Kh(r)&&Kh(s)&&t.hasOwnProperty(n)&&!kt(s)&&!zr(s)?t[n]=Qh(r,s):t[n]=s}return t}const fA=Symbol();function dA(t){return!Kh(t)||!t.hasOwnProperty(fA)}const{assign:Lr}=Object;function pA(t){return!!(kt(t)&&t.effect)}function mA(t,e,n,s){const{state:r,actions:i,getters:o}=e,l=n.state.value[t];let u;function h(){l||(n.state.value[t]=r?r():{});const d=vT(n.state.value[t]);return Lr(d,i,Object.keys(o||{}).reduce((m,y)=>(m[y]=Ff(Zt(()=>{_u(n);const w=n._s.get(t);return o[y].call(w,w)})),m),{}))}return u=Ey(t,h,e,n,s,!0),u}function Ey(t,e,n={},s,r,i){let o;const l=Lr({actions:{}},n),u={deep:!0};let h,d,m=[],y=[],w;const L=s.state.value[t];!i&&!L&&(s.state.value[t]={}),_t({});let M;function U(b){let T;h=d=!1,typeof b=="function"?(b(s.state.value[t]),T={type:Ba.patchFunction,storeId:t,events:w}):(Qh(s.state.value[t],b),T={type:Ba.patchObject,payload:b,storeId:t,events:w});const P=M=Symbol();fu().then(()=>{M===P&&(h=!0)}),d=!0,wo(m,T,s.state.value[t])}const Y=i?function(){const{state:T}=n,P=T?T():{};this.$patch(C=>{Lr(C,P)})}:vy;function K(){o.stop(),m=[],y=[],s._s.delete(t)}const X=(b,T="")=>{if(fm in b)return b[_h]=T,b;const P=function(){_u(s);const C=Array.from(arguments),x=[],A=[];function pt(Te){x.push(Te)}function Ut(Te){A.push(Te)}wo(y,{args:C,name:P[_h],store:de,after:pt,onError:Ut});let et;try{et=b.apply(this&&this.$id===t?this:de,C)}catch(Te){throw wo(A,Te),Te}return et instanceof Promise?et.then(Te=>(wo(x,Te),Te)).catch(Te=>(wo(A,Te),Promise.reject(Te))):(wo(x,et),et)};return P[fm]=!0,P[_h]=T,P},ne={_p:s,$id:t,$onAction:hm.bind(null,y),$patch:U,$reset:Y,$subscribe(b,T={}){const P=hm(m,b,T.detached,()=>C()),C=o.run(()=>No(()=>s.state.value[t],x=>{(T.flush==="sync"?d:h)&&b({storeId:t,type:Ba.direct,events:w},x)},Lr({},u,T)));return P},$dispose:K},de=pc(ne);s._s.set(t,de);const S=(s._a&&s._a.runWithContext||hA)(()=>s._e.run(()=>(o=E_()).run(()=>e({action:X}))));for(const b in S){const T=S[b];if(kt(T)&&!pA(T)||zr(T))i||(L&&dA(T)&&(kt(T)?T.value=L[b]:Qh(T,L[b])),s.state.value[t][b]=T);else if(typeof T=="function"){const P=X(T,b);S[b]=P,l.actions[b]=T}}return Lr(de,S),Lr(Qe(de),S),Object.defineProperty(de,"$state",{get:()=>s.state.value[t],set:b=>{U(T=>{Lr(T,b)})}}),s._p.forEach(b=>{Lr(de,o.run(()=>b({store:de,app:s._a,pinia:s,options:l})))}),L&&i&&n.hydrate&&n.hydrate(de.$state,L),h=!0,d=!0,de}/*! #__NO_SIDE_EFFECTS__ */function Gf(t,e,n){let s,r;const i=typeof e=="function";typeof t=="string"?(s=t,r=i?n:e):(r=t,s=t.id);function o(l,u){const h=eI();return l=l||(h?Qn(yy,null):null),l&&_u(l),l=_y,l._s.has(s)||(i?Ey(s,e,r,l):mA(s,r,l)),l._s.get(s)}return o.$id=s,o}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const To=typeof document<"u";function wy(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function gA(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&wy(t.default)}const Xe=Object.assign;function yh(t,e){const n={};for(const s in e){const r=e[s];n[s]=as(r)?r.map(t):t(r)}return n}const qa=()=>{},as=Array.isArray;function dm(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const by=/#/g,_A=/&/g,yA=/\//g,vA=/=/g,EA=/\?/g,Ty=/\+/g,wA=/%5B/g,bA=/%5D/g,Iy=/%5E/g,TA=/%60/g,Ay=/%7B/g,IA=/%7C/g,Ry=/%7D/g,AA=/%20/g;function Kf(t){return t==null?"":encodeURI(""+t).replace(IA,"|").replace(wA,"[").replace(bA,"]")}function RA(t){return Kf(t).replace(Ay,"{").replace(Ry,"}").replace(Iy,"^")}function Yh(t){return Kf(t).replace(Ty,"%2B").replace(AA,"+").replace(by,"%23").replace(_A,"%26").replace(TA,"`").replace(Ay,"{").replace(Ry,"}").replace(Iy,"^")}function SA(t){return Yh(t).replace(vA,"%3D")}function CA(t){return Kf(t).replace(by,"%23").replace(EA,"%3F")}function PA(t){return CA(t).replace(yA,"%2F")}function nc(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const kA=/\/$/,OA=t=>t.replace(kA,"");function vh(t,e,n="/"){let s,r={},i="",o="";const l=e.indexOf("#");let u=e.indexOf("?");return u=l>=0&&u>l?-1:u,u>=0&&(s=e.slice(0,u),i=e.slice(u,l>0?l:e.length),r=t(i.slice(1))),l>=0&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=VA(s??e,n),{fullPath:s+i+o,path:s,query:r,hash:nc(o)}}function NA(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function pm(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function DA(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&jo(e.matched[s],n.matched[r])&&Sy(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function jo(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Sy(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!xA(t[n],e[n]))return!1;return!0}function xA(t,e){return as(t)?mm(t,e):as(e)?mm(e,t):t===e}function mm(t,e){return as(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function VA(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const xr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Xh=function(t){return t.pop="pop",t.push="push",t}({}),Eh=function(t){return t.back="back",t.forward="forward",t.unknown="",t}({});function LA(t){if(!t)if(To){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),OA(t)}const MA=/^[^#]+#/;function FA(t,e){return t.replace(MA,"#")+e}function UA(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const yu=()=>({left:window.scrollX,top:window.scrollY});function $A(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=UA(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function gm(t,e){return(history.state?history.state.position-e:-1)+t}const Jh=new Map;function jA(t,e){Jh.set(t,e)}function BA(t){const e=Jh.get(t);return Jh.delete(t),e}function qA(t){return typeof t=="string"||t&&typeof t=="object"}function Cy(t){return typeof t=="string"||typeof t=="symbol"}let bt=function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t}({});const Py=Symbol("");bt.MATCHER_NOT_FOUND+"",bt.NAVIGATION_GUARD_REDIRECT+"",bt.NAVIGATION_ABORTED+"",bt.NAVIGATION_CANCELLED+"",bt.NAVIGATION_DUPLICATED+"";function Bo(t,e){return Xe(new Error,{type:t,[Py]:!0},e)}function er(t,e){return t instanceof Error&&Py in t&&(e==null||!!(t.type&e))}const HA=["params","query","hash"];function WA(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of HA)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function zA(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(Ty," "),i=r.indexOf("="),o=nc(i<0?r:r.slice(0,i)),l=i<0?null:nc(r.slice(i+1));if(o in e){let u=e[o];as(u)||(u=e[o]=[u]),u.push(l)}else e[o]=l}return e}function _m(t){let e="";for(let n in t){const s=t[n];if(n=SA(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(as(s)?s.map(r=>r&&Yh(r)):[s&&Yh(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function GA(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=as(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const KA=Symbol(""),ym=Symbol(""),vu=Symbol(""),Qf=Symbol(""),Zh=Symbol("");function Sa(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Ur(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((l,u)=>{const h=y=>{y===!1?u(Bo(bt.NAVIGATION_ABORTED,{from:n,to:e})):y instanceof Error?u(y):qA(y)?u(Bo(bt.NAVIGATION_GUARD_REDIRECT,{from:e,to:y})):(o&&s.enterCallbacks[r]===o&&typeof y=="function"&&o.push(y),l())},d=i(()=>t.call(s&&s.instances[r],e,n,h));let m=Promise.resolve(d);t.length<3&&(m=m.then(h)),m.catch(y=>u(y))})}function wh(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const l in o.components){let u=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(wy(u)){const h=(u.__vccOpts||u)[e];h&&i.push(Ur(h,n,s,o,l,r))}else{let h=u();i.push(()=>h.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const m=gA(d)?d.default:d;o.mods[l]=d,o.components[l]=m;const y=(m.__vccOpts||m)[e];return y&&Ur(y,n,s,o,l,r)()}))}}return i}function QA(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(h=>jo(h,l))?s.push(l):n.push(l));const u=t.matched[o];u&&(e.matched.find(h=>jo(h,u))||r.push(u))}return[n,s,r]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let YA=()=>location.protocol+"//"+location.host;function ky(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(o);return l[0]!=="/"&&(l="/"+l),pm(l,"")}return pm(n,t)+s+r}function XA(t,e,n,s){let r=[],i=[],o=null;const l=({state:y})=>{const w=ky(t,location),L=n.value,M=e.value;let U=0;if(y){if(n.value=w,e.value=y,o&&o===L){o=null;return}U=M?y.position-M.position:0}else s(w);r.forEach(Y=>{Y(n.value,L,{delta:U,type:Xh.pop,direction:U?U>0?Eh.forward:Eh.back:Eh.unknown})})};function u(){o=n.value}function h(y){r.push(y);const w=()=>{const L=r.indexOf(y);L>-1&&r.splice(L,1)};return i.push(w),w}function d(){if(document.visibilityState==="hidden"){const{history:y}=window;if(!y.state)return;y.replaceState(Xe({},y.state,{scroll:yu()}),"")}}function m(){for(const y of i)y();i=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:u,listen:h,destroy:m}}function vm(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?yu():null}}function JA(t){const{history:e,location:n}=window,s={value:ky(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(u,h,d){const m=t.indexOf("#"),y=m>-1?(n.host&&document.querySelector("base")?t:t.slice(m))+u:YA()+t+u;try{e[d?"replaceState":"pushState"](h,"",y),r.value=h}catch(w){console.error(w),n[d?"replace":"assign"](y)}}function o(u,h){i(u,Xe({},e.state,vm(r.value.back,u,r.value.forward,!0),h,{position:r.value.position}),!0),s.value=u}function l(u,h){const d=Xe({},r.value,e.state,{forward:u,scroll:yu()});i(d.current,d,!0),i(u,Xe({},vm(s.value,u,null),{position:d.position+1},h),!1),s.value=u}return{location:s,state:r,push:l,replace:o}}function ZA(t){t=LA(t);const e=JA(t),n=XA(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Xe({location:"",base:t,go:s,createHref:FA.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}let xi=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t}({});var Bt=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t}(Bt||{});const eR={type:xi.Static,value:""},tR=/[a-zA-Z0-9_]/;function nR(t){if(!t)return[[]];if(t==="/")return[[eR]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(w){throw new Error(`ERR (${n})/"${h}": ${w}`)}let n=Bt.Static,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let l=0,u,h="",d="";function m(){h&&(n===Bt.Static?i.push({type:xi.Static,value:h}):n===Bt.Param||n===Bt.ParamRegExp||n===Bt.ParamRegExpEnd?(i.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),i.push({type:xi.Param,value:h,regexp:d,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),h="")}function y(){h+=u}for(;l<t.length;){if(u=t[l++],u==="\\"&&n!==Bt.ParamRegExp){s=n,n=Bt.EscapeNext;continue}switch(n){case Bt.Static:u==="/"?(h&&m(),o()):u===":"?(m(),n=Bt.Param):y();break;case Bt.EscapeNext:y(),n=s;break;case Bt.Param:u==="("?n=Bt.ParamRegExp:tR.test(u)?y():(m(),n=Bt.Static,u!=="*"&&u!=="?"&&u!=="+"&&l--);break;case Bt.ParamRegExp:u===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+u:n=Bt.ParamRegExpEnd:d+=u;break;case Bt.ParamRegExpEnd:m(),n=Bt.Static,u!=="*"&&u!=="?"&&u!=="+"&&l--,d="";break;default:e("Unknown state");break}}return n===Bt.ParamRegExp&&e(`Unfinished custom RegExp for param "${h}"`),m(),o(),r}const Em="[^/]+?",sR={sensitive:!1,strict:!1,start:!0,end:!0};var Tn=function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t}(Tn||{});const rR=/[.+*?^${}()[\]/\\]/g;function iR(t,e){const n=Xe({},sR,e),s=[];let r=n.start?"^":"";const i=[];for(const h of t){const d=h.length?[]:[Tn.Root];n.strict&&!h.length&&(r+="/");for(let m=0;m<h.length;m++){const y=h[m];let w=Tn.Segment+(n.sensitive?Tn.BonusCaseSensitive:0);if(y.type===xi.Static)m||(r+="/"),r+=y.value.replace(rR,"\\$&"),w+=Tn.Static;else if(y.type===xi.Param){const{value:L,repeatable:M,optional:U,regexp:Y}=y;i.push({name:L,repeatable:M,optional:U});const K=Y||Em;if(K!==Em){w+=Tn.BonusCustomRegExp;try{`${K}`}catch(ne){throw new Error(`Invalid custom RegExp for param "${L}" (${K}): `+ne.message)}}let X=M?`((?:${K})(?:/(?:${K}))*)`:`(${K})`;m||(X=U&&h.length<2?`(?:/${X})`:"/"+X),U&&(X+="?"),r+=X,w+=Tn.Dynamic,U&&(w+=Tn.BonusOptional),M&&(w+=Tn.BonusRepeatable),K===".*"&&(w+=Tn.BonusWildcard)}d.push(w)}s.push(d)}if(n.strict&&n.end){const h=s.length-1;s[h][s[h].length-1]+=Tn.BonusStrict}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(h){const d=h.match(o),m={};if(!d)return null;for(let y=1;y<d.length;y++){const w=d[y]||"",L=i[y-1];m[L.name]=w&&L.repeatable?w.split("/"):w}return m}function u(h){let d="",m=!1;for(const y of t){(!m||!d.endsWith("/"))&&(d+="/"),m=!1;for(const w of y)if(w.type===xi.Static)d+=w.value;else if(w.type===xi.Param){const{value:L,repeatable:M,optional:U}=w,Y=L in h?h[L]:"";if(as(Y)&&!M)throw new Error(`Provided param "${L}" is an array but it is not repeatable (* or + modifiers)`);const K=as(Y)?Y.join("/"):Y;if(!K)if(U)y.length<2&&(d.endsWith("/")?d=d.slice(0,-1):m=!0);else throw new Error(`Missing required param "${L}"`);d+=K}}return d||"/"}return{re:o,score:s,keys:i,parse:l,stringify:u}}function oR(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===Tn.Static+Tn.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Tn.Static+Tn.Segment?1:-1:0}function Oy(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=oR(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(wm(s))return 1;if(wm(r))return-1}return r.length-s.length}function wm(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const aR={strict:!1,end:!0,sensitive:!1};function cR(t,e,n){const s=iR(nR(t.path),n),r=Xe(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function lR(t,e){const n=[],s=new Map;e=dm(aR,e);function r(m){return s.get(m)}function i(m,y,w){const L=!w,M=Tm(m);M.aliasOf=w&&w.record;const U=dm(e,m),Y=[M];if("alias"in m){const ne=typeof m.alias=="string"?[m.alias]:m.alias;for(const de of ne)Y.push(Tm(Xe({},M,{components:w?w.record.components:M.components,path:de,aliasOf:w?w.record:M})))}let K,X;for(const ne of Y){const{path:de}=ne;if(y&&de[0]!=="/"){const Se=y.record.path,S=Se[Se.length-1]==="/"?"":"/";ne.path=y.record.path+(de&&S+de)}if(K=cR(ne,y,U),w?w.alias.push(K):(X=X||K,X!==K&&X.alias.push(K),L&&m.name&&!Im(K)&&o(m.name)),Ny(K)&&u(K),M.children){const Se=M.children;for(let S=0;S<Se.length;S++)i(Se[S],K,w&&w.children[S])}w=w||K}return X?()=>{o(X)}:qa}function o(m){if(Cy(m)){const y=s.get(m);y&&(s.delete(m),n.splice(n.indexOf(y),1),y.children.forEach(o),y.alias.forEach(o))}else{const y=n.indexOf(m);y>-1&&(n.splice(y,1),m.record.name&&s.delete(m.record.name),m.children.forEach(o),m.alias.forEach(o))}}function l(){return n}function u(m){const y=fR(m,n);n.splice(y,0,m),m.record.name&&!Im(m)&&s.set(m.record.name,m)}function h(m,y){let w,L={},M,U;if("name"in m&&m.name){if(w=s.get(m.name),!w)throw Bo(bt.MATCHER_NOT_FOUND,{location:m});U=w.record.name,L=Xe(bm(y.params,w.keys.filter(X=>!X.optional).concat(w.parent?w.parent.keys.filter(X=>X.optional):[]).map(X=>X.name)),m.params&&bm(m.params,w.keys.map(X=>X.name))),M=w.stringify(L)}else if(m.path!=null)M=m.path,w=n.find(X=>X.re.test(M)),w&&(L=w.parse(M),U=w.record.name);else{if(w=y.name?s.get(y.name):n.find(X=>X.re.test(y.path)),!w)throw Bo(bt.MATCHER_NOT_FOUND,{location:m,currentLocation:y});U=w.record.name,L=Xe({},y.params,m.params),M=w.stringify(L)}const Y=[];let K=w;for(;K;)Y.unshift(K.record),K=K.parent;return{name:U,path:M,params:L,matched:Y,meta:hR(Y)}}t.forEach(m=>i(m));function d(){n.length=0,s.clear()}return{addRoute:i,resolve:h,removeRoute:o,clearRoutes:d,getRoutes:l,getRecordMatcher:r}}function bm(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function Tm(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:uR(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function uR(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function Im(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function hR(t){return t.reduce((e,n)=>Xe(e,n.meta),{})}function fR(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;Oy(t,e[i])<0?s=i:n=i+1}const r=dR(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function dR(t){let e=t;for(;e=e.parent;)if(Ny(e)&&Oy(t,e)===0)return e}function Ny({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Am(t){const e=Qn(vu),n=Qn(Qf),s=Zt(()=>{const u=ft(t.to);return e.resolve(u)}),r=Zt(()=>{const{matched:u}=s.value,{length:h}=u,d=u[h-1],m=n.matched;if(!d||!m.length)return-1;const y=m.findIndex(jo.bind(null,d));if(y>-1)return y;const w=Rm(u[h-2]);return h>1&&Rm(d)===w&&m[m.length-1].path!==w?m.findIndex(jo.bind(null,u[h-2])):y}),i=Zt(()=>r.value>-1&&yR(n.params,s.value.params)),o=Zt(()=>r.value>-1&&r.value===n.matched.length-1&&Sy(n.params,s.value.params));function l(u={}){if(_R(u)){const h=e[ft(t.replace)?"replace":"push"](ft(t.to)).catch(qa);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:s,href:Zt(()=>s.value.href),isActive:i,isExactActive:o,navigate:l}}function pR(t){return t.length===1?t[0]:t}const mR=jf({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Am,setup(t,{slots:e}){const n=pc(Am(t)),{options:s}=Qn(vu),r=Zt(()=>({[Sm(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Sm(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&pR(e.default(n));return t.custom?i:my("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),gR=mR;function _R(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function yR(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!as(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Rm(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Sm=(t,e,n)=>t??e??n,vR=jf({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Qn(Zh),r=Zt(()=>t.route||s.value),i=Qn(ym,0),o=Zt(()=>{let h=ft(i);const{matched:d}=r.value;let m;for(;(m=d[h])&&!m.components;)h++;return h}),l=Zt(()=>r.value.matched[o.value]);ll(ym,Zt(()=>o.value+1)),ll(KA,l),ll(Zh,r);const u=_t();return No(()=>[u.value,l.value,t.name],([h,d,m],[y,w,L])=>{d&&(d.instances[m]=h,w&&w!==d&&h&&h===y&&(d.leaveGuards.size||(d.leaveGuards=w.leaveGuards),d.updateGuards.size||(d.updateGuards=w.updateGuards))),h&&d&&(!w||!jo(d,w)||!y)&&(d.enterCallbacks[m]||[]).forEach(M=>M(h))},{flush:"post"}),()=>{const h=r.value,d=t.name,m=l.value,y=m&&m.components[d];if(!y)return Cm(n.default,{Component:y,route:h});const w=m.props[d],L=w?w===!0?h.params:typeof w=="function"?w(h):w:null,U=my(y,Xe({},L,e,{onVnodeUnmounted:Y=>{Y.component.isUnmounted&&(m.instances[d]=null)},ref:u}));return Cm(n.default,{Component:U,route:h})||U}}});function Cm(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const ER=vR;function wR(t){const e=lR(t.routes,t),n=t.parseQuery||zA,s=t.stringifyQuery||_m,r=t.history,i=Sa(),o=Sa(),l=Sa(),u=gT(xr);let h=xr;To&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=yh.bind(null,B=>""+B),m=yh.bind(null,PA),y=yh.bind(null,nc);function w(B,ae){let j,pe;return Cy(B)?(j=e.getRecordMatcher(B),pe=ae):pe=B,e.addRoute(pe,j)}function L(B){const ae=e.getRecordMatcher(B);ae&&e.removeRoute(ae)}function M(){return e.getRoutes().map(B=>B.record)}function U(B){return!!e.getRecordMatcher(B)}function Y(B,ae){if(ae=Xe({},ae||u.value),typeof B=="string"){const D=vh(n,B,ae.path),H=e.resolve({path:D.path},ae),W=r.createHref(D.fullPath);return Xe(D,H,{params:y(H.params),hash:nc(D.hash),redirectedFrom:void 0,href:W})}let j;if(B.path!=null)j=Xe({},B,{path:vh(n,B.path,ae.path).path});else{const D=Xe({},B.params);for(const H in D)D[H]==null&&delete D[H];j=Xe({},B,{params:m(D)}),ae.params=m(ae.params)}const pe=e.resolve(j,ae),Le=B.hash||"";pe.params=d(y(pe.params));const I=NA(s,Xe({},B,{hash:RA(Le),path:pe.path})),R=r.createHref(I);return Xe({fullPath:I,hash:Le,query:s===_m?GA(B.query):B.query||{}},pe,{redirectedFrom:void 0,href:R})}function K(B){return typeof B=="string"?vh(n,B,u.value.path):Xe({},B)}function X(B,ae){if(h!==B)return Bo(bt.NAVIGATION_CANCELLED,{from:ae,to:B})}function ne(B){return S(B)}function de(B){return ne(Xe(K(B),{replace:!0}))}function Se(B,ae){const j=B.matched[B.matched.length-1];if(j&&j.redirect){const{redirect:pe}=j;let Le=typeof pe=="function"?pe(B,ae):pe;return typeof Le=="string"&&(Le=Le.includes("?")||Le.includes("#")?Le=K(Le):{path:Le},Le.params={}),Xe({query:B.query,hash:B.hash,params:Le.path!=null?{}:B.params},Le)}}function S(B,ae){const j=h=Y(B),pe=u.value,Le=B.state,I=B.force,R=B.replace===!0,D=Se(j,pe);if(D)return S(Xe(K(D),{state:typeof D=="object"?Xe({},Le,D.state):Le,force:I,replace:R}),ae||j);const H=j;H.redirectedFrom=ae;let W;return!I&&DA(s,pe,j)&&(W=Bo(bt.NAVIGATION_DUPLICATED,{to:H,from:pe}),z(pe,pe,!0,!1)),(W?Promise.resolve(W):P(H,pe)).catch(q=>er(q)?er(q,bt.NAVIGATION_GUARD_REDIRECT)?q:kn(q):Ve(q,H,pe)).then(q=>{if(q){if(er(q,bt.NAVIGATION_GUARD_REDIRECT))return S(Xe({replace:R},K(q.to),{state:typeof q.to=="object"?Xe({},Le,q.to.state):Le,force:I}),ae||H)}else q=x(H,pe,!0,R,Le);return C(H,pe,q),q})}function b(B,ae){const j=X(B,ae);return j?Promise.reject(j):Promise.resolve()}function T(B){const ae=yn.values().next().value;return ae&&typeof ae.runWithContext=="function"?ae.runWithContext(B):B()}function P(B,ae){let j;const[pe,Le,I]=QA(B,ae);j=wh(pe.reverse(),"beforeRouteLeave",B,ae);for(const D of pe)D.leaveGuards.forEach(H=>{j.push(Ur(H,B,ae))});const R=b.bind(null,B,ae);return j.push(R),vt(j).then(()=>{j=[];for(const D of i.list())j.push(Ur(D,B,ae));return j.push(R),vt(j)}).then(()=>{j=wh(Le,"beforeRouteUpdate",B,ae);for(const D of Le)D.updateGuards.forEach(H=>{j.push(Ur(H,B,ae))});return j.push(R),vt(j)}).then(()=>{j=[];for(const D of I)if(D.beforeEnter)if(as(D.beforeEnter))for(const H of D.beforeEnter)j.push(Ur(H,B,ae));else j.push(Ur(D.beforeEnter,B,ae));return j.push(R),vt(j)}).then(()=>(B.matched.forEach(D=>D.enterCallbacks={}),j=wh(I,"beforeRouteEnter",B,ae,T),j.push(R),vt(j))).then(()=>{j=[];for(const D of o.list())j.push(Ur(D,B,ae));return j.push(R),vt(j)}).catch(D=>er(D,bt.NAVIGATION_CANCELLED)?D:Promise.reject(D))}function C(B,ae,j){l.list().forEach(pe=>T(()=>pe(B,ae,j)))}function x(B,ae,j,pe,Le){const I=X(B,ae);if(I)return I;const R=ae===xr,D=To?history.state:{};j&&(pe||R?r.replace(B.fullPath,Xe({scroll:R&&D&&D.scroll},Le)):r.push(B.fullPath,Le)),u.value=B,z(B,ae,j,R),kn()}let A;function pt(){A||(A=r.listen((B,ae,j)=>{if(!It.listening)return;const pe=Y(B),Le=Se(pe,It.currentRoute.value);if(Le){S(Xe(Le,{replace:!0,force:!0}),pe).catch(qa);return}h=pe;const I=u.value;To&&jA(gm(I.fullPath,j.delta),yu()),P(pe,I).catch(R=>er(R,bt.NAVIGATION_ABORTED|bt.NAVIGATION_CANCELLED)?R:er(R,bt.NAVIGATION_GUARD_REDIRECT)?(S(Xe(K(R.to),{force:!0}),pe).then(D=>{er(D,bt.NAVIGATION_ABORTED|bt.NAVIGATION_DUPLICATED)&&!j.delta&&j.type===Xh.pop&&r.go(-1,!1)}).catch(qa),Promise.reject()):(j.delta&&r.go(-j.delta,!1),Ve(R,pe,I))).then(R=>{R=R||x(pe,I,!1),R&&(j.delta&&!er(R,bt.NAVIGATION_CANCELLED)?r.go(-j.delta,!1):j.type===Xh.pop&&er(R,bt.NAVIGATION_ABORTED|bt.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),C(pe,I,R)}).catch(qa)}))}let Ut=Sa(),et=Sa(),Te;function Ve(B,ae,j){kn(B);const pe=et.list();return pe.length?pe.forEach(Le=>Le(B,ae,j)):console.error(B),Promise.reject(B)}function nn(){return Te&&u.value!==xr?Promise.resolve():new Promise((B,ae)=>{Ut.add([B,ae])})}function kn(B){return Te||(Te=!B,pt(),Ut.list().forEach(([ae,j])=>B?j(B):ae()),Ut.reset()),B}function z(B,ae,j,pe){const{scrollBehavior:Le}=t;if(!To||!Le)return Promise.resolve();const I=!j&&BA(gm(B.fullPath,0))||(pe||!j)&&history.state&&history.state.scroll||null;return fu().then(()=>Le(B,ae,I)).then(R=>R&&$A(R)).catch(R=>Ve(R,B,ae))}const Tt=B=>r.go(B);let Mn;const yn=new Set,It={currentRoute:u,listening:!0,addRoute:w,removeRoute:L,clearRoutes:e.clearRoutes,hasRoute:U,getRoutes:M,resolve:Y,options:t,push:ne,replace:de,go:Tt,back:()=>Tt(-1),forward:()=>Tt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:et.add,isReady:nn,install(B){B.component("RouterLink",gR),B.component("RouterView",ER),B.config.globalProperties.$router=It,Object.defineProperty(B.config.globalProperties,"$route",{enumerable:!0,get:()=>ft(u)}),To&&!Mn&&u.value===xr&&(Mn=!0,ne(r.location).catch(pe=>{}));const ae={};for(const pe in xr)Object.defineProperty(ae,pe,{get:()=>u.value[pe],enumerable:!0});B.provide(vu,It),B.provide(Qf,L_(ae)),B.provide(Zh,u);const j=B.unmount;yn.add(B),B.unmount=function(){yn.delete(B),yn.size<1&&(h=xr,A&&A(),A=null,u.value=xr,Mn=!1,Te=!1),j()}}};function vt(B){return B.reduce((ae,j)=>ae.then(()=>T(j)),Promise.resolve())}return It}function Qo(){return Qn(vu)}function Yx(t){return Qn(Qf)}const Eu=Gf("cart",{state:()=>({cartItems:[]}),getters:{cartCount:t=>t.cartItems.reduce((e,n)=>e+n.quantity,0),cartTotal:t=>t.cartItems.reduce((e,n)=>e+n.price*n.quantity,0)},actions:{addToCart(t){const e=this.cartItems.find(n=>n.id===t.id);e?e.quantity++:this.cartItems.push({...t,quantity:1}),this.saveCart()},removeFromCart(t){this.cartItems=this.cartItems.filter(e=>e.id!==t),this.saveCart()},updateQuantity(t,e){const n=this.cartItems.find(s=>s.id===t);n&&(n.quantity=e,this.saveCart())},clearCart(){this.cartItems=[],this.saveCart()},saveCart(){localStorage.setItem("stillup_cart",JSON.stringify(this.cartItems))},loadCart(){const t=localStorage.getItem("stillup_cart");t&&(this.cartItems=JSON.parse(t))}}}),bR=()=>{};var Pm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},TR=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],l=t[n++],u=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},xy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,l=o?t[r+1]:0,u=r+2<t.length,h=u?t[r+2]:0,d=i>>2,m=(i&3)<<4|l>>4;let y=(l&15)<<2|h>>6,w=h&63;u||(w=64,o||(y=64)),s.push(n[d],n[m],n[y],n[w])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Dy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const m=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||h==null||m==null)throw new IR;const y=i<<2|l>>4;if(s.push(y),h!==64){const w=l<<4&240|h>>2;if(s.push(w),m!==64){const L=h<<6&192|m;s.push(L)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class IR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AR=function(t){const e=Dy(t);return xy.encodeByteArray(e,!0)},Ll=function(t){return AR(t).replace(/\./g,"")},Vy=function(t){try{return xy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=()=>RR().__FIREBASE_DEFAULTS__,CR=()=>{if(typeof process>"u"||typeof Pm>"u")return;const t=Pm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},PR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Vy(t[1]);return e&&JSON.parse(e)},wu=()=>{try{return bR()||SR()||CR()||PR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ly=t=>{var e,n;return(n=(e=wu())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},My=t=>{const e=Ly(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Fy=()=>{var t;return(t=wu())==null?void 0:t.config},Uy=t=>{var e;return(e=wu())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Yf(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ll(JSON.stringify(n)),Ll(JSON.stringify(o)),""].join(".")}const Ha={};function OR(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ha))Ha[e]?t.emulator.push(e):t.prod.push(e);return t}function NR(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let km=!1;function Xf(t,e){if(typeof window>"u"||typeof document>"u"||!Qi(window.location.host)||Ha[t]===e||Ha[t]||km)return;Ha[t]=e;function n(y){return`__firebase__banner__${y}`}const s="__firebase__banner",i=OR().prod.length>0;function o(){const y=document.getElementById(s);y&&y.remove()}function l(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function u(y,w){y.setAttribute("width","24"),y.setAttribute("id",w),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function h(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{km=!0,o()},y}function d(y,w){y.setAttribute("id",w),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function m(){const y=NR(s),w=n("text"),L=document.getElementById(w)||document.createElement("span"),M=n("learnmore"),U=document.getElementById(M)||document.createElement("a"),Y=n("preprendIcon"),K=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const X=y.element;l(X),d(U,M);const ne=h();u(K,Y),X.append(K,L,U,ne),document.body.appendChild(X)}i?(L.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function xR(){var e;const t=(e=wu())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function MR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FR(){const t=gn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function UR(){return!xR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $R(){try{return typeof indexedDB=="object"}catch{return!1}}function jR(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="FirebaseError";class Fs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=BR,Object.setPrototypeOf(this,Fs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yc.prototype.create)}}class yc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?qR(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new Fs(r,l,s)}}function qR(t,e){return t.replace(HR,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const HR=/\{\$([^}]+)}/g;function WR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $i(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Om(i)&&Om(o)){if(!$i(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Om(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Pa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function ka(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function zR(t,e){const n=new GR(t,e);return n.subscribe.bind(n)}class GR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");KR(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=bh),r.error===void 0&&(r.error=bh),r.complete===void 0&&(r.complete=bh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function bh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t){return t&&t._delegate?t._delegate:t}class Zr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new kR;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XR(e))try{this.getOrInitializeService({instanceIdentifier:Ni})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Ni){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ni){return this.instances.has(e)}getOptions(e=Ni){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:YR(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ni){return this.component?this.component.multipleInstances?e:Ni:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YR(t){return t===Ni?void 0:t}function XR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new QR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Fe||(Fe={}));const ZR={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},eS=Fe.INFO,tS={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},nS=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=tS[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jf{constructor(e){this.name=e,this._logLevel=eS,this._logHandler=nS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const sS=(t,e)=>e.some(n=>t instanceof n);let Nm,Dm;function rS(){return Nm||(Nm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iS(){return Dm||(Dm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jy=new WeakMap,ef=new WeakMap,By=new WeakMap,Th=new WeakMap,Zf=new WeakMap;function oS(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Gr(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&jy.set(n,t)}).catch(()=>{}),Zf.set(e,t),e}function aS(t){if(ef.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ef.set(t,e)}let tf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ef.get(t);if(e==="objectStoreNames")return t.objectStoreNames||By.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cS(t){tf=t(tf)}function lS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Ih(this),e,...n);return By.set(s,e.sort?e.sort():[e]),Gr(s)}:iS().includes(t)?function(...e){return t.apply(Ih(this),e),Gr(jy.get(this))}:function(...e){return Gr(t.apply(Ih(this),e))}}function uS(t){return typeof t=="function"?lS(t):(t instanceof IDBTransaction&&aS(t),sS(t,rS())?new Proxy(t,tf):t)}function Gr(t){if(t instanceof IDBRequest)return oS(t);if(Th.has(t))return Th.get(t);const e=uS(t);return e!==t&&(Th.set(t,e),Zf.set(e,t)),e}const Ih=t=>Zf.get(t);function hS(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),l=Gr(o);return s&&o.addEventListener("upgradeneeded",u=>{s(Gr(o.result),u.oldVersion,u.newVersion,Gr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const fS=["get","getKey","getAll","getAllKeys","count"],dS=["put","add","delete","clear"],Ah=new Map;function xm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ah.get(e))return Ah.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=dS.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||fS.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,r?"readwrite":"readonly");let h=u.store;return s&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&u.done]))[0]};return Ah.set(e,i),i}cS(t=>({...t,get:(e,n,s)=>xm(e,n)||t.get(e,n,s),has:(e,n)=>!!xm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mS(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function mS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nf="@firebase/app",Vm="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr=new Jf("@firebase/app"),gS="@firebase/app-compat",_S="@firebase/analytics-compat",yS="@firebase/analytics",vS="@firebase/app-check-compat",ES="@firebase/app-check",wS="@firebase/auth",bS="@firebase/auth-compat",TS="@firebase/database",IS="@firebase/data-connect",AS="@firebase/database-compat",RS="@firebase/functions",SS="@firebase/functions-compat",CS="@firebase/installations",PS="@firebase/installations-compat",kS="@firebase/messaging",OS="@firebase/messaging-compat",NS="@firebase/performance",DS="@firebase/performance-compat",xS="@firebase/remote-config",VS="@firebase/remote-config-compat",LS="@firebase/storage",MS="@firebase/storage-compat",FS="@firebase/firestore",US="@firebase/ai",$S="@firebase/firestore-compat",jS="firebase",BS="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="[DEFAULT]",qS={[nf]:"fire-core",[gS]:"fire-core-compat",[yS]:"fire-analytics",[_S]:"fire-analytics-compat",[ES]:"fire-app-check",[vS]:"fire-app-check-compat",[wS]:"fire-auth",[bS]:"fire-auth-compat",[TS]:"fire-rtdb",[IS]:"fire-data-connect",[AS]:"fire-rtdb-compat",[RS]:"fire-fn",[SS]:"fire-fn-compat",[CS]:"fire-iid",[PS]:"fire-iid-compat",[kS]:"fire-fcm",[OS]:"fire-fcm-compat",[NS]:"fire-perf",[DS]:"fire-perf-compat",[xS]:"fire-rc",[VS]:"fire-rc-compat",[LS]:"fire-gcs",[MS]:"fire-gcs-compat",[FS]:"fire-fst",[$S]:"fire-fst-compat",[US]:"fire-vertex","fire-js":"fire-js",[jS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=new Map,HS=new Map,rf=new Map;function Lm(t,e){try{t.container.addComponent(e)}catch(n){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ji(t){const e=t.name;if(rf.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;rf.set(e,t);for(const n of Ml.values())Lm(n,t);for(const n of HS.values())Lm(n,t);return!0}function bu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kr=new yc("app","Firebase",WS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=BS;function qy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:sf,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Kr.create("bad-app-name",{appName:String(r)});if(n||(n=Fy()),!n)throw Kr.create("no-options");const i=Ml.get(r);if(i){if($i(n,i.options)&&$i(s,i.config))return i;throw Kr.create("duplicate-app",{appName:r})}const o=new JR(r);for(const u of rf.values())o.addComponent(u);const l=new zS(n,s,o);return Ml.set(r,l),l}function ed(t=sf){const e=Ml.get(t);if(!e&&t===sf&&Fy())return qy();if(!e)throw Kr.create("no-app",{appName:t});return e}function Ss(t,e,n){let s=qS[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(o.join(" "));return}ji(new Zr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="firebase-heartbeat-database",KS=1,sc="firebase-heartbeat-store";let Rh=null;function Hy(){return Rh||(Rh=hS(GS,KS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Kr.create("idb-open",{originalErrorMessage:t.message})})),Rh}async function QS(t){try{const n=(await Hy()).transaction(sc),s=await n.objectStore(sc).get(Wy(t));return await n.done,s}catch(e){if(e instanceof Fs)fr.warn(e.message);else{const n=Kr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fr.warn(n.message)}}}async function Mm(t,e){try{const s=(await Hy()).transaction(sc,"readwrite");await s.objectStore(sc).put(e,Wy(t)),await s.done}catch(n){if(n instanceof Fs)fr.warn(n.message);else{const s=Kr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fr.warn(s.message)}}}function Wy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=1024,XS=30;class JS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new eC(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Fm();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>XS){const o=tC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){fr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Fm(),{heartbeatsToSend:s,unsentEntries:r}=ZS(this._heartbeatsCache.heartbeats),i=Ll(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return fr.warn(n),""}}}function Fm(){return new Date().toISOString().substring(0,10)}function ZS(t,e=YS){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Um(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Um(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class eC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $R()?jR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await QS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Mm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Mm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Um(t){return Ll(JSON.stringify({version:2,heartbeats:t})).length}function tC(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(t){ji(new Zr("platform-logger",e=>new pS(e),"PRIVATE")),ji(new Zr("heartbeat",e=>new JS(e),"PRIVATE")),Ss(nf,Vm,t),Ss(nf,Vm,"esm2020"),Ss("fire-js","")}nC("");var sC="firebase",rC="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ss(sC,rC,"app");var $m=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qr,zy;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,b){function T(){}T.prototype=b.prototype,S.F=b.prototype,S.prototype=new T,S.prototype.constructor=S,S.D=function(P,C,x){for(var A=Array(arguments.length-2),pt=2;pt<arguments.length;pt++)A[pt-2]=arguments[pt];return b.prototype[C].apply(P,A)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,b,T){T||(T=0);const P=Array(16);if(typeof b=="string")for(var C=0;C<16;++C)P[C]=b.charCodeAt(T++)|b.charCodeAt(T++)<<8|b.charCodeAt(T++)<<16|b.charCodeAt(T++)<<24;else for(C=0;C<16;++C)P[C]=b[T++]|b[T++]<<8|b[T++]<<16|b[T++]<<24;b=S.g[0],T=S.g[1],C=S.g[2];let x=S.g[3],A;A=b+(x^T&(C^x))+P[0]+3614090360&4294967295,b=T+(A<<7&4294967295|A>>>25),A=x+(C^b&(T^C))+P[1]+3905402710&4294967295,x=b+(A<<12&4294967295|A>>>20),A=C+(T^x&(b^T))+P[2]+606105819&4294967295,C=x+(A<<17&4294967295|A>>>15),A=T+(b^C&(x^b))+P[3]+3250441966&4294967295,T=C+(A<<22&4294967295|A>>>10),A=b+(x^T&(C^x))+P[4]+4118548399&4294967295,b=T+(A<<7&4294967295|A>>>25),A=x+(C^b&(T^C))+P[5]+1200080426&4294967295,x=b+(A<<12&4294967295|A>>>20),A=C+(T^x&(b^T))+P[6]+2821735955&4294967295,C=x+(A<<17&4294967295|A>>>15),A=T+(b^C&(x^b))+P[7]+4249261313&4294967295,T=C+(A<<22&4294967295|A>>>10),A=b+(x^T&(C^x))+P[8]+1770035416&4294967295,b=T+(A<<7&4294967295|A>>>25),A=x+(C^b&(T^C))+P[9]+2336552879&4294967295,x=b+(A<<12&4294967295|A>>>20),A=C+(T^x&(b^T))+P[10]+4294925233&4294967295,C=x+(A<<17&4294967295|A>>>15),A=T+(b^C&(x^b))+P[11]+2304563134&4294967295,T=C+(A<<22&4294967295|A>>>10),A=b+(x^T&(C^x))+P[12]+1804603682&4294967295,b=T+(A<<7&4294967295|A>>>25),A=x+(C^b&(T^C))+P[13]+4254626195&4294967295,x=b+(A<<12&4294967295|A>>>20),A=C+(T^x&(b^T))+P[14]+2792965006&4294967295,C=x+(A<<17&4294967295|A>>>15),A=T+(b^C&(x^b))+P[15]+1236535329&4294967295,T=C+(A<<22&4294967295|A>>>10),A=b+(C^x&(T^C))+P[1]+4129170786&4294967295,b=T+(A<<5&4294967295|A>>>27),A=x+(T^C&(b^T))+P[6]+3225465664&4294967295,x=b+(A<<9&4294967295|A>>>23),A=C+(b^T&(x^b))+P[11]+643717713&4294967295,C=x+(A<<14&4294967295|A>>>18),A=T+(x^b&(C^x))+P[0]+3921069994&4294967295,T=C+(A<<20&4294967295|A>>>12),A=b+(C^x&(T^C))+P[5]+3593408605&4294967295,b=T+(A<<5&4294967295|A>>>27),A=x+(T^C&(b^T))+P[10]+38016083&4294967295,x=b+(A<<9&4294967295|A>>>23),A=C+(b^T&(x^b))+P[15]+3634488961&4294967295,C=x+(A<<14&4294967295|A>>>18),A=T+(x^b&(C^x))+P[4]+3889429448&4294967295,T=C+(A<<20&4294967295|A>>>12),A=b+(C^x&(T^C))+P[9]+568446438&4294967295,b=T+(A<<5&4294967295|A>>>27),A=x+(T^C&(b^T))+P[14]+3275163606&4294967295,x=b+(A<<9&4294967295|A>>>23),A=C+(b^T&(x^b))+P[3]+4107603335&4294967295,C=x+(A<<14&4294967295|A>>>18),A=T+(x^b&(C^x))+P[8]+1163531501&4294967295,T=C+(A<<20&4294967295|A>>>12),A=b+(C^x&(T^C))+P[13]+2850285829&4294967295,b=T+(A<<5&4294967295|A>>>27),A=x+(T^C&(b^T))+P[2]+4243563512&4294967295,x=b+(A<<9&4294967295|A>>>23),A=C+(b^T&(x^b))+P[7]+1735328473&4294967295,C=x+(A<<14&4294967295|A>>>18),A=T+(x^b&(C^x))+P[12]+2368359562&4294967295,T=C+(A<<20&4294967295|A>>>12),A=b+(T^C^x)+P[5]+4294588738&4294967295,b=T+(A<<4&4294967295|A>>>28),A=x+(b^T^C)+P[8]+2272392833&4294967295,x=b+(A<<11&4294967295|A>>>21),A=C+(x^b^T)+P[11]+1839030562&4294967295,C=x+(A<<16&4294967295|A>>>16),A=T+(C^x^b)+P[14]+4259657740&4294967295,T=C+(A<<23&4294967295|A>>>9),A=b+(T^C^x)+P[1]+2763975236&4294967295,b=T+(A<<4&4294967295|A>>>28),A=x+(b^T^C)+P[4]+1272893353&4294967295,x=b+(A<<11&4294967295|A>>>21),A=C+(x^b^T)+P[7]+4139469664&4294967295,C=x+(A<<16&4294967295|A>>>16),A=T+(C^x^b)+P[10]+3200236656&4294967295,T=C+(A<<23&4294967295|A>>>9),A=b+(T^C^x)+P[13]+681279174&4294967295,b=T+(A<<4&4294967295|A>>>28),A=x+(b^T^C)+P[0]+3936430074&4294967295,x=b+(A<<11&4294967295|A>>>21),A=C+(x^b^T)+P[3]+3572445317&4294967295,C=x+(A<<16&4294967295|A>>>16),A=T+(C^x^b)+P[6]+76029189&4294967295,T=C+(A<<23&4294967295|A>>>9),A=b+(T^C^x)+P[9]+3654602809&4294967295,b=T+(A<<4&4294967295|A>>>28),A=x+(b^T^C)+P[12]+3873151461&4294967295,x=b+(A<<11&4294967295|A>>>21),A=C+(x^b^T)+P[15]+530742520&4294967295,C=x+(A<<16&4294967295|A>>>16),A=T+(C^x^b)+P[2]+3299628645&4294967295,T=C+(A<<23&4294967295|A>>>9),A=b+(C^(T|~x))+P[0]+4096336452&4294967295,b=T+(A<<6&4294967295|A>>>26),A=x+(T^(b|~C))+P[7]+1126891415&4294967295,x=b+(A<<10&4294967295|A>>>22),A=C+(b^(x|~T))+P[14]+2878612391&4294967295,C=x+(A<<15&4294967295|A>>>17),A=T+(x^(C|~b))+P[5]+4237533241&4294967295,T=C+(A<<21&4294967295|A>>>11),A=b+(C^(T|~x))+P[12]+1700485571&4294967295,b=T+(A<<6&4294967295|A>>>26),A=x+(T^(b|~C))+P[3]+2399980690&4294967295,x=b+(A<<10&4294967295|A>>>22),A=C+(b^(x|~T))+P[10]+4293915773&4294967295,C=x+(A<<15&4294967295|A>>>17),A=T+(x^(C|~b))+P[1]+2240044497&4294967295,T=C+(A<<21&4294967295|A>>>11),A=b+(C^(T|~x))+P[8]+1873313359&4294967295,b=T+(A<<6&4294967295|A>>>26),A=x+(T^(b|~C))+P[15]+4264355552&4294967295,x=b+(A<<10&4294967295|A>>>22),A=C+(b^(x|~T))+P[6]+2734768916&4294967295,C=x+(A<<15&4294967295|A>>>17),A=T+(x^(C|~b))+P[13]+1309151649&4294967295,T=C+(A<<21&4294967295|A>>>11),A=b+(C^(T|~x))+P[4]+4149444226&4294967295,b=T+(A<<6&4294967295|A>>>26),A=x+(T^(b|~C))+P[11]+3174756917&4294967295,x=b+(A<<10&4294967295|A>>>22),A=C+(b^(x|~T))+P[2]+718787259&4294967295,C=x+(A<<15&4294967295|A>>>17),A=T+(x^(C|~b))+P[9]+3951481745&4294967295,S.g[0]=S.g[0]+b&4294967295,S.g[1]=S.g[1]+(C+(A<<21&4294967295|A>>>11))&4294967295,S.g[2]=S.g[2]+C&4294967295,S.g[3]=S.g[3]+x&4294967295}s.prototype.v=function(S,b){b===void 0&&(b=S.length);const T=b-this.blockSize,P=this.C;let C=this.h,x=0;for(;x<b;){if(C==0)for(;x<=T;)r(this,S,x),x+=this.blockSize;if(typeof S=="string"){for(;x<b;)if(P[C++]=S.charCodeAt(x++),C==this.blockSize){r(this,P),C=0;break}}else for(;x<b;)if(P[C++]=S[x++],C==this.blockSize){r(this,P),C=0;break}}this.h=C,this.o+=b},s.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var b=1;b<S.length-8;++b)S[b]=0;b=this.o*8;for(var T=S.length-8;T<S.length;++T)S[T]=b&255,b/=256;for(this.v(S),S=Array(16),b=0,T=0;T<4;++T)for(let P=0;P<32;P+=8)S[b++]=this.g[T]>>>P&255;return S};function i(S,b){var T=l;return Object.prototype.hasOwnProperty.call(T,S)?T[S]:T[S]=b(S)}function o(S,b){this.h=b;const T=[];let P=!0;for(let C=S.length-1;C>=0;C--){const x=S[C]|0;P&&x==b||(T[C]=x,P=!1)}this.g=T}var l={};function u(S){return-128<=S&&S<128?i(S,function(b){return new o([b|0],b<0?-1:0)}):new o([S|0],S<0?-1:0)}function h(S){if(isNaN(S)||!isFinite(S))return m;if(S<0)return U(h(-S));const b=[];let T=1;for(let P=0;S>=T;P++)b[P]=S/T|0,T*=4294967296;return new o(b,0)}function d(S,b){if(S.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(S.charAt(0)=="-")return U(d(S.substring(1),b));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=h(Math.pow(b,8));let P=m;for(let x=0;x<S.length;x+=8){var C=Math.min(8,S.length-x);const A=parseInt(S.substring(x,x+C),b);C<8?(C=h(Math.pow(b,C)),P=P.j(C).add(h(A))):(P=P.j(T),P=P.add(h(A)))}return P}var m=u(0),y=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(M(this))return-U(this).m();let S=0,b=1;for(let T=0;T<this.g.length;T++){const P=this.i(T);S+=(P>=0?P:4294967296+P)*b,b*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(L(this))return"0";if(M(this))return"-"+U(this).toString(S);const b=h(Math.pow(S,6));var T=this;let P="";for(;;){const C=ne(T,b).g;T=Y(T,C.j(b));let x=((T.g.length>0?T.g[0]:T.h)>>>0).toString(S);if(T=C,L(T))return x+P;for(;x.length<6;)x="0"+x;P=x+P}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function L(S){if(S.h!=0)return!1;for(let b=0;b<S.g.length;b++)if(S.g[b]!=0)return!1;return!0}function M(S){return S.h==-1}t.l=function(S){return S=Y(this,S),M(S)?-1:L(S)?0:1};function U(S){const b=S.g.length,T=[];for(let P=0;P<b;P++)T[P]=~S.g[P];return new o(T,~S.h).add(y)}t.abs=function(){return M(this)?U(this):this},t.add=function(S){const b=Math.max(this.g.length,S.g.length),T=[];let P=0;for(let C=0;C<=b;C++){let x=P+(this.i(C)&65535)+(S.i(C)&65535),A=(x>>>16)+(this.i(C)>>>16)+(S.i(C)>>>16);P=A>>>16,x&=65535,A&=65535,T[C]=A<<16|x}return new o(T,T[T.length-1]&-2147483648?-1:0)};function Y(S,b){return S.add(U(b))}t.j=function(S){if(L(this)||L(S))return m;if(M(this))return M(S)?U(this).j(U(S)):U(U(this).j(S));if(M(S))return U(this.j(U(S)));if(this.l(w)<0&&S.l(w)<0)return h(this.m()*S.m());const b=this.g.length+S.g.length,T=[];for(var P=0;P<2*b;P++)T[P]=0;for(P=0;P<this.g.length;P++)for(let C=0;C<S.g.length;C++){const x=this.i(P)>>>16,A=this.i(P)&65535,pt=S.i(C)>>>16,Ut=S.i(C)&65535;T[2*P+2*C]+=A*Ut,K(T,2*P+2*C),T[2*P+2*C+1]+=x*Ut,K(T,2*P+2*C+1),T[2*P+2*C+1]+=A*pt,K(T,2*P+2*C+1),T[2*P+2*C+2]+=x*pt,K(T,2*P+2*C+2)}for(S=0;S<b;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=b;S<2*b;S++)T[S]=0;return new o(T,0)};function K(S,b){for(;(S[b]&65535)!=S[b];)S[b+1]+=S[b]>>>16,S[b]&=65535,b++}function X(S,b){this.g=S,this.h=b}function ne(S,b){if(L(b))throw Error("division by zero");if(L(S))return new X(m,m);if(M(S))return b=ne(U(S),b),new X(U(b.g),U(b.h));if(M(b))return b=ne(S,U(b)),new X(U(b.g),b.h);if(S.g.length>30){if(M(S)||M(b))throw Error("slowDivide_ only works with positive integers.");for(var T=y,P=b;P.l(S)<=0;)T=de(T),P=de(P);var C=Se(T,1),x=Se(P,1);for(P=Se(P,2),T=Se(T,2);!L(P);){var A=x.add(P);A.l(S)<=0&&(C=C.add(T),x=A),P=Se(P,1),T=Se(T,1)}return b=Y(S,C.j(b)),new X(C,b)}for(C=m;S.l(b)>=0;){for(T=Math.max(1,Math.floor(S.m()/b.m())),P=Math.ceil(Math.log(T)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),x=h(T),A=x.j(b);M(A)||A.l(S)>0;)T-=P,x=h(T),A=x.j(b);L(x)&&(x=y),C=C.add(x),S=Y(S,A)}return new X(C,S)}t.B=function(S){return ne(this,S).h},t.and=function(S){const b=Math.max(this.g.length,S.g.length),T=[];for(let P=0;P<b;P++)T[P]=this.i(P)&S.i(P);return new o(T,this.h&S.h)},t.or=function(S){const b=Math.max(this.g.length,S.g.length),T=[];for(let P=0;P<b;P++)T[P]=this.i(P)|S.i(P);return new o(T,this.h|S.h)},t.xor=function(S){const b=Math.max(this.g.length,S.g.length),T=[];for(let P=0;P<b;P++)T[P]=this.i(P)^S.i(P);return new o(T,this.h^S.h)};function de(S){const b=S.g.length+1,T=[];for(let P=0;P<b;P++)T[P]=S.i(P)<<1|S.i(P-1)>>>31;return new o(T,S.h)}function Se(S,b){const T=b>>5;b%=32;const P=S.g.length-T,C=[];for(let x=0;x<P;x++)C[x]=b>0?S.i(x+T)>>>b|S.i(x+T+1)<<32-b:S.i(x+T);return new o(C,S.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,zy=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=d,Qr=o}).apply(typeof $m<"u"?$m:typeof self<"u"?self:typeof window<"u"?window:{});var tl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gy,Oa,Ky,dl,of,Qy,Yy,Xy;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof tl=="object"&&tl];for(var f=0;f<a.length;++f){var g=a[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function r(a,f){if(f)e:{var g=s;a=a.split(".");for(var E=0;E<a.length-1;E++){var V=a[E];if(!(V in g))break e;g=g[V]}a=a[a.length-1],E=g[a],f=f(E),f!=E&&f!=null&&e(g,a,{configurable:!0,writable:!0,value:f})}}r("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(a){return a||function(f){var g=[],E;for(E in f)Object.prototype.hasOwnProperty.call(f,E)&&g.push([E,f[E]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function u(a,f,g){return a.call.apply(a.bind,arguments)}function h(a,f,g){return h=u,h.apply(null,arguments)}function d(a,f){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),a.apply(this,E)}}function m(a,f){function g(){}g.prototype=f.prototype,a.Z=f.prototype,a.prototype=new g,a.prototype.constructor=a,a.Ob=function(E,V,F){for(var se=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)se[Oe-2]=arguments[Oe];return f.prototype[V].apply(E,se)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function w(a){const f=a.length;if(f>0){const g=Array(f);for(let E=0;E<f;E++)g[E]=a[E];return g}return[]}function L(a,f){for(let E=1;E<arguments.length;E++){const V=arguments[E];var g=typeof V;if(g=g!="object"?g:V?Array.isArray(V)?"array":g:"null",g=="array"||g=="object"&&typeof V.length=="number"){g=a.length||0;const F=V.length||0;a.length=g+F;for(let se=0;se<F;se++)a[g+se]=V[se]}else a.push(V)}}class M{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function U(a){o.setTimeout(()=>{throw a},0)}function Y(){var a=S;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class K{constructor(){this.h=this.g=null}add(f,g){const E=X.get();E.set(f,g),this.h?this.h.next=E:this.g=E,this.h=E}}var X=new M(()=>new ne,a=>a.reset());class ne{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let de,Se=!1,S=new K,b=()=>{const a=Promise.resolve(void 0);de=()=>{a.then(T)}};function T(){for(var a;a=Y();){try{a.h.call(a.g)}catch(g){U(g)}var f=X;f.j(a),f.h<100&&(f.h++,a.next=f.g,f.g=a)}Se=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var x=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const g=()=>{};o.addEventListener("test",g,f),o.removeEventListener("test",g,f)}catch{}return a}();function A(a){return/^[\s\xa0]*$/.test(a)}function pt(a,f){C.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,f)}m(pt,C),pt.prototype.init=function(a,f){const g=this.type=a.type,E=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget,f||(g=="mouseover"?f=a.fromElement:g=="mouseout"&&(f=a.toElement)),this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&pt.Z.h.call(this)},pt.prototype.h=function(){pt.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ut="closure_listenable_"+(Math.random()*1e6|0),et=0;function Te(a,f,g,E,V){this.listener=a,this.proxy=null,this.src=f,this.type=g,this.capture=!!E,this.ha=V,this.key=++et,this.da=this.fa=!1}function Ve(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function nn(a,f,g){for(const E in a)f.call(g,a[E],E,a)}function kn(a,f){for(const g in a)f.call(void 0,a[g],g,a)}function z(a){const f={};for(const g in a)f[g]=a[g];return f}const Tt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mn(a,f){let g,E;for(let V=1;V<arguments.length;V++){E=arguments[V];for(g in E)a[g]=E[g];for(let F=0;F<Tt.length;F++)g=Tt[F],Object.prototype.hasOwnProperty.call(E,g)&&(a[g]=E[g])}}function yn(a){this.src=a,this.g={},this.h=0}yn.prototype.add=function(a,f,g,E,V){const F=a.toString();a=this.g[F],a||(a=this.g[F]=[],this.h++);const se=vt(a,f,E,V);return se>-1?(f=a[se],g||(f.fa=!1)):(f=new Te(f,this.src,F,!!E,V),f.fa=g,a.push(f)),f};function It(a,f){const g=f.type;if(g in a.g){var E=a.g[g],V=Array.prototype.indexOf.call(E,f,void 0),F;(F=V>=0)&&Array.prototype.splice.call(E,V,1),F&&(Ve(f),a.g[g].length==0&&(delete a.g[g],a.h--))}}function vt(a,f,g,E){for(let V=0;V<a.length;++V){const F=a[V];if(!F.da&&F.listener==f&&F.capture==!!g&&F.ha==E)return V}return-1}var B="closure_lm_"+(Math.random()*1e6|0),ae={};function j(a,f,g,E,V){if(Array.isArray(f)){for(let F=0;F<f.length;F++)j(a,f[F],g,E,V);return null}return g=ie(g),a&&a[Ut]?a.J(f,g,l(E)?!!E.capture:!1,V):pe(a,f,g,!1,E,V)}function pe(a,f,g,E,V,F){if(!f)throw Error("Invalid event type");const se=l(V)?!!V.capture:!!V;let Oe=W(a);if(Oe||(a[B]=Oe=new yn(a)),g=Oe.add(f,g,E,se,F),g.proxy)return g;if(E=Le(),g.proxy=E,E.src=a,E.listener=g,a.addEventListener)x||(V=se),V===void 0&&(V=!1),a.addEventListener(f.toString(),E,V);else if(a.attachEvent)a.attachEvent(D(f.toString()),E);else if(a.addListener&&a.removeListener)a.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Le(){function a(g){return f.call(a.src,a.listener,g)}const f=H;return a}function I(a,f,g,E,V){if(Array.isArray(f))for(var F=0;F<f.length;F++)I(a,f[F],g,E,V);else E=l(E)?!!E.capture:!!E,g=ie(g),a&&a[Ut]?(a=a.i,F=String(f).toString(),F in a.g&&(f=a.g[F],g=vt(f,g,E,V),g>-1&&(Ve(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete a.g[F],a.h--)))):a&&(a=W(a))&&(f=a.g[f.toString()],a=-1,f&&(a=vt(f,g,E,V)),(g=a>-1?f[a]:null)&&R(g))}function R(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[Ut])It(f.i,a);else{var g=a.type,E=a.proxy;f.removeEventListener?f.removeEventListener(g,E,a.capture):f.detachEvent?f.detachEvent(D(g),E):f.addListener&&f.removeListener&&f.removeListener(E),(g=W(f))?(It(g,a),g.h==0&&(g.src=null,f[B]=null)):Ve(a)}}}function D(a){return a in ae?ae[a]:ae[a]="on"+a}function H(a,f){if(a.da)a=!0;else{f=new pt(f,this);const g=a.listener,E=a.ha||a.src;a.fa&&R(a),a=g.call(E,f)}return a}function W(a){return a=a[B],a instanceof yn?a:null}var q="__closure_events_fn_"+(Math.random()*1e9>>>0);function ie(a){return typeof a=="function"?a:(a[q]||(a[q]=function(f){return a.handleEvent(f)}),a[q])}function te(){P.call(this),this.i=new yn(this),this.M=this,this.G=null}m(te,P),te.prototype[Ut]=!0,te.prototype.removeEventListener=function(a,f,g,E){I(this,a,f,g,E)};function Z(a,f){var g,E=a.G;if(E)for(g=[];E;E=E.G)g.push(E);if(a=a.M,E=f.type||f,typeof f=="string")f=new C(f,a);else if(f instanceof C)f.target=f.target||a;else{var V=f;f=new C(E,a),Mn(f,V)}V=!0;let F,se;if(g)for(se=g.length-1;se>=0;se--)F=f.g=g[se],V=ee(F,E,!0,f)&&V;if(F=f.g=a,V=ee(F,E,!0,f)&&V,V=ee(F,E,!1,f)&&V,g)for(se=0;se<g.length;se++)F=f.g=g[se],V=ee(F,E,!1,f)&&V}te.prototype.N=function(){if(te.Z.N.call(this),this.i){var a=this.i;for(const f in a.g){const g=a.g[f];for(let E=0;E<g.length;E++)Ve(g[E]);delete a.g[f],a.h--}}this.G=null},te.prototype.J=function(a,f,g,E){return this.i.add(String(a),f,!1,g,E)},te.prototype.K=function(a,f,g,E){return this.i.add(String(a),f,!0,g,E)};function ee(a,f,g,E){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();let V=!0;for(let F=0;F<f.length;++F){const se=f[F];if(se&&!se.da&&se.capture==g){const Oe=se.listener,Rt=se.ha||se.src;se.fa&&It(a.i,se),V=Oe.call(Rt,E)!==!1&&V}}return V&&!E.defaultPrevented}function ye(a,f){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(a,f||0)}function oe(a){a.g=ye(()=>{a.g=null,a.i&&(a.i=!1,oe(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class me extends P{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ge(a){P.call(this),this.h=a,this.g={}}m(ge,P);var Ie=[];function Ke(a){nn(a.g,function(f,g){this.g.hasOwnProperty(g)&&R(f)},a),a.g={}}ge.prototype.N=function(){ge.Z.N.call(this),Ke(this)},ge.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qe=o.JSON.stringify,Wt=o.JSON.parse,Et=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Ot(){}function Nt(){}var sn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function yr(){C.call(this,"d")}m(yr,C);function At(){C.call(this,"c")}m(At,C);var Dt={},li=null;function js(){return li=li||new te}Dt.Ia="serverreachability";function Oc(a){C.call(this,Dt.Ia,a)}m(Oc,C);function ui(a){const f=js();Z(f,new Oc(f))}Dt.STAT_EVENT="statevent";function Nc(a,f){C.call(this,Dt.STAT_EVENT,a),this.stat=f}m(Nc,C);function zt(a){const f=js();Z(f,new Nc(f,a))}Dt.Ja="timingevent";function hi(a,f){C.call(this,Dt.Ja,a),this.size=f}m(hi,C);function vr(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},f)}function Er(){this.g=!0}Er.prototype.ua=function(){this.g=!1};function Bu(a,f,g,E,V,F){a.info(function(){if(a.g)if(F){var se="",Oe=F.split("&");for(let ze=0;ze<Oe.length;ze++){var Rt=Oe[ze].split("=");if(Rt.length>1){const lt=Rt[0];Rt=Rt[1];const $n=lt.split("_");se=$n.length>=2&&$n[1]=="type"?se+(lt+"="+Rt+"&"):se+(lt+"=redacted&")}}}else se=null;else se=F;return"XMLHTTP REQ ("+E+") [attempt "+V+"]: "+f+`
`+g+`
`+se})}function qu(a,f,g,E,V,F,se){a.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+V+"]: "+f+`
`+g+`
`+F+" "+se})}function wr(a,f,g,E){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+br(a,g)+(E?" "+E:"")})}function Hu(a,f){a.info(function(){return"TIMEOUT: "+f})}Er.prototype.info=function(){};function br(a,f){if(!a.g)return f;if(!f)return null;try{const F=JSON.parse(f);if(F){for(a=0;a<F.length;a++)if(Array.isArray(F[a])){var g=F[a];if(!(g.length<2)){var E=g[1];if(Array.isArray(E)&&!(E.length<1)){var V=E[0];if(V!="noop"&&V!="stop"&&V!="close")for(let se=1;se<E.length;se++)E[se]=""}}}}return qe(F)}catch{return f}}var us={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Dc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xc;function na(){}m(na,Ot),na.prototype.g=function(){return new XMLHttpRequest},xc=new na;function fi(a){return encodeURIComponent(String(a))}function Wu(a){var f=1;a=a.split(":");const g=[];for(;f>0&&a.length;)g.push(a.shift()),f--;return a.length&&g.push(a.join(":")),g}function Fn(a,f,g,E){this.j=a,this.i=f,this.l=g,this.S=E||1,this.V=new ge(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Bs}function Bs(){this.i=null,this.g="",this.h=!1}var di={},sa={};function pi(a,f,g){a.M=1,a.A=gi(On(f)),a.u=g,a.R=!0,Vc(a,null)}function Vc(a,f){a.F=Date.now(),Gt(a),a.B=On(a.A);var g=a.B,E=a.S;Array.isArray(E)||(E=[String(E)]),ao(g.i,"t",E),a.C=0,g=a.j.L,a.h=new Bs,a.g=jc(a.j,g?f:null,!a.u),a.P>0&&(a.O=new me(h(a.Y,a,a.g),a.P)),f=a.V,g=a.g,E=a.ba;var V="readystatechange";Array.isArray(V)||(V&&(Ie[0]=V.toString()),V=Ie);for(let F=0;F<V.length;F++){const se=j(g,V[F],E||f.handleEvent,!1,f.h||f);if(!se)break;f.g[se.key]=se}f=a.J?z(a.J):{},a.u?(a.v||(a.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,f)):(a.v="GET",a.g.ea(a.B,a.v,null,f)),ui(),Bu(a.i,a.v,a.B,a.l,a.S,a.u)}Fn.prototype.ba=function(a){a=a.target;const f=this.O;f&&es(a)==3?f.j():this.Y(a)},Fn.prototype.Y=function(a){try{if(a==this.g)e:{const Oe=es(this.g),Rt=this.g.ya(),ze=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||fo(this.g)))){this.K||Oe!=4||Rt==7||(Rt==8||ze<=0?ui(3):ui(2)),$t(this);var f=this.g.ca();this.X=f;var g=zu(this);if(this.o=f==200,qu(this.i,this.v,this.B,this.l,this.S,Oe,f),this.o){if(this.U&&!this.L){t:{if(this.g){var E,V=this.g;if((E=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(E)){var F=E;break t}}F=null}if(a=F)wr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Xn(this,a);else{this.o=!1,this.m=3,zt(12),Rn(this),hs(this);break e}}if(this.R){a=!0;let lt;for(;!this.K&&this.C<g.length;)if(lt=Yt(this,g),lt==sa){Oe==4&&(this.m=4,zt(14),a=!1),wr(this.i,this.l,null,"[Incomplete Response]");break}else if(lt==di){this.m=4,zt(15),wr(this.i,this.l,g,"[Invalid Chunk]"),a=!1;break}else wr(this.i,this.l,lt,null),Xn(this,lt);if(qs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||g.length!=0||this.h.h||(this.m=1,zt(16),a=!1),this.o=this.o&&a,!a)wr(this.i,this.l,g,"[Invalid Chunked Response]"),Rn(this),hs(this);else if(g.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),mo(se),se.P=!0,zt(11))}}else wr(this.i,this.l,g,null),Xn(this,g);Oe==4&&Rn(this),this.o&&!this.K&&(Oe==4?Uc(this.j,this):(this.o=!1,Gt(this)))}else pa(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,zt(12)):(this.m=0,zt(13)),Rn(this),hs(this)}}}catch{}finally{}};function zu(a){if(!qs(a))return a.g.la();const f=fo(a.g);if(f==="")return"";let g="";const E=f.length,V=es(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Rn(a),hs(a),"";a.h.i=new o.TextDecoder}for(let F=0;F<E;F++)a.h.h=!0,g+=a.h.i.decode(f[F],{stream:!(V&&F==E-1)});return f.length=0,a.h.g+=g,a.C=0,a.h.g}function qs(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Yt(a,f){var g=a.C,E=f.indexOf(`
`,g);return E==-1?sa:(g=Number(f.substring(g,E)),isNaN(g)?di:(E+=1,E+g>f.length?sa:(f=f.slice(E,E+g),a.C=E+g,f)))}Fn.prototype.cancel=function(){this.K=!0,Rn(this)};function Gt(a){a.T=Date.now()+a.H,rn(a,a.H)}function rn(a,f){if(a.D!=null)throw Error("WatchDog timer not null");a.D=vr(h(a.aa,a),f)}function $t(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Fn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(Hu(this.i,this.B),this.M!=2&&(ui(),zt(17)),Rn(this),this.m=2,hs(this)):rn(this,this.T-a)};function hs(a){a.j.I==0||a.K||Uc(a.j,a)}function Rn(a){$t(a);var f=a.O;f&&typeof f.dispose=="function"&&f.dispose(),a.O=null,Ke(a.V),a.g&&(f=a.g,a.g=null,f.abort(),f.dispose())}function Xn(a,f){try{var g=a.j;if(g.I!=0&&(g.g==a||so(g.h,a))){if(!a.L&&so(g.h,a)&&g.I==3){try{var E=g.Ba.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var V=E;if(V[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<a.F)wi(g),Cr(g);else break e;po(g),zt(18)}}else g.xa=V[1],0<g.xa-g.K&&V[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=vr(h(g.Va,g),6e3));Hs(g.h)<=1&&g.ta&&(g.ta=void 0)}else ms(g,11)}else if((a.L||g.g==a)&&wi(g),!A(f))for(V=g.Ba.g.parse(f),f=0;f<V.length;f++){let ze=V[f];const lt=ze[0];if(!(lt<=g.K))if(g.K=lt,ze=ze[1],g.I==2)if(ze[0]=="c"){g.M=ze[1],g.ba=ze[2];const $n=ze[3];$n!=null&&(g.ka=$n,g.j.info("VER="+g.ka));const jn=ze[4];jn!=null&&(g.za=jn,g.j.info("SVER="+g.za));const ys=ze[5];ys!=null&&typeof ys=="number"&&ys>0&&(E=1.5*ys,g.O=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const vs=a.g;if(vs){const _o=vs.g?vs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_o){var F=E.h;F.g||_o.indexOf("spdy")==-1&&_o.indexOf("quic")==-1&&_o.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(mi(F,F.h),F.h=null))}if(E.G){const wa=vs.g?vs.g.getResponseHeader("X-HTTP-Session-Id"):null;wa&&(E.wa=wa,st(E.J,E.G,wa))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-a.F,g.j.info("Handshake RTT: "+g.T+"ms")),E=g;var se=a;if(E.na=bi(E,E.L?E.ba:null,E.W),se.L){ro(E.h,se);var Oe=se,Rt=E.O;Rt&&(Oe.H=Rt),Oe.D&&($t(Oe),Gt(Oe)),E.g=se}else ya(E);g.i.length>0&&Ei(g)}else ze[0]!="stop"&&ze[0]!="close"||ms(g,7);else g.I==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?ms(g,7):Ys(g):ze[0]!="noop"&&g.l&&g.l.qa(ze),g.A=0)}}ui(4)}catch{}}var Tr=class{constructor(a,f){this.g=a,this.map=f}};function ra(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function no(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Hs(a){return a.h?1:a.g?a.g.size:0}function so(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function mi(a,f){a.g?a.g.add(f):a.h=f}function ro(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}ra.prototype.cancel=function(){if(this.i=ia(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ia(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const g of a.g.values())f=f.concat(g.G);return f}return w(a.i)}var oa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lc(a,f){if(a){a=a.split("&");for(let g=0;g<a.length;g++){const E=a[g].indexOf("=");let V,F=null;E>=0?(V=a[g].substring(0,E),F=a[g].substring(E+1)):V=a[g],f(V,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Jn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;a instanceof Jn?(this.l=a.l,Ir(this,a.j),this.o=a.o,this.g=a.g,Ar(this,a.u),this.h=a.h,io(this,ua(a.i)),this.m=a.m):a&&(f=String(a).match(oa))?(this.l=!1,Ir(this,f[1]||"",!0),this.o=on(f[2]||""),this.g=on(f[3]||"",!0),Ar(this,f[4]),this.h=on(f[5]||"",!0),io(this,f[6]||"",!0),this.m=on(f[7]||"")):(this.l=!1,this.i=new fs(null,this.l))}Jn.prototype.toString=function(){const a=[];var f=this.j;f&&a.push(jt(f,vn,!0),":");var g=this.g;return(g||f=="file")&&(a.push("//"),(f=this.o)&&a.push(jt(f,vn,!0),"@"),a.push(fi(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&a.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&a.push("/"),a.push(jt(g,g.charAt(0)=="/"?ca:aa,!0))),(g=this.i.toString())&&a.push("?",g),(g=this.m)&&a.push("#",jt(g,zs)),a.join("")},Jn.prototype.resolve=function(a){const f=On(this);let g=!!a.j;g?Ir(f,a.j):g=!!a.o,g?f.o=a.o:g=!!a.g,g?f.g=a.g:g=a.u!=null;var E=a.h;if(g)Ar(f,a.u);else if(g=!!a.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var V=f.h.lastIndexOf("/");V!=-1&&(E=f.h.slice(0,V+1)+E)}if(V=E,V==".."||V==".")E="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){E=V.lastIndexOf("/",0)==0,V=V.split("/");const F=[];for(let se=0;se<V.length;){const Oe=V[se++];Oe=="."?E&&se==V.length&&F.push(""):Oe==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),E&&se==V.length&&F.push("")):(F.push(Oe),E=!0)}E=F.join("/")}else E=V}return g?f.h=E:g=a.i.toString()!=="",g?io(f,ua(a.i)):g=!!a.m,g&&(f.m=a.m),f};function On(a){return new Jn(a)}function Ir(a,f,g){a.j=g?on(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function Ar(a,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);a.u=f}else a.u=null}function io(a,f,g){f instanceof fs?(a.i=f,Gu(a.i,a.l)):(g||(f=jt(f,Un)),a.i=new fs(f,a.l))}function st(a,f,g){a.i.set(f,g)}function gi(a){return st(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function on(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function jt(a,f,g){return typeof a=="string"?(a=encodeURI(a).replace(f,Ws),g&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Ws(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var vn=/[#\/\?@]/g,aa=/[#\?:]/g,ca=/[#\?]/g,Un=/[#\?@]/g,zs=/#/g;function fs(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function Sn(a){a.g||(a.g=new Map,a.h=0,a.i&&Lc(a.i,function(f,g){a.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=fs.prototype,t.add=function(a,f){Sn(this),this.i=null,a=an(this,a);let g=this.g.get(a);return g||this.g.set(a,g=[]),g.push(f),this.h+=1,this};function oo(a,f){Sn(a),f=an(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function la(a,f){return Sn(a),f=an(a,f),a.g.has(f)}t.forEach=function(a,f){Sn(this),this.g.forEach(function(g,E){g.forEach(function(V){a.call(f,V,E,this)},this)},this)};function Gs(a,f){Sn(a);let g=[];if(typeof f=="string")la(a,f)&&(g=g.concat(a.g.get(an(a,f))));else for(a=Array.from(a.g.values()),f=0;f<a.length;f++)g=g.concat(a[f]);return g}t.set=function(a,f){return Sn(this),this.i=null,a=an(this,a),la(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},t.get=function(a,f){return a?(a=Gs(this,a),a.length>0?String(a[0]):f):f};function ao(a,f,g){oo(a,f),g.length>0&&(a.i=null,a.g.set(an(a,f),w(g)),a.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(let E=0;E<f.length;E++){var g=f[E];const V=fi(g);g=Gs(this,g);for(let F=0;F<g.length;F++){let se=V;g[F]!==""&&(se+="="+fi(g[F])),a.push(se)}}return this.i=a.join("&")};function ua(a){const f=new fs;return f.i=a.i,a.g&&(f.g=new Map(a.g),f.h=a.h),f}function an(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function Gu(a,f){f&&!a.j&&(Sn(a),a.i=null,a.g.forEach(function(g,E){const V=E.toLowerCase();E!=V&&(oo(this,E),ao(this,V,g))},a)),a.j=f}function ds(a,f){const g=new Er;if(o.Image){const E=new Image;E.onload=d(Zn,g,"TestLoadImage: loaded",!0,f,E),E.onerror=d(Zn,g,"TestLoadImage: error",!1,f,E),E.onabort=d(Zn,g,"TestLoadImage: abort",!1,f,E),E.ontimeout=d(Zn,g,"TestLoadImage: timeout",!1,f,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=a}else f(!1)}function co(a,f){const g=new Er,E=new AbortController,V=setTimeout(()=>{E.abort(),Zn(g,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:E.signal}).then(F=>{clearTimeout(V),F.ok?Zn(g,"TestPingServer: ok",!0,f):Zn(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(V),Zn(g,"TestPingServer: error",!1,f)})}function Zn(a,f,g,E,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),E(g)}catch{}}function _i(){this.g=new Et}function yi(a){this.i=a.Sb||null,this.h=a.ab||!1}m(yi,Ot),yi.prototype.g=function(){return new ps(this.i,this.h)};function ps(a,f){te.call(this),this.H=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(ps,te),t=ps.prototype,t.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=f,this.readyState=1,Sr(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(f.body=a),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Rr(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Sr(this)),this.g&&(this.readyState=3,Sr(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ha(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function ha(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?Rr(this):Sr(this),this.readyState==3&&ha(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Rr(this))},t.Na=function(a){this.g&&(this.response=a,Rr(this))},t.ga=function(){this.g&&Rr(this)};function Rr(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Sr(a)}t.setRequestHeader=function(a,f){this.A.append(a,f)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,a.push(g[0]+": "+g[1]),g=f.next();return a.join(`\r
`)};function Sr(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ps.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Ks(a){let f="";return nn(a,function(g,E){f+=E,f+=":",f+=g,f+=`\r
`}),f}function fa(a,f,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=Ks(g),typeof a=="string"?g!=null&&fi(g):st(a,f,g))}function mt(a){te.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(mt,te);var da=/^https?$/i,lo=["POST","PUT"];t=mt.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,f,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xc.g(),this.g.onreadystatechange=y(h(this.Ca,this));try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(F){uo(this,F);return}if(a=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var V in E)g.set(V,E[V]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const F of E.keys())g.set(F,E.get(F));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(F=>F.toLowerCase()=="content-type"),V=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(lo,f,void 0)>=0)||E||V||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,se]of g)this.g.setRequestHeader(F,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(F){uo(this,F)}};function uo(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.o=5,Mc(a),ho(a)}function Mc(a){a.A||(a.A=!0,Z(a,"complete"),Z(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,Z(this,"complete"),Z(this,"abort"),ho(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ho(this,!0)),mt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?vi(this):this.Xa())},t.Xa=function(){vi(this)};function vi(a){if(a.h&&typeof i<"u"){if(a.v&&es(a)==4)setTimeout(a.Ca.bind(a),0);else if(Z(a,"readystatechange"),es(a)==4){a.h=!1;try{const F=a.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var E;if(E=F===0){let se=String(a.D).match(oa)[1]||null;!se&&o.self&&o.self.location&&(se=o.self.location.protocol.slice(0,-1)),E=!da.test(se?se.toLowerCase():"")}g=E}if(g)Z(a,"complete"),Z(a,"success");else{a.o=6;try{var V=es(a)>2?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.ca()+"]",Mc(a)}}finally{ho(a)}}}}function ho(a,f){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const g=a.g;a.g=null,f||Z(a,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function es(a){return a.g?a.g.readyState:0}t.ca=function(){try{return es(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),Wt(f)}};function fo(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function pa(a){const f={};a=(a.g&&es(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<a.length;E++){if(A(a[E]))continue;var g=Wu(a[E]);const V=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const F=f[V]||[];f[V]=F,F.push(g)}kn(f,function(E){return E.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qs(a,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[a]||f}function ma(a){this.za=0,this.i=[],this.j=new Er,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Qs("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Qs("baseRetryDelayMs",5e3,a),this.Za=Qs("retryDelaySeedMs",1e4,a),this.Ta=Qs("forwardChannelMaxRetries",2,a),this.va=Qs("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new ra(a&&a.concurrentRequestLimit),this.Ba=new _i,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ma.prototype,t.ka=8,t.I=1,t.connect=function(a,f,g,E){zt(0),this.W=a,this.H=f||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.J=bi(this,null,this.W),Ei(this)};function Ys(a){if(ga(a),a.I==3){var f=a.V++,g=On(a.J);if(st(g,"SID",a.M),st(g,"RID",f),st(g,"TYPE","terminate"),kr(a,g),f=new Fn(a,a.j,f),f.M=2,f.A=gi(On(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=f.A,g=!0),g||(f.g=jc(f.j,null),f.g.ea(f.A)),f.F=Date.now(),Gt(f)}va(a)}function Cr(a){a.g&&(mo(a),a.g.cancel(),a.g=null)}function ga(a){Cr(a),a.v&&(o.clearTimeout(a.v),a.v=null),wi(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Ei(a){if(!no(a.h)&&!a.m){a.m=!0;var f=a.Ea;de||b(),Se||(de(),Se=!0),S.add(f,a),a.D=0}}function Pr(a,f){return Hs(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=f.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=vr(h(a.Ea,a,f),$c(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const V=new Fn(this,this.j,a);let F=this.o;if(this.U&&(F?(F=z(F),Mn(F,this.U)):F=this.U),this.u!==null||this.R||(V.J=F,F=null),this.S)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,f>4096){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=_a(this,V,f),g=On(this.J),st(g,"RID",a),st(g,"CVER",22),this.G&&st(g,"X-HTTP-Session-Id",this.G),kr(this,g),F&&(this.R?f="headers="+fi(Ks(F))+"&"+f:this.u&&fa(g,this.u,F)),mi(this.h,V),this.Ra&&st(g,"TYPE","init"),this.S?(st(g,"$req",f),st(g,"SID","null"),V.U=!0,pi(V,g,null)):pi(V,g,f),this.I=2}}else this.I==3&&(a?Fc(this,a):this.i.length==0||no(this.h)||Fc(this))};function Fc(a,f){var g;f?g=f.l:g=a.V++;const E=On(a.J);st(E,"SID",a.M),st(E,"RID",g),st(E,"AID",a.K),kr(a,E),a.u&&a.o&&fa(E,a.u,a.o),g=new Fn(a,a.j,g,a.D+1),a.u===null&&(g.J=a.o),f&&(a.i=f.G.concat(a.i)),f=_a(a,g,1e3),g.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),mi(a.h,g),pi(g,E,f)}function kr(a,f){a.H&&nn(a.H,function(g,E){st(f,E,g)}),a.l&&nn({},function(g,E){st(f,E,g)})}function _a(a,f,g){g=Math.min(a.i.length,g);const E=a.l?h(a.l.Ka,a.l,a):null;e:{var V=a.i;let Oe=-1;for(;;){const Rt=["count="+g];Oe==-1?g>0?(Oe=V[0].g,Rt.push("ofs="+Oe)):Oe=0:Rt.push("ofs="+Oe);let ze=!0;for(let lt=0;lt<g;lt++){var F=V[lt].g;const $n=V[lt].map;if(F-=Oe,F<0)Oe=Math.max(0,V[lt].g-100),ze=!1;else try{F="req"+F+"_"||"";try{var se=$n instanceof Map?$n:Object.entries($n);for(const[jn,ys]of se){let vs=ys;l(ys)&&(vs=qe(ys)),Rt.push(F+jn+"="+encodeURIComponent(vs))}}catch(jn){throw Rt.push(F+"type="+encodeURIComponent("_badmap")),jn}}catch{E&&E($n)}}if(ze){se=Rt.join("&");break e}}se=void 0}return a=a.i.splice(0,g),f.G=a,se}function ya(a){if(!a.g&&!a.v){a.Y=1;var f=a.Da;de||b(),Se||(de(),Se=!0),S.add(f,a),a.A=0}}function po(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=vr(h(a.Da,a),$c(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,go(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=vr(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,zt(10),Cr(this),go(this))};function mo(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function go(a){a.g=new Fn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var f=On(a.na);st(f,"RID","rpc"),st(f,"SID",a.M),st(f,"AID",a.K),st(f,"CI",a.F?"0":"1"),!a.F&&a.ia&&st(f,"TO",a.ia),st(f,"TYPE","xmlhttp"),kr(a,f),a.u&&a.o&&fa(f,a.u,a.o),a.O&&(a.g.H=a.O);var g=a.g;a=a.ba,g.M=1,g.A=gi(On(f)),g.u=null,g.R=!0,Vc(g,a)}t.Va=function(){this.C!=null&&(this.C=null,Cr(this),po(this),zt(19))};function wi(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Uc(a,f){var g=null;if(a.g==f){wi(a),mo(a),a.g=null;var E=2}else if(so(a.h,f))g=f.G,ro(a.h,f),E=1;else return;if(a.I!=0){if(f.o)if(E==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var V=a.D;E=js(),Z(E,new hi(E,g)),Ei(a)}else ya(a);else if(V=f.m,V==3||V==0&&f.X>0||!(E==1&&Pr(a,f)||E==2&&po(a)))switch(g&&g.length>0&&(f=a.h,f.i=f.i.concat(g)),V){case 1:ms(a,5);break;case 4:ms(a,10);break;case 3:ms(a,6);break;default:ms(a,2)}}}function $c(a,f){let g=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(g*=2),g*f}function ms(a,f){if(a.j.info("Error code "+f),f==2){var g=h(a.bb,a),E=a.Ua;const V=!E;E=new Jn(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ir(E,"https"),gi(E),V?ds(E.toString(),g):co(E.toString(),g)}else zt(2);a.I=0,a.l&&a.l.pa(f),va(a),ga(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function va(a){if(a.I=0,a.ja=[],a.l){const f=ia(a.h);(f.length!=0||a.i.length!=0)&&(L(a.ja,f),L(a.ja,a.i),a.h.i.length=0,w(a.i),a.i.length=0),a.l.oa()}}function bi(a,f,g){var E=g instanceof Jn?On(g):new Jn(g);if(E.g!="")f&&(E.g=f+"."+E.g),Ar(E,E.u);else{var V=o.location;E=V.protocol,f=f?f+"."+V.hostname:V.hostname,V=+V.port;const F=new Jn(null);E&&Ir(F,E),f&&(F.g=f),V&&Ar(F,V),g&&(F.h=g),E=F}return g=a.G,f=a.wa,g&&f&&st(E,g,f),st(E,"VER",a.ka),kr(a,E),E}function jc(a,f,g){if(f&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Aa&&!a.ma?new mt(new yi({ab:g})):new mt(a.ma),f.Fa(a.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bc(){}t=Bc.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Or(){}Or.prototype.g=function(a,f){return new cn(a,f)};function cn(a,f){te.call(this),this.g=new ma(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(a?a["X-WebChannel-Client-Profile"]=f.sa:a={"X-WebChannel-Client-Profile":f.sa}),this.g.U=a,(a=f&&f.Qb)&&!A(a)&&(this.g.u=a),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!A(f)&&(this.g.G=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new _s(this)}m(cn,te),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Ys(this.g)},cn.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var g={};g.__data__=a,a=g}else this.v&&(g={},g.__data__=qe(a),a=g);f.i.push(new Tr(f.Ya++,a)),f.I==3&&Ei(f)},cn.prototype.N=function(){this.g.l=null,delete this.j,Ys(this.g),delete this.g,cn.Z.N.call(this)};function Ea(a){yr.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){e:{for(const g in f){a=g;break e}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}m(Ea,yr);function gs(){At.call(this),this.status=1}m(gs,At);function _s(a){this.g=a}m(_s,Bc),_s.prototype.ra=function(){Z(this.g,"a")},_s.prototype.qa=function(a){Z(this.g,new Ea(a))},_s.prototype.pa=function(a){Z(this.g,new gs)},_s.prototype.oa=function(){Z(this.g,"b")},Or.prototype.createWebChannel=Or.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,Xy=function(){return new Or},Yy=function(){return js()},Qy=Dt,of={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},us.NO_ERROR=0,us.TIMEOUT=8,us.HTTP_ERROR=6,dl=us,Dc.COMPLETE="complete",Ky=Dc,Nt.EventType=sn,sn.OPEN="a",sn.CLOSE="b",sn.ERROR="c",sn.MESSAGE="d",te.prototype.listen=te.prototype.J,Oa=Nt,mt.prototype.listenOnce=mt.prototype.K,mt.prototype.getLastError=mt.prototype.Ha,mt.prototype.getLastErrorCode=mt.prototype.ya,mt.prototype.getStatus=mt.prototype.ca,mt.prototype.getResponseJson=mt.prototype.La,mt.prototype.getResponseText=mt.prototype.la,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Fa,Gy=mt}).apply(typeof tl<"u"?tl:typeof self<"u"?self:typeof window<"u"?window:{});const jm="@firebase/firestore",Bm="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=new Jf("@firebase/firestore");function Io(){return Bi.logLevel}function ue(t,...e){if(Bi.logLevel<=Fe.DEBUG){const n=e.map(td);Bi.debug(`Firestore (${Yo}): ${t}`,...n)}}function dr(t,...e){if(Bi.logLevel<=Fe.ERROR){const n=e.map(td);Bi.error(`Firestore (${Yo}): ${t}`,...n)}}function qo(t,...e){if(Bi.logLevel<=Fe.WARN){const n=e.map(td);Bi.warn(`Firestore (${Yo}): ${t}`,...n)}}function td(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Jy(t,s,n)}function Jy(t,e,n){let s=`FIRESTORE (${Yo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw dr(s),new Error(s)}function Ze(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||Jy(e,r,s)}function ke(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Fs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hn.UNAUTHENTICATED))}shutdown(){}}class oC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class aC{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ze(this.o===void 0,42304);let s=this.i;const r=u=>this.i!==s?(s=this.i,n(u)):Promise.resolve();let i=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ar,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ar)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ze(typeof s.accessToken=="string",31837,{l:s}),new Zy(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new hn(e)}}class cC{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class lC{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new cC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ze(this.o===void 0,3512);const s=i=>{i.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ue("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new qm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new qm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=hC(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Ue(t,e){return t<e?-1:t>e?1:0}function af(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return Sh(r)===Sh(i)?Ue(r,i):Sh(r)?1:-1}return Ue(t.length,e.length)}const fC=55296,dC=57343;function Sh(t){const e=t.charCodeAt(0);return e>=fC&&e<=dC}function Ho(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="__name__";class Is{constructor(e,n,s){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&we(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Is.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Is?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=Is.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Ue(e.length,n.length)}static compareSegments(e,n){const s=Is.isNumericId(e),r=Is.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Is.extractNumericId(e).compare(Is.extractNumericId(n)):af(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qr.fromString(e.substring(4,e.length-2))}}class dt extends Is{construct(e,n,s){return new dt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new le(G.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new dt(n)}static emptyPath(){return new dt([])}}const pC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Is{construct(e,n,s){return new en(e,n,s)}static isValidIdentifier(e){return pC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hm}static keyField(){return new en([Hm])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new le(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new le(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new le(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=u,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new le(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(n)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(dt.fromString(e))}static fromName(e){return new _e(dt.fromString(e).popFirst(5))}static empty(){return new _e(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t,e,n){if(!n)throw new le(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mC(t,e,n,s){if(e===!0&&s===!0)throw new le(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Wm(t){if(!_e.isDocumentKey(t))throw new le(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zm(t){if(_e.isDocumentKey(t))throw new le(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Tu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we(12329,{type:typeof t})}function qi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Tu(t);throw new le(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ec(t,e){if(!tv(t))throw new le(G.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new le(G.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm=-62135596800,Km=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Km);return new gt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Gm)throw new le(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Km}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ec(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Gm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:Lt("string",gt._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new gt(0,0))}static max(){return new Re(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=-1;function gC(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=Re.fromTimestamp(s===1e9?new gt(n+1,0):new gt(n,s));return new ei(r,_e.empty(),e)}function _C(t){return new ei(t.readTime,t.key,rc)}class ei{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ei(Re.min(),_e.empty(),rc)}static max(){return new ei(Re.max(),_e.empty(),rc)}}function yC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(t.documentKey,e.documentKey),n!==0?n:Ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==vC)throw t;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,s)=>{n(e)})}static reject(e){return new Q((n,s)=>{s(e)})}static waitFor(e){return new Q((n,s)=>{let r=0,i=0,o=!1;e.forEach(l=>{++r,l.next(()=>{++i,o&&i===r&&n()},u=>s(u))}),o=!0,i===r&&n()})}static or(e){let n=Q.resolve(!1);for(const s of e)n=n.next(r=>r?Q.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new Q((s,r)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(d=>{o[h]=d,++l,l===i&&s(o)},d=>r(d))}})}static doWhile(e,n){return new Q((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function wC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Jo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Iu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=-1;function Au(t){return t==null}function Fl(t){return t===0&&1/t==-1/0}function bC(t){return typeof t=="number"&&Number.isInteger(t)&&!Fl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="";function TC(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Qm(e)),e=IC(t.get(n),e);return Qm(e)}function IC(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case nv:n+="";break;default:n+=i}}return n}function Qm(t){return t+nv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){this.comparator=e,this.root=n||Xt.EMPTY}insert(e,n){return new yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nl(this.root,e,this.comparator,!1)}getReverseIterator(){return new nl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nl(this.root,e,this.comparator,!0)}}class nl{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Xt.RED,this.left=r??Xt.EMPTY,this.right=i??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Xt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Xt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new Xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xm(this.data.getIterator())}getIteratorFrom(e){return new Xm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ht(this.comparator);return n.data=e,n}}class Xm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new ss([])}unionWith(e){let n=new Ht(en.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new ss(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ho(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new rv("Invalid base64 string: "+i):i}}(e);return new tn(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const AC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ti(t){if(Ze(!!t,39018),typeof t=="string"){let e=0;const n=AC.exec(t);if(Ze(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ct(t.seconds),nanos:Ct(t.nanos)}}function Ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ni(t){return typeof t=="string"?tn.fromBase64String(t):tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="server_timestamp",ov="__type__",av="__previous_value__",cv="__local_write_time__";function rd(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ov])==null?void 0:s.stringValue)===iv}function Ru(t){const e=t.mapValue.fields[av];return rd(e)?Ru(e):e}function ic(t){const e=ti(t.mapValue.fields[cv].timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n,s,r,i,o,l,u,h,d){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const Ul="(default)";class oc{constructor(e,n){this.projectId=e,this.database=n||Ul}static empty(){return new oc("","")}get isDefaultDatabase(){return this.database===Ul}isEqual(e){return e instanceof oc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="__type__",SC="__max__",sl={mapValue:{}},uv="__vector__",$l="value";function si(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rd(t)?4:PC(t)?9007199254740991:CC(t)?10:11:we(28295,{value:t})}function Ls(t,e){if(t===e)return!0;const n=si(t);if(n!==si(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ic(t).isEqual(ic(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=ti(r.timestampValue),l=ti(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return ni(r.bytesValue).isEqual(ni(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Ct(r.geoPointValue.latitude)===Ct(i.geoPointValue.latitude)&&Ct(r.geoPointValue.longitude)===Ct(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ct(r.integerValue)===Ct(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Ct(r.doubleValue),l=Ct(i.doubleValue);return o===l?Fl(o)===Fl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ho(t.arrayValue.values||[],e.arrayValue.values||[],Ls);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Ym(o)!==Ym(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Ls(o[u],l[u])))return!1;return!0}(t,e);default:return we(52216,{left:t})}}function ac(t,e){return(t.values||[]).find(n=>Ls(n,e))!==void 0}function Wo(t,e){if(t===e)return 0;const n=si(t),s=si(e);if(n!==s)return Ue(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ct(i.integerValue||i.doubleValue),u=Ct(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Jm(t.timestampValue,e.timestampValue);case 4:return Jm(ic(t),ic(e));case 5:return af(t.stringValue,e.stringValue);case 6:return function(i,o){const l=ni(i),u=ni(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=Ue(l[h],u[h]);if(d!==0)return d}return Ue(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ue(Ct(i.latitude),Ct(o.latitude));return l!==0?l:Ue(Ct(i.longitude),Ct(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Zm(t.arrayValue,e.arrayValue);case 10:return function(i,o){var y,w,L,M;const l=i.fields||{},u=o.fields||{},h=(y=l[$l])==null?void 0:y.arrayValue,d=(w=u[$l])==null?void 0:w.arrayValue,m=Ue(((L=h==null?void 0:h.values)==null?void 0:L.length)||0,((M=d==null?void 0:d.values)==null?void 0:M.length)||0);return m!==0?m:Zm(h,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===sl.mapValue&&o===sl.mapValue)return 0;if(i===sl.mapValue)return 1;if(o===sl.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=o.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let m=0;m<u.length&&m<d.length;++m){const y=af(u[m],d[m]);if(y!==0)return y;const w=Wo(l[u[m]],h[d[m]]);if(w!==0)return w}return Ue(u.length,d.length)}(t.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function Jm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ue(t,e);const n=ti(t),s=ti(e),r=Ue(n.seconds,s.seconds);return r!==0?r:Ue(n.nanos,s.nanos)}function Zm(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Wo(n[r],s[r]);if(i)return i}return Ue(n.length,s.length)}function zo(t){return cf(t)}function cf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=ti(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ni(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return _e.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=cf(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${cf(n.fields[o])}`;return r+"}"}(t.mapValue):we(61005,{value:t})}function pl(t){switch(si(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ru(t);return e?16+pl(e):16;case 5:return 2*t.stringValue.length;case 6:return ni(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+pl(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return Xi(s.fields,(i,o)=>{r+=i.length+pl(o)}),r}(t.mapValue);default:throw we(13486,{value:t})}}function eg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function lf(t){return!!t&&"integerValue"in t}function id(t){return!!t&&"arrayValue"in t}function tg(t){return!!t&&"nullValue"in t}function ng(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ml(t){return!!t&&"mapValue"in t}function CC(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[lv])==null?void 0:s.stringValue)===uv}function Wa(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Xi(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Wa(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wa(t.arrayValue.values[n]);return e}return{...t}}function PC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===SC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!ml(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wa(n)}setAll(e){let n=en.emptyPath(),s={},r=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,s,r),s={},r=[],n=l.popLast()}o?s[l.lastSegment()]=Wa(o):r.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());ml(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ls(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];ml(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Xi(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new zn(Wa(this.value))}}function hv(t){const e=[];return Xi(t.fields,(n,s)=>{const r=new en([n]);if(ml(s)){const i=hv(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new ss(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n,s,r,i,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new dn(e,0,Re.min(),Re.min(),Re.min(),zn.empty(),0)}static newFoundDocument(e,n,s,r){return new dn(e,1,n,Re.min(),s,r,0)}static newNoDocument(e,n){return new dn(e,2,n,Re.min(),Re.min(),zn.empty(),0)}static newUnknownDocument(e,n){return new dn(e,3,n,Re.min(),Re.min(),zn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n){this.position=e,this.inclusive=n}}function sg(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=_e.comparator(_e.fromName(o.referenceValue),n.key):s=Wo(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function rg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ls(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n="asc"){this.field=e,this.dir=n}}function kC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{}class Vt extends fv{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new NC(e,n,s):n==="array-contains"?new VC(e,s):n==="in"?new LC(e,s):n==="not-in"?new MC(e,s):n==="array-contains-any"?new FC(e,s):new Vt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new DC(e,s):new xC(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wo(n,this.value)):n!==null&&si(this.value)===si(n)&&this.matchesComparison(Wo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cs extends fv{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new cs(e,n)}matches(e){return dv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dv(t){return t.op==="and"}function pv(t){return OC(t)&&dv(t)}function OC(t){for(const e of t.filters)if(e instanceof cs)return!1;return!0}function uf(t){if(t instanceof Vt)return t.field.canonicalString()+t.op.toString()+zo(t.value);if(pv(t))return t.filters.map(e=>uf(e)).join(",");{const e=t.filters.map(n=>uf(n)).join(",");return`${t.op}(${e})`}}function mv(t,e){return t instanceof Vt?function(s,r){return r instanceof Vt&&s.op===r.op&&s.field.isEqual(r.field)&&Ls(s.value,r.value)}(t,e):t instanceof cs?function(s,r){return r instanceof cs&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,l)=>i&&mv(o,r.filters[l]),!0):!1}(t,e):void we(19439)}function gv(t){return t instanceof Vt?function(n){return`${n.field.canonicalString()} ${n.op} ${zo(n.value)}`}(t):t instanceof cs?function(n){return n.op.toString()+" {"+n.getFilters().map(gv).join(" ,")+"}"}(t):"Filter"}class NC extends Vt{constructor(e,n,s){super(e,n,s),this.key=_e.fromName(s.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class DC extends Vt{constructor(e,n){super(e,"in",n),this.keys=_v("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class xC extends Vt{constructor(e,n){super(e,"not-in",n),this.keys=_v("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function _v(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(s=>_e.fromName(s.referenceValue))}class VC extends Vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return id(n)&&ac(n.arrayValue,this.value)}}class LC extends Vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ac(this.value.arrayValue,n)}}class MC extends Vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ac(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ac(this.value.arrayValue,n)}}class FC extends Vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!id(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>ac(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n=null,s=[],r=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function ig(t,e=null,n=[],s=[],r=null,i=null,o=null){return new UC(t,e,n,s,r,i,o)}function od(t){const e=ke(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>uf(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Au(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>zo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>zo(s)).join(",")),e.Te=n}return e.Te}function ad(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rg(t.startAt,e.startAt)&&rg(t.endAt,e.endAt)}function hf(t){return _e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n=null,s=[],r=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $C(t,e,n,s,r,i,o,l){return new wc(t,e,n,s,r,i,o,l)}function cd(t){return new wc(t)}function og(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yv(t){return t.collectionGroup!==null}function za(t){const e=ke(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ht(en.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Bl(i,s))}),n.has(en.keyField().canonicalString())||e.Ie.push(new Bl(en.keyField(),s))}return e.Ie}function Cs(t){const e=ke(t);return e.Ee||(e.Ee=jC(e,za(t))),e.Ee}function jC(t,e){if(t.limitType==="F")return ig(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new Bl(r.field,i)});const n=t.endAt?new jl(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new jl(t.startAt.position,t.startAt.inclusive):null;return ig(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function ff(t,e){const n=t.filters.concat([e]);return new wc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function df(t,e,n){return new wc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Su(t,e){return ad(Cs(t),Cs(e))&&t.limitType===e.limitType}function vv(t){return`${od(Cs(t))}|lt:${t.limitType}`}function Ao(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>gv(r)).join(", ")}]`),Au(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>zo(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>zo(r)).join(",")),`Target(${s})`}(Cs(t))}; limitType=${t.limitType})`}function Cu(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):_e.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of za(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,l,u){const h=sg(o,l,u);return o.inclusive?h<=0:h<0}(s.startAt,za(s),r)||s.endAt&&!function(o,l,u){const h=sg(o,l,u);return o.inclusive?h>=0:h>0}(s.endAt,za(s),r))}(t,e)}function BC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ev(t){return(e,n)=>{let s=!1;for(const r of za(t)){const i=qC(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function qC(t,e,n){const s=t.field.isKeyField()?_e.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?Wo(u,h):we(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return we(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Xi(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return sv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=new yt(_e.comparator);function pr(){return HC}const wv=new yt(_e.comparator);function Na(...t){let e=wv;for(const n of t)e=e.insert(n.key,n);return e}function bv(t){let e=wv;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Vi(){return Ga()}function Tv(){return Ga()}function Ga(){return new Ji(t=>t.toString(),(t,e)=>t.isEqual(e))}const WC=new yt(_e.comparator),zC=new Ht(_e.comparator);function Be(...t){let e=zC;for(const n of t)e=e.add(n);return e}const GC=new Ht(Ue);function KC(){return GC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fl(e)?"-0":e}}function Iv(t){return{integerValue:""+t}}function QC(t,e){return bC(e)?Iv(e):ld(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(){this._=void 0}}function YC(t,e,n){return t instanceof ql?function(r,i){const o={fields:{[ov]:{stringValue:iv},[cv]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&rd(i)&&(i=Ru(i)),i&&(o.fields[av]=i),{mapValue:o}}(n,e):t instanceof cc?Rv(t,e):t instanceof lc?Sv(t,e):function(r,i){const o=Av(r,i),l=ag(o)+ag(r.Ae);return lf(o)&&lf(r.Ae)?Iv(l):ld(r.serializer,l)}(t,e)}function XC(t,e,n){return t instanceof cc?Rv(t,e):t instanceof lc?Sv(t,e):n}function Av(t,e){return t instanceof Hl?function(s){return lf(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class ql extends Pu{}class cc extends Pu{constructor(e){super(),this.elements=e}}function Rv(t,e){const n=Cv(e);for(const s of t.elements)n.some(r=>Ls(r,s))||n.push(s);return{arrayValue:{values:n}}}class lc extends Pu{constructor(e){super(),this.elements=e}}function Sv(t,e){let n=Cv(e);for(const s of t.elements)n=n.filter(r=>!Ls(r,s));return{arrayValue:{values:n}}}class Hl extends Pu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function ag(t){return Ct(t.integerValue||t.doubleValue)}function Cv(t){return id(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function JC(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof cc&&r instanceof cc||s instanceof lc&&r instanceof lc?Ho(s.elements,r.elements,Ls):s instanceof Hl&&r instanceof Hl?Ls(s.Ae,r.Ae):s instanceof ql&&r instanceof ql}(t.transform,e.transform)}class ZC{constructor(e,n){this.version=e,this.transformResults=n}}class cr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ku{}function Pv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ov(t.key,cr.none()):new bc(t.key,t.data,cr.none());{const n=t.data,s=zn.empty();let r=new Ht(en.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Zi(t.key,s,new ss(r.toArray()),cr.none())}}function e0(t,e,n){t instanceof bc?function(r,i,o){const l=r.value.clone(),u=lg(r.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Zi?function(r,i,o){if(!gl(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=lg(r.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(kv(r)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ka(t,e,n,s){return t instanceof bc?function(i,o,l,u){if(!gl(i.precondition,o))return l;const h=i.value.clone(),d=ug(i.fieldTransforms,u,o);return h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,s):t instanceof Zi?function(i,o,l,u){if(!gl(i.precondition,o))return l;const h=ug(i.fieldTransforms,u,o),d=o.data;return d.setAll(kv(i)),d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,s):function(i,o,l){return gl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function t0(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=Av(s.transform,r||null);i!=null&&(n===null&&(n=zn.empty()),n.set(s.field,i))}return n||null}function cg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Ho(s,r,(i,o)=>JC(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class bc extends ku{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Zi extends ku{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function kv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function lg(t,e,n){const s=new Map;Ze(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,l=e.data.field(i.field);s.set(i.field,XC(o,l,n[r]))}return s}function ug(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,YC(i,o,e))}return s}class Ov extends ku{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n0 extends ku{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&e0(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ka(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ka(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Tv();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(r.key)?null:l;const u=Pv(o,l);u!==null&&s.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(Re.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Be())}isEqual(e){return this.batchId===e.batchId&&Ho(this.mutations,e.mutations,(n,s)=>cg(n,s))&&Ho(this.baseMutations,e.baseMutations,(n,s)=>cg(n,s))}}class ud{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Ze(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return WC}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new ud(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,Ge;function o0(t){switch(t){case G.OK:return we(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return we(15467,{code:t})}}function Nv(t){if(t===void 0)return dr("GRPC error has no .code"),G.UNKNOWN;switch(t){case xt.OK:return G.OK;case xt.CANCELLED:return G.CANCELLED;case xt.UNKNOWN:return G.UNKNOWN;case xt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case xt.INTERNAL:return G.INTERNAL;case xt.UNAVAILABLE:return G.UNAVAILABLE;case xt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case xt.NOT_FOUND:return G.NOT_FOUND;case xt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case xt.ABORTED:return G.ABORTED;case xt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case xt.DATA_LOSS:return G.DATA_LOSS;default:return we(39323,{code:t})}}(Ge=xt||(xt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=new Qr([4294967295,4294967295],0);function hg(t){const e=a0().encode(t),n=new zy;return n.update(e),new Uint8Array(n.digest())}function fg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Qr([n,s],0),new Qr([r,i],0)]}class hd{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Da(`Invalid padding: ${n}`);if(s<0)throw new Da(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Da(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Da(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Qr.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(Qr.fromNumber(s)));return r.compare(c0)===1&&(r=new Qr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=hg(e),[s,r]=fg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new hd(i,r,n);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=hg(e),[s,r]=fg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Da extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,Tc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Ou(Re.min(),r,new yt(Ue),pr(),Be())}}class Tc{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Tc(s,n,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class Dv{constructor(e,n){this.targetId=e,this.Ce=n}}class xv{constructor(e,n,s=tn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class dg{constructor(){this.ve=0,this.Fe=pg(),this.Me=tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),n=Be(),s=Be();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:we(38017,{changeType:i})}}),new Tc(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=pg()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class l0{constructor(e){this.Ge=e,this.ze=new Map,this.je=pr(),this.Je=rl(),this.He=rl(),this.Ye=new yt(Ue)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(hf(i))if(s===0){const o=new _e(i.path);this.et(n,o,dn.newNoDocument(o,Re.min()))}else Ze(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,l;try{o=ni(s).toUint8Array()}catch(u){if(u instanceof rv)return qo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new hd(o,r,i)}catch(u){return qo(u instanceof Da?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&hf(l.target)){const u=new _e(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,dn.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=Be();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new Ou(e,n,this.Ye,this.je,s);return this.je=pr(),this.Je=rl(),this.He=rl(),this.Ye=new yt(Ue),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new dg,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ht(Ue),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ht(Ue),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new dg),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function rl(){return new yt(_e.comparator)}function pg(){return new yt(_e.comparator)}const u0={asc:"ASCENDING",desc:"DESCENDING"},h0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},f0={and:"AND",or:"OR"};class d0{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function pf(t,e){return t.useProto3Json||Au(e)?e:{value:e}}function Wl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function p0(t,e){return Wl(t,e.toTimestamp())}function Ps(t){return Ze(!!t,49232),Re.fromTimestamp(function(n){const s=ti(n);return new gt(s.seconds,s.nanos)}(t))}function fd(t,e){return mf(t,e).canonicalString()}function mf(t,e){const n=function(r){return new dt(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Lv(t){const e=dt.fromString(t);return Ze(jv(e),10190,{key:e.toString()}),e}function gf(t,e){return fd(t.databaseId,e.path)}function Ch(t,e){const n=Lv(e);if(n.get(1)!==t.databaseId.projectId)throw new le(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new le(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new _e(Fv(n))}function Mv(t,e){return fd(t.databaseId,e)}function m0(t){const e=Lv(t);return e.length===4?dt.emptyPath():Fv(e)}function _f(t){return new dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Fv(t){return Ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function mg(t,e,n){return{name:gf(t,e),fields:n.value.mapValue.fields}}function g0(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:we(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(h,d){return h.useProto3Json?(Ze(d===void 0||typeof d=="string",58123),tn.fromBase64String(d||"")):(Ze(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),tn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const d=h.code===void 0?G.UNKNOWN:Nv(h.code);return new le(d,h.message||"")}(o);n=new xv(s,r,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Ch(t,s.document.name),i=Ps(s.document.updateTime),o=s.document.createTime?Ps(s.document.createTime):Re.min(),l=new zn({mapValue:{fields:s.document.fields}}),u=dn.newFoundDocument(r,i,o,l),h=s.targetIds||[],d=s.removedTargetIds||[];n=new _l(h,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Ch(t,s.document),i=s.readTime?Ps(s.readTime):Re.min(),o=dn.newNoDocument(r,i),l=s.removedTargetIds||[];n=new _l([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Ch(t,s.document),i=s.removedTargetIds||[];n=new _l([],i,r,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new i0(r,i),l=s.targetId;n=new Dv(l,o)}}return n}function _0(t,e){let n;if(e instanceof bc)n={update:mg(t,e.key,e.value)};else if(e instanceof Ov)n={delete:gf(t,e.key)};else if(e instanceof Zi)n={update:mg(t,e.key,e.data),updateMask:R0(e.fieldMask)};else{if(!(e instanceof n0))return we(16599,{Vt:e.type});n={verify:gf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const l=o.transform;if(l instanceof ql)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof cc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof lc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Hl)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw we(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:p0(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:we(27497)}(t,e.precondition)),n}function y0(t,e){return t&&t.length>0?(Ze(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?Ps(r.updateTime):Ps(i);return o.isEqual(Re.min())&&(o=Ps(i)),new ZC(o,r.transformResults||[])}(n,e))):[]}function v0(t,e){return{documents:[Mv(t,e.path)]}}function E0(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Mv(t,r);const i=function(h){if(h.length!==0)return $v(cs.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(d=>function(y){return{field:Ro(y.field),direction:T0(y.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=pf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:r}}function w0(t){let e=m0(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Ze(s===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(m){const y=Uv(m);return y instanceof cs&&pv(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(y=>function(L){return new Bl(So(L.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(m){let y;return y=typeof m=="object"?m.value:m,Au(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(m){const y=!!m.before,w=m.values||[];return new jl(w,y)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const y=!m.before,w=m.values||[];return new jl(w,y)}(n.endAt)),$C(e,r,o,i,l,"F",u,h)}function b0(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Uv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=So(n.unaryFilter.field);return Vt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=So(n.unaryFilter.field);return Vt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=So(n.unaryFilter.field);return Vt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=So(n.unaryFilter.field);return Vt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(t):t.fieldFilter!==void 0?function(n){return Vt.create(So(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return cs.create(n.compositeFilter.filters.map(s=>Uv(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(n.compositeFilter.op))}(t):we(30097,{filter:t})}function T0(t){return u0[t]}function I0(t){return h0[t]}function A0(t){return f0[t]}function Ro(t){return{fieldPath:t.canonicalString()}}function So(t){return en.fromServerFormat(t.fieldPath)}function $v(t){return t instanceof Vt?function(n){if(n.op==="=="){if(ng(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NAN"}};if(tg(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ng(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NAN"}};if(tg(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(n.field),op:I0(n.op),value:n.value}}}(t):t instanceof cs?function(n){const s=n.getFilters().map(r=>$v(r));return s.length===1?s[0]:{compositeFilter:{op:A0(n.op),filters:s}}}(t):we(54877,{filter:t})}function R0(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n,s,r,i=Re.min(),o=Re.min(),l=tn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e){this.yt=e}}function C0(t){const e=w0({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?df(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.Cn=new k0}addToCollectionParentIndex(e,n){return this.Cn.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(ei.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(ei.min())}updateCollectionGroup(e,n,s){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class k0{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Ht(dt.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Ht(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bv=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(Bv,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Go(0)}static cr(){return new Go(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="LruGarbageCollector",O0=1048576;function yg([t,e],[n,s]){const r=Ue(t,n);return r===0?Ue(e,s):r}class N0{constructor(e){this.Ir=e,this.buffer=new Ht(yg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();yg(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class D0{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(_g,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Jo(n)?ue(_g,"Ignoring IndexedDB error during garbage collection: ",n):await Xo(n)}await this.Vr(3e5)})}}class x0{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return Q.resolve(Iu.ce);const s=new N0(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(gg)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gg):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,l,u,h;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),r=this.params.maximumSequenceNumbersToCollect):r=m,o=Date.now(),this.nthSequenceNumber(e,r))).next(m=>(s=m,l=Date.now(),this.removeTargets(e,s,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,s))).next(m=>(h=Date.now(),Io()<=Fe.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:m})))}}function V0(t,e){return new x0(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(){this.changes=new Ji(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?Q.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&Ka(s.mutation,r,ss.empty(),gt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Be()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Be()){const r=Vi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=Na();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=Vi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Be()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,s,r){let i=pr();const o=Ga(),l=function(){return Ga()}();return n.forEach((u,h)=>{const d=s.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof Zi)?i=i.insert(h.key,h):d!==void 0?(o.set(h.key,d.mutation.getFieldMask()),Ka(d.mutation,h,d.mutation.getFieldMask(),gt.now())):o.set(h.key,ss.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,d)=>o.set(h,d)),n.forEach((h,d)=>l.set(h,new M0(d,o.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const s=Ga();let r=new yt((o,l)=>o-l),i=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=s.get(u)||ss.empty();d=l.applyToLocalView(h,d),s.set(u,d);const m=(r.get(l.batchId)||Be()).add(u);r=r.insert(l.batchId,m)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,m=Tv();d.forEach(y=>{if(!i.has(y)){const w=Pv(n.get(y),s.get(y));w!==null&&m.set(y,w),i=i.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return Q.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return _e.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):Q.resolve(Vi());let l=rc,u=i;return o.next(h=>Q.forEach(h,(d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(d)?Q.resolve():this.remoteDocumentCache.getEntry(e,d).next(y=>{u=u.insert(d,y)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,Be())).next(d=>({batchId:l,changes:bv(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next(s=>{let r=Na();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=Na();return this.indexManager.getCollectionParents(e,i).next(l=>Q.forEach(l,u=>{const h=function(m,y){return new wc(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,s,r).next(d=>{d.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((u,h)=>{const d=h.getKey();o.get(d)===null&&(o=o.insert(d,dn.newInvalidDocument(d)))});let l=Na();return o.forEach((u,h)=>{const d=i.get(u);d!==void 0&&Ka(d.mutation,h,ss.empty(),gt.now()),Cu(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Ps(r.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:C0(r.bundledQuery),readTime:Ps(r.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(){this.overlays=new yt(_e.comparator),this.qr=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Vi();return Q.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),Q.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),Q.resolve()}getOverlaysForCollection(e,n,s){const r=Vi(),i=n.length+1,o=new _e(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>s&&r.set(u.getKey(),u)}return Q.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new yt((h,d)=>h-d);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>s){let d=i.get(h.largestBatchId);d===null&&(d=Vi(),i=i.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Vi(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return Q.resolve(l)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new r0(n,s));let i=this.qr.get(n);i===void 0&&(i=Be(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(){this.Qr=new Ht(Qt.$r),this.Ur=new Ht(Qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Qt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new Qt(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new _e(new dt([])),s=new Qt(n,e),r=new Qt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new _e(new dt([])),s=new Qt(n,e),r=new Qt(n,e+1);let i=Be();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Qt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Qt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return _e.comparator(e.key,n.key)||Ue(e.Yr,n.Yr)}static Kr(e,n){return Ue(e.Yr,n.Yr)||_e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ht(Qt.$r)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new s0(i,n,s,r);this.mutationQueue.push(o);for(const l of r)this.Zr=this.Zr.add(new Qt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Q.resolve(o)}lookupMutationBatch(e,n){return Q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return Q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?sd:this.tr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Qt(n,0),r=new Qt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const l=this.Xr(o.Yr);i.push(l)}),Q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ht(Ue);return n.forEach(r=>{const i=new Qt(r,0),o=new Qt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{s=s.add(l.Yr)})}),Q.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;_e.isDocumentKey(i)||(i=i.child(""));const o=new Qt(new _e(i),0);let l=new Ht(Ue);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!s.isPrefixOf(h)&&(h.length===r&&(l=l.add(u.Yr)),!0)},o),Q.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Q.forEach(n.mutations,r=>{const i=new Qt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new Qt(n,0),r=this.Zr.firstAfterOrEqual(s);return Q.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e){this.ri=e,this.docs=function(){return new yt(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return Q.resolve(s?s.document.mutableCopy():dn.newInvalidDocument(n))}getEntries(e,n){let s=pr();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():dn.newInvalidDocument(r))}),Q.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=pr();const o=n.path,l=new _e(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||yC(_C(d),s)<=0||(r.has(d.key)||Cu(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return Q.resolve(i)}getAllFromCollectionGroup(e,n,s,r){we(9500)}ii(e,n){return Q.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new H0(this)}getSize(e){return Q.resolve(this.size)}}class H0 extends L0{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),Q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e){this.persistence=e,this.si=new Ji(n=>od(n),ad),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new dd,this.targetCount=0,this.ai=Go.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),Q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Go(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Pr(n),Q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),Q.waitFor(i).next(()=>r)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return Q.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),Q.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),Q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return Q.resolve(s)}containsKey(e,n){return Q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,n){this.ui={},this.overlays={},this.ci=new Iu(0),this.li=!1,this.li=!0,this.hi=new j0,this.referenceDelegate=e(this),this.Pi=new W0(this),this.indexManager=new P0,this.remoteDocumentCache=function(r){return new q0(r)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new S0(n),this.Ii=new U0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $0,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new B0(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){ue("MemoryPersistence","Starting transaction:",e);const r=new z0(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return Q.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class z0 extends EC{constructor(e){super(),this.currentSequenceNumber=e}}class pd{constructor(e){this.persistence=e,this.Ri=new dd,this.Vi=null}static mi(e){return new pd(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),Q.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,s=>{const r=_e.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,Re.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Q.or([()=>Q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class zl{constructor(e,n){this.persistence=e,this.pi=new Ji(s=>TC(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=V0(this,n)}static mi(e,n){return new zl(e,n)}Ei(){}di(e){return Q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return Q.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?Q.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(l=>{l||(s++,i.removeEntry(o,Re.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Q.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),Q.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=pl(e.data.value)),n}br(e,n,s){return Q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return Q.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Be(),r=Be();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new md(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return UR()?8:wC(gn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new G0;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(Io()<=Fe.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Ao(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(Io()<=Fe.DEBUG&&ue("QueryEngine","Query:",Ao(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Io()<=Fe.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Ao(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cs(n))):Q.resolve())}ys(e,n){if(og(n))return Q.resolve(null);let s=Cs(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=df(n,null,"F"),s=Cs(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=Be(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,o,u.readTime)?this.ys(e,df(n,null,"F")):this.vs(e,h,n,u)}))})))}ws(e,n,s,r){return og(n)||r.isEqual(Re.min())?Q.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?Q.resolve(null):(Io()<=Fe.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ao(n)),this.vs(e,o,n,gC(r,rc)).next(l=>l))})}Ds(e,n){let s=new Ht(Ev(e));return n.forEach((r,i)=>{Cu(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return Io()<=Fe.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Ao(n)),this.ps.getDocumentsMatchingQuery(e,n,ei.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd="LocalStore",Q0=3e8;class Y0{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new yt(Ue),this.xs=new Ji(i=>od(i),ad),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new F0(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function X0(t,e,n,s){return new Y0(t,e,n,s)}async function Hv(t,e){const n=ke(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],l=[];let u=Be();for(const h of r){o.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of i){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(s,u).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:l}))})})}function J0(t,e){const n=ke(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const m=h.batch,y=m.keys();let w=Q.resolve();return y.forEach(L=>{w=w.next(()=>d.getEntry(u,L)).next(M=>{const U=h.docVersions.get(L);Ze(U!==null,48541),M.version.compareTo(U)<0&&(m.applyToRemoteDocument(M,h),M.isValidDocument()&&(M.setReadTime(h.commitVersion),d.addEntry(M)))})}),w.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let u=Be();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function Wv(t){const e=ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Z0(t,e){const n=ke(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];e.targetChanges.forEach((d,m)=>{const y=r.get(m);if(!y)return;l.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,m)));let w=y.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?w=w.withResumeToken(tn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):d.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(d.resumeToken,s)),r=r.insert(m,w),function(M,U,Y){return M.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=Q0?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(y,w,d)&&l.push(n.Pi.updateTargetData(i,w))});let u=pr(),h=Be();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(eP(i,o,e.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!s.isEqual(Re.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(d)}return Q.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.Ms=r,i))}function eP(t,e,n){let s=Be(),r=Be();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=pr();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(Re.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):ue(gd,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:o,qs:r}})}function tP(t,e){const n=ke(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=sd),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function nP(t,e){const n=ke(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,Q.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new Hr(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function yf(t,e,n){const s=ke(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Jo(o))throw o;ue(gd,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function vg(t,e,n){const s=ke(t);let r=Re.min(),i=Be();return s.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,d){const m=ke(u),y=m.xs.get(d);return y!==void 0?Q.resolve(m.Ms.get(y)):m.Pi.getTargetData(h,d)}(s,o,Cs(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:Re.min(),n?i:Be())).next(l=>(sP(s,BC(e),l),{documents:l,Qs:i})))}function sP(t,e,n){let s=t.Os.get(e)||Re.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class Eg{constructor(){this.activeTargetIds=KC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rP{constructor(){this.Mo=new Eg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Eg,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="ConnectivityMonitor";class bg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(wg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(wg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let il=null;function vf(){return il===null?il=function(){return 268435456+Math.round(2147483648*Math.random())}():il++,"0x"+il.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph="RestConnection",oP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===Ul?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=vf(),l=this.zo(e,n.toUriEncodedString());ue(Ph,`Sending RPC '${e}' ${o}:`,l,s);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,i);const{host:h}=new URL(l),d=Qi(h);return this.Jo(e,l,u,s,d).then(m=>(ue(Ph,`Received RPC '${e}' ${o}: `,m),m),m=>{throw qo(Ph,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",s),m})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=oP[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class lP extends aP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=vf();return new Promise((l,u)=>{const h=new Gy;h.setWithCredentials(!0),h.listenOnce(Ky.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case dl.NO_ERROR:const m=h.getResponseJson();ue(ln,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case dl.TIMEOUT:ue(ln,`RPC '${e}' ${o} timed out`),u(new le(G.DEADLINE_EXCEEDED,"Request time out"));break;case dl.HTTP_ERROR:const y=h.getStatus();if(ue(ln,`RPC '${e}' ${o} failed with status:`,y,"response text:",h.getResponseText()),y>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const L=w==null?void 0:w.error;if(L&&L.status&&L.message){const M=function(Y){const K=Y.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(K)>=0?K:G.UNKNOWN}(L.status);u(new le(M,L.message))}else u(new le(G.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new le(G.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ue(ln,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(r);ue(ln,`RPC '${e}' ${o} sending request:`,r),h.send(n,"POST",d,s,15)})}T_(e,n,s){const r=vf(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Xy(),l=Yy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,s),u.encodeInitMessageHeaders=!0;const d=i.join("");ue(ln,`Creating RPC '${e}' stream ${r}: ${d}`,u);const m=o.createWebChannel(d,u);this.I_(m);let y=!1,w=!1;const L=new cP({Yo:U=>{w?ue(ln,`Not sending because RPC '${e}' stream ${r} is closed:`,U):(y||(ue(ln,`Opening RPC '${e}' stream ${r} transport.`),m.open(),y=!0),ue(ln,`RPC '${e}' stream ${r} sending:`,U),m.send(U))},Zo:()=>m.close()}),M=(U,Y,K)=>{U.listen(Y,X=>{try{K(X)}catch(ne){setTimeout(()=>{throw ne},0)}})};return M(m,Oa.EventType.OPEN,()=>{w||(ue(ln,`RPC '${e}' stream ${r} transport opened.`),L.o_())}),M(m,Oa.EventType.CLOSE,()=>{w||(w=!0,ue(ln,`RPC '${e}' stream ${r} transport closed`),L.a_(),this.E_(m))}),M(m,Oa.EventType.ERROR,U=>{w||(w=!0,qo(ln,`RPC '${e}' stream ${r} transport errored. Name:`,U.name,"Message:",U.message),L.a_(new le(G.UNAVAILABLE,"The operation could not be completed")))}),M(m,Oa.EventType.MESSAGE,U=>{var Y;if(!w){const K=U.data[0];Ze(!!K,16349);const X=K,ne=(X==null?void 0:X.error)||((Y=X[0])==null?void 0:Y.error);if(ne){ue(ln,`RPC '${e}' stream ${r} received error:`,ne);const de=ne.status;let Se=function(T){const P=xt[T];if(P!==void 0)return Nv(P)}(de),S=ne.message;Se===void 0&&(Se=G.INTERNAL,S="Unknown error status: "+de+" with message "+ne.message),w=!0,L.a_(new le(Se,S)),m.close()}else ue(ln,`RPC '${e}' stream ${r} received:`,K),L.u_(K)}}),M(l,Qy.STAT_EVENT,U=>{U.stat===of.PROXY?ue(ln,`RPC '${e}' stream ${r} detected buffering proxy`):U.stat===of.NOPROXY&&ue(ln,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{L.__()},0),L}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function kh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(t){return new d0(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&ue("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="PersistentStream";class Gv{constructor(e,n,s,r,i,o,l,u){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new zv(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(dr(n.toString()),dr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new le(G.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ue(Tg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ue(Tg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uP extends Gv{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=g0(this.serializer,e),s=function(i){if(!("targetChange"in i))return Re.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Re.min():o.readTime?Ps(o.readTime):Re.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=_f(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=hf(u)?{documents:v0(i,u)}:{query:E0(i,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Vv(i,o.resumeToken);const h=pf(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(Re.min())>0){l.readTime=Wl(i,o.snapshotVersion.toTimestamp());const h=pf(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const s=b0(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=_f(this.serializer),n.removeTarget=e,this.q_(n)}}class hP extends Gv{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=y0(e.writeResults,e.commitTime),s=Ps(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=_f(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>_0(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{}class dP extends fP{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new le(G.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,mf(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new le(G.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,mf(n,s),r,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(G.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class pP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(dr(n),this.aa=!1):ue("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi="RemoteStore";class mP{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{eo(this)&&(ue(Hi,"Restarting streams for network reachability change."),await async function(u){const h=ke(u);h.Ea.add(4),await Ic(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Du(h)}(this))})}),this.Ra=new pP(s,r)}}async function Du(t){if(eo(t))for(const e of t.da)await e(!0)}async function Ic(t){for(const e of t.da)await e(!1)}function Kv(t,e){const n=ke(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ed(n)?vd(n):Zo(n).O_()&&yd(n,e))}function _d(t,e){const n=ke(t),s=Zo(n);n.Ia.delete(e),s.O_()&&Qv(n,e),n.Ia.size===0&&(s.O_()?s.L_():eo(n)&&n.Ra.set("Unknown"))}function yd(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zo(t).Y_(e)}function Qv(t,e){t.Va.Ue(e),Zo(t).Z_(e)}function vd(t){t.Va=new l0({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Zo(t).start(),t.Ra.ua()}function Ed(t){return eo(t)&&!Zo(t).x_()&&t.Ia.size>0}function eo(t){return ke(t).Ea.size===0}function Yv(t){t.Va=void 0}async function gP(t){t.Ra.set("Online")}async function _P(t){t.Ia.forEach((e,n)=>{yd(t,e)})}async function yP(t,e){Yv(t),Ed(t)?(t.Ra.ha(e),vd(t)):t.Ra.set("Unknown")}async function vP(t,e,n){if(t.Ra.set("Online"),e instanceof xv&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Ia.delete(l),r.Va.removeTarget(l))}(t,e)}catch(s){ue(Hi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Gl(t,s)}else if(e instanceof _l?t.Va.Ze(e):e instanceof Dv?t.Va.st(e):t.Va.tt(e),!n.isEqual(Re.min()))try{const s=await Wv(t.localStore);n.compareTo(s)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.Ia.get(h);d&&i.Ia.set(h,d.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const d=i.Ia.get(u);if(!d)return;i.Ia.set(u,d.withResumeToken(tn.EMPTY_BYTE_STRING,d.snapshotVersion)),Qv(i,u);const m=new Hr(d.target,u,h,d.sequenceNumber);yd(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){ue(Hi,"Failed to raise snapshot:",s),await Gl(t,s)}}async function Gl(t,e,n){if(!Jo(e))throw e;t.Ea.add(1),await Ic(t),t.Ra.set("Offline"),n||(n=()=>Wv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ue(Hi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Du(t)})}function Xv(t,e){return e().catch(n=>Gl(t,n,e))}async function xu(t){const e=ke(t),n=ri(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:sd;for(;EP(e);)try{const r=await tP(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,wP(e,r)}catch(r){await Gl(e,r)}Jv(e)&&Zv(e)}function EP(t){return eo(t)&&t.Ta.length<10}function wP(t,e){t.Ta.push(e);const n=ri(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Jv(t){return eo(t)&&!ri(t).x_()&&t.Ta.length>0}function Zv(t){ri(t).start()}async function bP(t){ri(t).ra()}async function TP(t){const e=ri(t);for(const n of t.Ta)e.ea(n.mutations)}async function IP(t,e,n){const s=t.Ta.shift(),r=ud.from(s,e,n);await Xv(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await xu(t)}async function AP(t,e){e&&ri(t).X_&&await async function(s,r){if(function(o){return o0(o)&&o!==G.ABORTED}(r.code)){const i=s.Ta.shift();ri(s).B_(),await Xv(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await xu(s)}}(t,e),Jv(t)&&Zv(t)}async function Ig(t,e){const n=ke(t);n.asyncQueue.verifyOperationInProgress(),ue(Hi,"RemoteStore received new credentials");const s=eo(n);n.Ea.add(3),await Ic(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Du(n)}async function RP(t,e){const n=ke(t);e?(n.Ea.delete(2),await Du(n)):e||(n.Ea.add(2),await Ic(n),n.Ra.set("Unknown"))}function Zo(t){return t.ma||(t.ma=function(n,s,r){const i=ke(n);return i.sa(),new uP(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:gP.bind(null,t),t_:_P.bind(null,t),r_:yP.bind(null,t),H_:vP.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Ed(t)?vd(t):t.Ra.set("Unknown")):(await t.ma.stop(),Yv(t))})),t.ma}function ri(t){return t.fa||(t.fa=function(n,s,r){const i=ke(n);return i.sa(),new hP(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:bP.bind(null,t),r_:AP.bind(null,t),ta:TP.bind(null,t),na:IP.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await xu(t)):(await t.fa.stop(),t.Ta.length>0&&(ue(Hi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,l=new wd(e,n,o,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bd(t,e){if(dr("AsyncQueue",`${e}: ${t}`),Jo(t))return new le(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{static emptySet(e){return new Vo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||_e.comparator(n.key,s.key):(n,s)=>_e.comparator(n.key,s.key),this.keyedMap=Na(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Vo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(){this.ga=new yt(_e.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class Ko{constructor(e,n,s,r,i,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ko(e,n,Vo.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Su(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class CP{constructor(){this.queries=Rg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=ke(n),i=r.queries;r.queries=Rg(),i.forEach((o,l)=>{for(const u of l.Sa)u.onError(s)})})(this,new le(G.ABORTED,"Firestore shutting down"))}}function Rg(){return new Ji(t=>vv(t),Su)}async function eE(t,e){const n=ke(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new SP,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=bd(o,`Initialization of query '${Ao(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Td(n)}async function tE(t,e){const n=ke(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function PP(t,e){const n=ke(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(r)&&(s=!0);o.wa=r}}s&&Td(n)}function kP(t,e,n){const s=ke(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function Td(t){t.Ca.forEach(e=>{e.next()})}var Ef,Sg;(Sg=Ef||(Ef={})).Ma="default",Sg.Cache="cache";class nE{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Ko(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ef.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e){this.key=e}}class rE{constructor(e){this.key=e}}class OP{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=Ev(e),this.tu=new Vo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new Ag,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,m)=>{const y=r.get(d),w=Cu(this.query,m)?m:null,L=!!y&&this.mutatedKeys.has(y.key),M=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let U=!1;y&&w?y.data.isEqual(w.data)?L!==M&&(s.track({type:3,doc:w}),U=!0):this.su(y,w)||(s.track({type:2,doc:w}),U=!0,(u&&this.eu(w,u)>0||h&&this.eu(w,h)<0)&&(l=!0)):!y&&w?(s.track({type:0,doc:w}),U=!0):y&&!w&&(s.track({type:1,doc:y}),U=!0,(u||h)&&(l=!0)),U&&(w?(o=o.add(w),i=M?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),s.track({type:1,doc:d})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,m)=>function(w,L){const M=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:U})}};return M(w)-M(L)}(d.type,m.type)||this.eu(d.doc,m.doc)),this.ou(s),r=r??!1;const l=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,h=u!==this.Za;return this.Za=u,o.length!==0||h?{snapshot:new Ko(this.query,e.tu,i,o,e.mutatedKeys,u===0,h,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ag,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new rE(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new sE(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=Be();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ko.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Id="SyncEngine";class NP{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class DP{constructor(e){this.key=e,this.hu=!1}}class xP{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ji(l=>vv(l),Su),this.Iu=new Map,this.Eu=new Set,this.du=new yt(_e.comparator),this.Au=new Map,this.Ru=new dd,this.Vu={},this.mu=new Map,this.fu=Go.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function VP(t,e,n=!0){const s=uE(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await iE(s,e,n,!0),r}async function LP(t,e){const n=uE(t);await iE(n,e,!0,!1)}async function iE(t,e,n,s){const r=await nP(t.localStore,Cs(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await MP(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&Kv(t.remoteStore,r),l}async function MP(t,e,n,s,r){t.pu=(m,y,w)=>async function(M,U,Y,K){let X=U.view.ru(Y);X.Cs&&(X=await vg(M.localStore,U.query,!1).then(({documents:S})=>U.view.ru(S,X)));const ne=K&&K.targetChanges.get(U.targetId),de=K&&K.targetMismatches.get(U.targetId)!=null,Se=U.view.applyChanges(X,M.isPrimaryClient,ne,de);return Pg(M,U.targetId,Se.au),Se.snapshot}(t,m,y,w);const i=await vg(t.localStore,e,!0),o=new OP(e,i.Qs),l=o.ru(i.documents),u=Tc.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),h=o.applyChanges(l,t.isPrimaryClient,u);Pg(t,n,h.au);const d=new NP(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function FP(t,e,n){const s=ke(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!Su(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await yf(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&_d(s.remoteStore,r.targetId),wf(s,r.targetId)}).catch(Xo)):(wf(s,r.targetId),await yf(s.localStore,r.targetId,!0))}async function UP(t,e){const n=ke(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),_d(n.remoteStore,s.targetId))}async function $P(t,e,n){const s=GP(t);try{const r=await function(o,l){const u=ke(o),h=gt.now(),d=l.reduce((w,L)=>w.add(L.key),Be());let m,y;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let L=pr(),M=Be();return u.Ns.getEntries(w,d).next(U=>{L=U,L.forEach((Y,K)=>{K.isValidDocument()||(M=M.add(Y))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,L)).next(U=>{m=U;const Y=[];for(const K of l){const X=t0(K,m.get(K.key).overlayedDocument);X!=null&&Y.push(new Zi(K.key,X,hv(X.value.mapValue),cr.exists(!0)))}return u.mutationQueue.addMutationBatch(w,h,Y,l)}).next(U=>{y=U;const Y=U.applyToLocalDocumentSet(m,M);return u.documentOverlayCache.saveOverlays(w,U.batchId,Y)})}).then(()=>({batchId:y.batchId,changes:bv(m)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,l,u){let h=o.Vu[o.currentUser.toKey()];h||(h=new yt(Ue)),h=h.insert(l,u),o.Vu[o.currentUser.toKey()]=h}(s,r.batchId,n),await Ac(s,r.changes),await xu(s.remoteStore)}catch(r){const i=bd(r,"Failed to persist write");n.reject(i)}}async function oE(t,e){const n=ke(t);try{const s=await Z0(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(Ze(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Ze(o.hu,14607):r.removedDocuments.size>0&&(Ze(o.hu,42227),o.hu=!1))}),await Ac(n,s,e)}catch(s){await Xo(s)}}function Cg(t,e,n){const s=ke(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&r.push(l.snapshot)}),function(o,l){const u=ke(o);u.onlineState=l;let h=!1;u.queries.forEach((d,m)=>{for(const y of m.Sa)y.va(l)&&(h=!0)}),h&&Td(u)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function jP(t,e,n){const s=ke(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new yt(_e.comparator);o=o.insert(i,dn.newNoDocument(i,Re.min()));const l=Be().add(i),u=new Ou(Re.min(),new Map,new yt(Ue),o,l);await oE(s,u),s.du=s.du.remove(i),s.Au.delete(e),Ad(s)}else await yf(s.localStore,e,!1).then(()=>wf(s,e,n)).catch(Xo)}async function BP(t,e){const n=ke(t),s=e.batch.batchId;try{const r=await J0(n.localStore,e);cE(n,s,null),aE(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Ac(n,r)}catch(r){await Xo(r)}}async function qP(t,e,n){const s=ke(t);try{const r=await function(o,l){const u=ke(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(m=>(Ze(m!==null,37113),d=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(s.localStore,e);cE(s,e,n),aE(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Ac(s,r)}catch(r){await Xo(r)}}function aE(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function cE(t,e,n){const s=ke(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function wf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||lE(t,s)})}function lE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(_d(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Ad(t))}function Pg(t,e,n){for(const s of n)s instanceof sE?(t.Ru.addReference(s.key,e),HP(t,s)):s instanceof rE?(ue(Id,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||lE(t,s.key)):we(19791,{wu:s})}function HP(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(ue(Id,"New document in limbo: "+n),t.Eu.add(s),Ad(t))}function Ad(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new _e(dt.fromString(e)),s=t.fu.next();t.Au.set(s,new DP(n)),t.du=t.du.insert(n,s),Kv(t.remoteStore,new Hr(Cs(cd(n.path)),s,"TargetPurposeLimboResolution",Iu.ce))}}async function Ac(t,e,n){const s=ke(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((l,u)=>{o.push(s.pu(u,e,n).then(h=>{var d;if((h||n)&&s.isPrimaryClient){const m=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;s.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){r.push(h);const m=md.As(u.targetId,h);i.push(m)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(u,h){const d=ke(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>Q.forEach(h,y=>Q.forEach(y.Es,w=>d.persistence.referenceDelegate.addReference(m,y.targetId,w)).next(()=>Q.forEach(y.ds,w=>d.persistence.referenceDelegate.removeReference(m,y.targetId,w)))))}catch(m){if(!Jo(m))throw m;ue(gd,"Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const w=d.Ms.get(y),L=w.snapshotVersion,M=w.withLastLimboFreeSnapshotVersion(L);d.Ms=d.Ms.insert(y,M)}}}(s.localStore,i))}async function WP(t,e){const n=ke(t);if(!n.currentUser.isEqual(e)){ue(Id,"User change. New user:",e.toKey());const s=await Hv(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new le(G.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ac(n,s.Ls)}}function zP(t,e){const n=ke(t),s=n.Au.get(e);if(s&&s.hu)return Be().add(s.key);{let r=Be();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const l=n.Tu.get(o);r=r.unionWith(l.view.nu)}return r}}function uE(t){const e=ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=oE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jP.bind(null,e),e.Pu.H_=PP.bind(null,e.eventManager),e.Pu.yu=kP.bind(null,e.eventManager),e}function GP(t){const e=ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qP.bind(null,e),e}class Kl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return X0(this.persistence,new K0,e.initialUser,this.serializer)}Cu(e){return new qv(pd.mi,this.serializer)}Du(e){return new rP}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kl.provider={build:()=>new Kl};class KP extends Kl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ze(this.persistence.referenceDelegate instanceof zl,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new D0(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new qv(s=>zl.mi(s,n),this.serializer)}}class bf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Cg(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=WP.bind(null,this.syncEngine),await RP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new CP}()}createDatastore(e){const n=Nu(e.databaseInfo.databaseId),s=function(i){return new lP(i)}(e.databaseInfo);return function(i,o,l,u){return new dP(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,l){return new mP(s,r,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Cg(this.syncEngine,n,0),function(){return bg.v()?new bg:new iP}())}createSyncEngine(e,n){return function(r,i,o,l,u,h,d){const m=new xP(r,i,o,l,u,h);return d&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const i=ke(r);ue(Hi,"RemoteStore shutting down."),i.Ea.add(5),await Ic(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}bf.provider={build:()=>new bf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):dr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii="FirestoreClient";class QP{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=hn.UNAUTHENTICATED,this.clientId=nd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{ue(ii,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(ue(ii,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=bd(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Oh(t,e){t.asyncQueue.verifyOperationInProgress(),ue(ii,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await Hv(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function kg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await YP(t);ue(ii,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>Ig(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>Ig(e.remoteStore,r)),t._onlineComponents=e}async function YP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ue(ii,"Using user provided OfflineComponentProvider");try{await Oh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===G.FAILED_PRECONDITION||r.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;qo("Error using user provided cache. Falling back to memory cache: "+n),await Oh(t,new Kl)}}else ue(ii,"Using default OfflineComponentProvider"),await Oh(t,new KP(void 0));return t._offlineComponents}async function fE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ue(ii,"Using user provided OnlineComponentProvider"),await kg(t,t._uninitializedComponentsProvider._online)):(ue(ii,"Using default OnlineComponentProvider"),await kg(t,new bf))),t._onlineComponents}function XP(t){return fE(t).then(e=>e.syncEngine)}async function dE(t){const e=await fE(t),n=e.eventManager;return n.onListen=VP.bind(null,e.syncEngine),n.onUnlisten=FP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=LP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=UP.bind(null,e.syncEngine),n}function JP(t,e,n={}){const s=new ar;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const d=new hE({next:y=>{d.Nu(),o.enqueueAndForget(()=>tE(i,m));const w=y.docs.has(l);!w&&y.fromCache?h.reject(new le(G.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&y.fromCache&&u&&u.source==="server"?h.reject(new le(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new nE(cd(l.path),d,{includeMetadataChanges:!0,qa:!0});return eE(i,m)}(await dE(t),t.asyncQueue,e,n,s)),s.promise}function ZP(t,e,n={}){const s=new ar;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const d=new hE({next:y=>{d.Nu(),o.enqueueAndForget(()=>tE(i,m)),y.fromCache&&u.source==="server"?h.reject(new le(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new nE(l,d,{includeMetadataChanges:!0,qa:!0});return eE(i,m)}(await dE(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="firestore.googleapis.com",Ng=!0;class Dg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mE,this.ssl=Ng}else this.host=e.host,this.ssl=e.ssl??Ng;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Bv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<O0)throw new le(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pE(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new le(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new le(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new le(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vu{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new iC;switch(s.type){case"firstParty":return new lC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new le(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Og.get(n);s&&(ue("ComponentProvider","Removing Datastore"),Og.delete(n),s.terminate())}(this),Promise.resolve()}}function e1(t,e,n,s={}){var h;t=qi(t,Vu);const r=Qi(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;r&&(Yf(`https://${l}`),Xf("Firestore",!0)),i.host!==mE&&i.host!==l&&qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:r,emulatorOptions:s};if(!$i(u,o)&&(t._setSettings(u),s.mockUserToken)){let d,m;if(typeof s.mockUserToken=="string")d=s.mockUserToken,m=hn.MOCK_USER;else{d=$y(s.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const y=s.mockUserToken.sub||s.mockUserToken.user_id;if(!y)throw new le(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new hn(y)}t._authCredentials=new oC(new Zy(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ea(this.firestore,e,this._query)}}class Mt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Ec(n,Mt._jsonSchema))return new Mt(e,s||null,new _e(dt.fromString(n.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:Lt("string",Mt._jsonSchemaVersion),referencePath:Lt("string")};class Yr extends ea{constructor(e,n,s){super(e,n,cd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new _e(e))}withConverter(e){return new Yr(this.firestore,e,this._path)}}function t1(t,e,...n){if(t=_n(t),ev("collection","path",e),t instanceof Vu){const s=dt.fromString(e,...n);return zm(s),new Yr(t,null,s)}{if(!(t instanceof Mt||t instanceof Yr))throw new le(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(dt.fromString(e,...n));return zm(s),new Yr(t.firestore,null,s)}}function gE(t,e,...n){if(t=_n(t),arguments.length===1&&(e=nd.newId()),ev("doc","path",e),t instanceof Vu){const s=dt.fromString(e,...n);return Wm(s),new Mt(t,null,new _e(s))}{if(!(t instanceof Mt||t instanceof Yr))throw new le(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(dt.fromString(e,...n));return Wm(s),new Mt(t.firestore,t instanceof Yr?t.converter:null,new _e(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="AsyncQueue";class Vg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new zv(this,"async_queue_retry"),this._c=()=>{const s=kh();s&&ue(xg,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=kh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=kh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ar;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Jo(e))throw e;ue(xg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,dr("INTERNAL UNHANDLED ERROR: ",Lg(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=wd.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&we(47125,{Pc:Lg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Lg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Lu extends Vu{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new Vg,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Vg(e),this._firestoreClient=void 0,await e}}}function n1(t,e){const n=typeof t=="object"?t:ed(),s=typeof t=="string"?t:Ul,r=bu(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=My("firestore");i&&e1(r,...i)}return r}function Rd(t){if(t._terminated)throw new le(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||s1(t),t._firestoreClient}function s1(t){var s,r,i;const e=t._freezeSettings(),n=function(l,u,h,d){return new RC(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,pE(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((s=t._app)==null?void 0:s.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new QP(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gn(tn.fromBase64String(e))}catch(n){throw new le(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gn(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ec(e,Gn._jsonSchema))return Gn.fromBase64String(e.bytes)}}Gn._jsonSchemaVersion="firestore/bytes/1.0",Gn._jsonSchema={type:Lt("string",Gn._jsonSchemaVersion),bytes:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ks._jsonSchemaVersion}}static fromJSON(e){if(Ec(e,ks._jsonSchema))return new ks(e.latitude,e.longitude)}}ks._jsonSchemaVersion="firestore/geoPoint/1.0",ks._jsonSchema={type:Lt("string",ks._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Os._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ec(e,Os._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Os(e.vectorValues);throw new le(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Os._jsonSchemaVersion="firestore/vectorValue/1.0",Os._jsonSchema={type:Lt("string",Os._jsonSchemaVersion),vectorValues:Lt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=/^__.*__$/;class i1{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Zi(e,this.data,this.fieldMask,n,this.fieldTransforms):new bc(e,this.data,n,this.fieldTransforms)}}function yE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:t})}}class Cd{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Cd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ql(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(yE(this.Ac)&&r1.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class o1{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Nu(e)}Cc(e,n,s,r=!1){return new Cd({Ac:e,methodName:n,Dc:s,path:en.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vE(t){const e=t._freezeSettings(),n=Nu(t._databaseId);return new o1(t._databaseId,!!e.ignoreUndefinedProperties,n)}function a1(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);bE("Data must be an object, but it was:",o,s);const l=EE(s,o);let u,h;if(i.merge)u=new ss(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const m of i.mergeFields){const y=l1(e,m,n);if(!o.contains(y))throw new le(G.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);h1(d,y)||d.push(y)}u=new ss(d),h=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=o.fieldTransforms;return new i1(new zn(l),u,h)}function c1(t,e,n,s=!1){return Pd(n,t.Cc(s?4:3,e))}function Pd(t,e){if(wE(t=_n(t)))return bE("Unsupported field value:",e,t),EE(t,e);if(t instanceof _E)return function(s,r){if(!yE(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const l of s){let u=Pd(l,r.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=_n(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return QC(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=gt.fromDate(s);return{timestampValue:Wl(r.serializer,i)}}if(s instanceof gt){const i=new gt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Wl(r.serializer,i)}}if(s instanceof ks)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Gn)return{bytesValue:Vv(r.serializer,s._byteString)};if(s instanceof Mt){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:fd(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Os)return function(o,l){return{mapValue:{fields:{[lv]:{stringValue:uv},[$l]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return ld(l.serializer,h)})}}}}}}(s,r);throw r.Sc(`Unsupported field value: ${Tu(s)}`)}(t,e)}function EE(t,e){const n={};return sv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xi(t,(s,r)=>{const i=Pd(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function wE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof ks||t instanceof Gn||t instanceof Mt||t instanceof _E||t instanceof Os)}function bE(t,e,n){if(!wE(n)||!tv(n)){const s=Tu(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function l1(t,e,n){if((e=_n(e))instanceof Sd)return e._internalPath;if(typeof e=="string")return TE(t,e);throw Ql("Field path arguments must be of type string or ",t,!1,void 0,n)}const u1=new RegExp("[~\\*/\\[\\]]");function TE(t,e,n){if(e.search(u1)>=0)throw Ql(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Sd(...e.split("."))._internalPath}catch{throw Ql(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ql(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${s}`),o&&(u+=` in document ${r}`),u+=")"),new le(G.INVALID_ARGUMENT,l+t+u)}function h1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new f1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(kd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class f1 extends IE{data(){return super.data()}}function kd(t,e){return typeof e=="string"?TE(t,e):e instanceof Sd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new le(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Od{}class p1 extends Od{}function Jx(t,e,...n){let s=[];e instanceof Od&&s.push(e),s=s.concat(n),function(i){const o=i.filter(u=>u instanceof Nd).length,l=i.filter(u=>u instanceof Mu).length;if(o>1||o>0&&l>0)throw new le(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class Mu extends p1{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Mu(e,n,s)}_apply(e){const n=this._parse(e);return AE(e._query,n),new ea(e.firestore,e.converter,ff(e._query,n))}_parse(e){const n=vE(e.firestore);return function(i,o,l,u,h,d,m){let y;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new le(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Fg(m,d);const L=[];for(const M of m)L.push(Mg(u,i,M));y={arrayValue:{values:L}}}else y=Mg(u,i,m)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Fg(m,d),y=c1(l,o,m,d==="in"||d==="not-in");return Vt.create(h,d,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Zx(t,e,n){const s=e,r=kd("where",t);return Mu._create(r,s,n)}class Nd extends Od{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Nd(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:cs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let o=r;const l=i.getFlattenedFilters();for(const u of l)AE(o,u),o=ff(o,u)}(e._query,n),new ea(e.firestore,e.converter,ff(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Mg(t,e,n){if(typeof(n=_n(n))=="string"){if(n==="")throw new le(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yv(e)&&n.indexOf("/")!==-1)throw new le(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(dt.fromString(n));if(!_e.isDocumentKey(s))throw new le(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return eg(t,new _e(s))}if(n instanceof Mt)return eg(t,n._key);throw new le(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tu(n)}.`)}function Fg(t,e){if(!Array.isArray(t)||t.length===0)throw new le(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AE(t,e){const n=function(r,i){for(const o of r)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new le(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class m1{convertValue(e,n="none"){switch(si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Xi(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){var s,r,i;const n=(i=(r=(s=e.fields)==null?void 0:s[$l].arrayValue)==null?void 0:r.values)==null?void 0:i.map(o=>Ct(o.doubleValue));return new Os(n)}convertGeoPoint(e){return new ks(Ct(e.latitude),Ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Ru(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ic(e));default:return null}}convertTimestamp(e){const n=ti(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=dt.fromString(e);Ze(jv(s),9688,{name:e});const r=new oc(s.get(1),s.get(3)),i=new _e(s.popFirst(5));return r.isEqual(n)||dr(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class xa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ui extends IE{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(kd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ui._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ui._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ui._jsonSchema={type:Lt("string",Ui._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class yl extends Ui{data(e={}){return super.data(e)}}class Lo{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new xa(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new yl(this._firestore,this._userDataWriter,s.key,s,new xa(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const u=new yl(r._firestore,r._userDataWriter,l.doc.key,l.doc,new xa(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new yl(r._firestore,r._userDataWriter,l.doc.key,l.doc,new xa(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:_1(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Lo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=nd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _1(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(t){t=qi(t,Mt);const e=qi(t.firestore,Lu);return JP(Rd(e),t._key).then(n=>b1(e,t,n))}Lo._jsonSchemaVersion="firestore/querySnapshot/1.0",Lo._jsonSchema={type:Lt("string",Lo._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class RE extends m1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,n)}}function v1(t){t=qi(t,ea);const e=qi(t.firestore,Lu),n=Rd(e),s=new RE(e);return d1(t._query),ZP(n,t._query).then(r=>new Lo(e,s,t,r))}function E1(t,e,n){t=qi(t,Mt);const s=qi(t.firestore,Lu),r=g1(t.converter,e);return w1(s,[a1(vE(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,cr.none())])}function w1(t,e){return function(s,r){const i=new ar;return s.asyncQueue.enqueueAndForget(async()=>$P(await XP(s),r,i)),i.promise}(Rd(t),e)}function b1(t,e,n){const s=n.docs.get(e._key),r=new RE(t);return new Ui(t,r,e._key,s,new xa(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Yo=r})(Yi),ji(new Zr("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new Lu(new aC(s.getProvider("auth-internal")),new uC(o,s.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new le(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oc(h.options.projectId,d)}(o,r),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Ss(jm,Bm,e),Ss(jm,Bm,"esm2020")})();function SE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const T1=SE,CE=new yc("auth","Firebase",SE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=new Jf("@firebase/auth");function I1(t,...e){Yl.logLevel<=Fe.WARN&&Yl.warn(`Auth (${Yi}): ${t}`,...e)}function vl(t,...e){Yl.logLevel<=Fe.ERROR&&Yl.error(`Auth (${Yi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(t,...e){throw Dd(t,...e)}function Ns(t,...e){return Dd(t,...e)}function PE(t,e,n){const s={...T1(),[e]:n};return new yc("auth","Firebase",s).create(e,{appName:t.name})}function lr(t){return PE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dd(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return CE.create(t,...e)}function Ee(t,e,...n){if(!t)throw Dd(e,...n)}function rr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vl(e),new Error(e)}function mr(t,e){t||rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function A1(){return Ug()==="http:"||Ug()==="https:"}function Ug(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(A1()||LR()||"connection"in navigator)?navigator.onLine:!0}function S1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n){this.shortDelay=e,this.longDelay=n,mr(n>e,"Short delay should be less than long delay!"),this.isMobile=DR()||MR()}get(){return R1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(t,e){mr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],k1=new Rc(3e4,6e4);function oi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ai(t,e,n,s,r={}){return OE(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=vc({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:u,...i};return VR()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Qi(t.emulatorConfig.host)&&(h.credentials="include"),kE.fetch()(await NE(t,t.config.apiHost,n,l),h)})}async function OE(t,e,n){t._canInitEmulator=!1;const s={...C1,...e};try{const r=new N1(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ol(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ol(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw ol(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw ol(t,"user-disabled",o);const d=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw PE(t,d,h);ls(t,d)}}catch(r){if(r instanceof Fs)throw r;ls(t,"network-request-failed",{message:String(r)})}}async function Sc(t,e,n,s,r={}){const i=await ai(t,e,n,s,r);return"mfaPendingCredential"in i&&ls(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function NE(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?xd(t.config,r):`${t.config.apiScheme}://${r}`;return P1.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function O1(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class N1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Ns(this.auth,"network-request-failed")),k1.get())})}}function ol(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Ns(t,e,s);return r.customData._tokenResponse=n,r}function $g(t){return t!==void 0&&t.enterprise!==void 0}class D1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return O1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function x1(t,e){return ai(t,"GET","/v2/recaptchaConfig",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V1(t,e){return ai(t,"POST","/v1/accounts:delete",e)}async function Xl(t,e){return ai(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function L1(t,e=!1){const n=_n(t),s=await n.getIdToken(e),r=Vd(s);Ee(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:Qa(Nh(r.auth_time)),issuedAtTime:Qa(Nh(r.iat)),expirationTime:Qa(Nh(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Nh(t){return Number(t)*1e3}function Vd(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return vl("JWT malformed, contained fewer than 3 sections"),null;try{const r=Vy(n);return r?JSON.parse(r):(vl("Failed to decode base64 JWT payload"),null)}catch(r){return vl("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function jg(t){const e=Vd(t);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Fs&&M1(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function M1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qa(this.lastLoginAt),this.creationTime=Qa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jl(t){var m;const e=t.auth,n=await t.getIdToken(),s=await uc(t,Xl(e,{idToken:n}));Ee(s==null?void 0:s.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=(m=r.providerUserInfo)!=null&&m.length?DE(r.providerUserInfo):[],o=$1(t.providerData,i),l=t.isAnonymous,u=!(t.email&&r.passwordHash)&&!(o!=null&&o.length),h=l?u:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new If(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function U1(t){const e=_n(t);await Jl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $1(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function DE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j1(t,e){const n=await OE(t,{},async()=>{const s=vc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await NE(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:s};return t.emulatorConfig&&Qi(t.emulatorConfig.host)&&(u.credentials="include"),kE.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function B1(t,e){return ai(t,"POST","/v2/accounts:revokeToken",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const n=jg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await j1(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Mo;return s&&(Ee(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(Ee(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(Ee(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mo,this.toJSON())}_performRefresh(){return rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(t,e){Ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class rs{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new F1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new If(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await uc(this,this.stsTokenManager.getToken(this.auth,e));return Ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return L1(this,e)}reload(){return U1(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new rs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Jl(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(lr(this.auth));const e=await this.getIdToken();return await uc(this,V1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:m,emailVerified:y,isAnonymous:w,providerData:L,stsTokenManager:M}=n;Ee(m&&M,e,"internal-error");const U=Mo.fromJSON(this.name,M);Ee(typeof m=="string",e,"internal-error"),Vr(s,e.name),Vr(r,e.name),Ee(typeof y=="boolean",e,"internal-error"),Ee(typeof w=="boolean",e,"internal-error"),Vr(i,e.name),Vr(o,e.name),Vr(l,e.name),Vr(u,e.name),Vr(h,e.name),Vr(d,e.name);const Y=new rs({uid:m,auth:e,email:r,emailVerified:y,displayName:s,isAnonymous:w,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:U,createdAt:h,lastLoginAt:d});return L&&Array.isArray(L)&&(Y.providerData=L.map(K=>({...K}))),u&&(Y._redirectEventId=u),Y}static async _fromIdTokenResponse(e,n,s=!1){const r=new Mo;r.updateFromServerResponse(n);const i=new rs({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Jl(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];Ee(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?DE(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),l=new Mo;l.updateFromIdToken(s);const u=new rs({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new If(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg=new Map;function ir(t){mr(t instanceof Function,"Expected a class definition");let e=Bg.get(t);return e?(mr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Bg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xE.type="NONE";const qg=xE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(t,e,n){return`firebase:${t}:${e}:${n}`}class Fo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=El(this.userKey,r.apiKey,i),this.fullPersistenceKey=El("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Xl(this.auth,{idToken:e}).catch(()=>{});return n?rs._fromGetAccountInfoResponse(this.auth,n,e):null}return rs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Fo(ir(qg),e,s);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=r[0]||ir(qg);const o=El(s,e.config.apiKey,e.name);let l=null;for(const h of n)try{const d=await h._get(o);if(d){let m;if(typeof d=="string"){const y=await Xl(e,{idToken:d}).catch(()=>{});if(!y)break;m=await rs._fromGetAccountInfoResponse(e,y,d)}else m=rs._fromJSON(e,d);h!==i&&(l=m),i=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Fo(i,e,s):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Fo(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(VE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($E(e))return"Blackberry";if(jE(e))return"Webos";if(LE(e))return"Safari";if((e.includes("chrome/")||ME(e))&&!e.includes("edge/"))return"Chrome";if(UE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function VE(t=gn()){return/firefox\//i.test(t)}function LE(t=gn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ME(t=gn()){return/crios\//i.test(t)}function FE(t=gn()){return/iemobile/i.test(t)}function UE(t=gn()){return/android/i.test(t)}function $E(t=gn()){return/blackberry/i.test(t)}function jE(t=gn()){return/webos/i.test(t)}function Ld(t=gn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function q1(t=gn()){var e;return Ld(t)&&!!((e=window.navigator)!=null&&e.standalone)}function H1(){return FR()&&document.documentMode===10}function BE(t=gn()){return Ld(t)||UE(t)||jE(t)||$E(t)||/windows phone/i.test(t)||FE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(t,e=[]){let n;switch(t){case"Browser":n=Hg(gn());break;case"Worker":n=`${Hg(gn())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Yi}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z1(t,e={}){return ai(t,"GET","/v2/passwordPolicy",oi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=6;class K1{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??G1,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wg(this),this.idTokenSubscription=new Wg(this),this.beforeStateQueue=new W1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ir(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await Fo.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Xl(this,{idToken:e}),s=await rs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(xn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Jl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=S1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(lr(this));const n=e?_n(e):null;return n&&Ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(lr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(lr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ir(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await z1(this),n=new K1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await B1(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ir(e)||this._popupRedirectResolver;Ee(n,this,"argument-error"),this.redirectPersistenceManager=await Fo.create(this,[ir(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,s,r);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&I1(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function to(t){return _n(t)}class Wg{constructor(e){this.auth=e,this.observer=null,this.addObserver=zR(n=>this.observer=n)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Y1(t){Fu=t}function HE(t){return Fu.loadJS(t)}function X1(){return Fu.recaptchaEnterpriseScript}function J1(){return Fu.gapiScript}function Z1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class ek{constructor(){this.enterprise=new tk}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class tk{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const nk="recaptcha-enterprise",WE="NO_RECAPTCHA";class sk{constructor(e){this.type=nk,this.auth=to(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{x1(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new D1(u);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(u=>{l(u)})})}function r(i,o,l){const u=window.grecaptcha;$g(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(WE)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ek().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(l=>{if(!n&&$g(window.grecaptcha))r(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=X1();u.length!==0&&(u+=l),HE(u).then(()=>{r(l,i,o)}).catch(h=>{o(h)})}}).catch(l=>{o(l)})})}}async function zg(t,e,n,s=!1,r=!1){const i=new sk(t);let o;if(r)o=WE;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Af(t,e,n,s,r){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await zg(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await zg(t,e,n,n==="getOobCode");return s(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(t,e){const n=bu(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if($i(i,e??{}))return r;ls(r,"already-initialized")}return n.initialize({options:e})}function ik(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(ir);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function ok(t,e,n){const s=to(t);Ee(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=zE(e),{host:o,port:l}=ak(e),u=l===null?"":`:${l}`,h={url:`${i}//${o}${u}/`},d=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){Ee(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ee($i(h,s.config.emulator)&&$i(d,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=h,s.emulatorConfig=d,s.settings.appVerificationDisabledForTesting=!0,Qi(o)?(Yf(`${i}//${o}${u}`),Xf("Auth",!0)):ck()}function zE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ak(t){const e=zE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:Gg(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:Gg(o)}}}function Gg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ck(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return rr("not implemented")}_getIdTokenResponse(e){return rr("not implemented")}_linkToIdToken(e,n){return rr("not implemented")}_getReauthenticationResolver(e){return rr("not implemented")}}async function lk(t,e){return ai(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uk(t,e){return Sc(t,"POST","/v1/accounts:signInWithPassword",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hk(t,e){return Sc(t,"POST","/v1/accounts:signInWithEmailLink",oi(t,e))}async function fk(t,e){return Sc(t,"POST","/v1/accounts:signInWithEmailLink",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends Md{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new hc(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new hc(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Af(e,n,"signInWithPassword",uk);case"emailLink":return hk(e,{email:this._email,oobCode:this._password});default:ls(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Af(e,s,"signUpPassword",lk);case"emailLink":return fk(e,{idToken:n,email:this._email,oobCode:this._password});default:ls(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(t,e){return Sc(t,"POST","/v1/accounts:signInWithIdp",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="http://localhost";class Wi extends Md{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Wi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ls("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new Wi(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Uo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Uo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Uo(e,n)}buildRequest(){const e={requestUri:dk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=vc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mk(t){const e=Pa(ka(t)).link,n=e?Pa(ka(e)).deep_link_id:null,s=Pa(ka(t)).deep_link_id;return(s?Pa(ka(s)).link:null)||s||n||e||t}class Fd{constructor(e){const n=Pa(ka(e)),s=n.apiKey??null,r=n.oobCode??null,i=pk(n.mode??null);Ee(s&&r&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=mk(e);try{return new Fd(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this.providerId=ta.PROVIDER_ID}static credential(e,n){return hc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Fd.parseLink(n);return Ee(s,"argument-error"),hc._fromEmailAndCode(e,s.code,s.tenantId)}}ta.PROVIDER_ID="password";ta.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ta.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc extends GE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends Cc{constructor(){super("facebook.com")}static credential(e){return Wi._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.FACEBOOK_SIGN_IN_METHOD="facebook.com";$r.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Cc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Wi._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return jr.credential(n,s)}catch{return null}}}jr.GOOGLE_SIGN_IN_METHOD="google.com";jr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends Cc{constructor(){super("github.com")}static credential(e){return Wi._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Br.credential(e.oauthAccessToken)}catch{return null}}}Br.GITHUB_SIGN_IN_METHOD="github.com";Br.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends Cc{constructor(){super("twitter.com")}static credential(e,n){return Wi._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return qr.credential(n,s)}catch{return null}}}qr.TWITTER_SIGN_IN_METHOD="twitter.com";qr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gk(t,e){return Sc(t,"POST","/v1/accounts:signUp",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await rs._fromIdTokenResponse(e,s,r),o=Kg(s);return new zi({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=Kg(s);return new zi({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function Kg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends Fs{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Zl.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new Zl(e,n,s,r)}}function KE(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Zl._fromErrorAndOperation(t,i,e,s):i})}async function _k(t,e,n=!1){const s=await uc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return zi._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yk(t,e,n=!1){const{auth:s}=t;if(xn(s.app))return Promise.reject(lr(s));const r="reauthenticate";try{const i=await uc(t,KE(s,r,e,t),n);Ee(i.idToken,s,"internal-error");const o=Vd(i.idToken);Ee(o,s,"internal-error");const{sub:l}=o;return Ee(t.uid===l,s,"user-mismatch"),zi._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ls(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QE(t,e,n=!1){if(xn(t.app))return Promise.reject(lr(t));const s="signIn",r=await KE(t,s,e),i=await zi._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function vk(t,e){return QE(to(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YE(t){const e=to(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Ek(t,e,n){if(xn(t.app))return Promise.reject(lr(t));const s=to(t),o=await Af(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gk).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&YE(t),u}),l=await zi._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(l.user),l}function wk(t,e,n){return xn(t.app)?Promise.reject(lr(t)):vk(_n(t),ta.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&YE(t),s})}function bk(t,e,n,s){return _n(t).onIdTokenChanged(e,n,s)}function Tk(t,e,n){return _n(t).beforeAuthStateChanged(e,n)}function Ik(t,e,n,s){return _n(t).onAuthStateChanged(e,n,s)}function Ak(t){return _n(t).signOut()}const eu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(eu,"1"),this.storage.removeItem(eu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=1e3,Sk=10;class JE extends XE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);H1()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Sk):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Rk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}JE.type="LOCAL";const Ck=JE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE extends XE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ZE.type="SESSION";const ew=ZE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new Uu(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(o).map(async h=>h(n.origin,i)),u=await Pk(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const h=Ud("",20);r.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(m){const y=m;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(y.data.response);break;default:clearTimeout(d),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(){return window}function Ok(t){Ds().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(){return typeof Ds().WorkerGlobalScope<"u"&&typeof Ds().importScripts=="function"}async function Nk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Dk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function xk(){return tw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="firebaseLocalStorageDb",Vk=1,tu="firebaseLocalStorage",sw="fbase_key";class Pc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $u(t,e){return t.transaction([tu],e?"readwrite":"readonly").objectStore(tu)}function Lk(){const t=indexedDB.deleteDatabase(nw);return new Pc(t).toPromise()}function Rf(){const t=indexedDB.open(nw,Vk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(tu,{keyPath:sw})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(tu)?e(s):(s.close(),await Lk(),e(await Rf()))})})}async function Qg(t,e,n){const s=$u(t,!0).put({[sw]:e,value:n});return new Pc(s).toPromise()}async function Mk(t,e){const n=$u(t,!1).get(e),s=await new Pc(n).toPromise();return s===void 0?null:s.value}function Yg(t,e){const n=$u(t,!0).delete(e);return new Pc(n).toPromise()}const Fk=800,Uk=3;class rw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Uk)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uu._getInstance(xk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await Nk(),!this.activeServiceWorker)return;this.sender=new kk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Dk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rf();return await Qg(e,eu,"1"),await Yg(e,eu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Qg(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Mk(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=$u(r,!1).getAll();return new Pc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Fk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rw.type="LOCAL";const $k=rw;new Rc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(t,e){return e?ir(e):(Ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d extends Md{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Uo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Uo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Bk(t){return QE(t.auth,new $d(t),t.bypassAuthState)}function qk(t){const{auth:e,user:n}=t;return Ee(n,e,"internal-error"),yk(n,new $d(t),t.bypassAuthState)}async function Hk(t){const{auth:e,user:n}=t;return Ee(n,e,"internal-error"),_k(n,new $d(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Bk;case"linkViaPopup":case"linkViaRedirect":return Hk;case"reauthViaPopup":case"reauthViaRedirect":return qk;default:ls(this.auth,"internal-error")}}resolve(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=new Rc(2e3,1e4);class Co extends iw{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,Co.currentPopupAction&&Co.currentPopupAction.cancel(),Co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){mr(this.filter.length===1,"Popup operations only handle one event");const e=Ud();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ns(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ns(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Co.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ns(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Wk.get())};e()}}Co.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk="pendingRedirect",wl=new Map;class Gk extends iw{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=wl.get(this.auth._key());if(!e){try{const s=await Kk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}wl.set(this.auth._key(),e)}return this.bypassAuthState||wl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Kk(t,e){const n=Xk(e),s=Yk(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function Qk(t,e){wl.set(t._key(),e)}function Yk(t){return ir(t._redirectPersistence)}function Xk(t){return El(zk,t.config.apiKey,t.name)}async function Jk(t,e,n=!1){if(xn(t.app))return Promise.reject(lr(t));const s=to(t),r=jk(s,e),o=await new Gk(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=10*60*1e3;class eO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!ow(e)){const r=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(Ns(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Zk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xg(e))}saveEventToCache(e){this.cachedEventUids.add(Xg(e)),this.lastProcessedEventTime=Date.now()}}function Xg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ow({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ow(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nO(t,e={}){return ai(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rO=/^https?/;async function iO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nO(t);for(const n of e)try{if(oO(n))return}catch{}ls(t,"unauthorized-domain")}function oO(t){const e=Tf(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!rO.test(n))return!1;if(sO.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=new Rc(3e4,6e4);function Jg(){const t=Ds().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cO(t){return new Promise((e,n)=>{var r,i,o;function s(){Jg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jg(),n(Ns(t,"network-request-failed"))},timeout:aO.get()})}if((i=(r=Ds().gapi)==null?void 0:r.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Ds().gapi)!=null&&o.load)s();else{const l=Z1("iframefcb");return Ds()[l]=()=>{gapi.load?s():n(Ns(t,"network-request-failed"))},HE(`${J1()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw bl=null,e})}let bl=null;function lO(t){return bl=bl||cO(t),bl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=new Rc(5e3,15e3),hO="__/auth/iframe",fO="emulator/auth/iframe",dO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mO(t){const e=t.config;Ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?xd(e,fO):`https://${t.config.authDomain}/${hO}`,s={apiKey:e.apiKey,appName:t.name,v:Yi},r=pO.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${vc(s).slice(1)}`}async function gO(t){const e=await lO(t),n=Ds().gapi;return Ee(n,t,"internal-error"),e.open({where:document.body,url:mO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dO,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Ns(t,"network-request-failed"),l=Ds().setTimeout(()=>{i(o)},uO.get());function u(){Ds().clearTimeout(l),r(s)}s.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yO=500,vO=600,EO="_blank",wO="http://localhost";class Zg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bO(t,e,n,s=yO,r=vO){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const u={..._O,width:s.toString(),height:r.toString(),top:i,left:o},h=gn().toLowerCase();n&&(l=ME(h)?EO:n),VE(h)&&(e=e||wO,u.scrollbars="yes");const d=Object.entries(u).reduce((y,[w,L])=>`${y}${w}=${L},`,"");if(q1(h)&&l!=="_self")return TO(e||"",l),new Zg(null);const m=window.open(e||"",l,d);Ee(m,t,"popup-blocked");try{m.focus()}catch{}return new Zg(m)}function TO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO="__/auth/handler",AO="emulator/auth/handler",RO=encodeURIComponent("fac");async function e_(t,e,n,s,r,i){Ee(t.config.authDomain,t,"auth-domain-config-required"),Ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Yi,eventId:r};if(e instanceof GE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",WR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,m]of Object.entries({}))o[d]=m}if(e instanceof Cc){const d=e.getScopes().filter(m=>m!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await t._getAppCheckToken(),h=u?`#${RO}=${encodeURIComponent(u)}`:"";return`${SO(t)}?${vc(l).slice(1)}${h}`}function SO({config:t}){return t.emulator?xd(t,AO):`https://${t.authDomain}/${IO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh="webStorageSupport";class CO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ew,this._completeRedirectFn=Jk,this._overrideRedirectResult=Qk}async _openPopup(e,n,s,r){var o;mr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await e_(e,n,s,Tf(),r);return bO(e,i,Ud())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await e_(e,n,s,Tf(),r);return Ok(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(mr(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await gO(e),s=new eO(e);return n.register("authEvent",r=>(Ee(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Dh,{type:Dh},r=>{var o;const i=(o=r==null?void 0:r[0])==null?void 0:o[Dh];i!==void 0&&n(!!i),ls(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return BE()||LE()||Ld()}}const PO=CO;var t_="@firebase/auth",n_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NO(t){ji(new Zr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;Ee(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qE(t)},h=new Q1(s,r,i,u);return ik(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),ji(new Zr("auth-internal",e=>{const n=to(e.getProvider("auth").getImmediate());return(s=>new kO(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ss(t_,n_,OO(t)),Ss(t_,n_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=5*60,xO=Uy("authIdTokenMaxAge")||DO;let s_=null;const VO=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>xO)return;const r=n==null?void 0:n.token;s_!==r&&(s_=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function LO(t=ed()){const e=bu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=rk(t,{popupRedirectResolver:PO,persistence:[$k,Ck,ew]}),s=Uy("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=VO(i.toString());Tk(n,o,()=>o(n.currentUser)),bk(n,l=>o(l))}}const r=Ly("auth");return r&&ok(n,`http://${r}`),n}function MO(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Y1({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Ns("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",MO().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NO("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="firebasestorage.googleapis.com",FO="storageBucket",UO=2*60*1e3,$O=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends Fs{constructor(e,n,s=0){super(xh(e),`Firebase Storage: ${n} (${xh(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Us.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ms;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ms||(Ms={}));function xh(t){return"storage/"+t}function jO(){const t="An unknown error occurred, please check the error payload for server response.";return new Us(Ms.UNKNOWN,t)}function BO(){return new Us(Ms.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qO(){return new Us(Ms.CANCELED,"User canceled the upload/download.")}function HO(t){return new Us(Ms.INVALID_URL,"Invalid URL '"+t+"'.")}function WO(t){return new Us(Ms.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function r_(t){return new Us(Ms.INVALID_ARGUMENT,t)}function cw(){return new Us(Ms.APP_DELETED,"The Firebase app was deleted.")}function zO(t){return new Us(Ms.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=is.makeFromUrl(e,n)}catch{return new is(e,"")}if(s.path==="")return s;throw WO(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(ne){ne.path.charAt(ne.path.length-1)==="/"&&(ne.path_=ne.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+r+o,"i"),u={bucket:1,path:3};function h(ne){ne.path_=decodeURIComponent(ne.path)}const d="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",w=new RegExp(`^https?://${m}/${d}/b/${r}/o${y}`,"i"),L={bucket:1,path:3},M=n===aw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,U="([^?#]*)",Y=new RegExp(`^https?://${M}/${r}/${U}`,"i"),X=[{regex:l,indices:u,postModify:i},{regex:w,indices:L,postModify:h},{regex:Y,indices:{bucket:1,path:2},postModify:h}];for(let ne=0;ne<X.length;ne++){const de=X[ne],Se=de.regex.exec(e);if(Se){const S=Se[de.indices.bucket];let b=Se[de.indices.path];b||(b=""),s=new is(S,b),de.postModify(s);break}}if(s==null)throw HO(e);return s}}class GO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(t,e,n){let s=1,r=null,i=null,o=!1,l=0;function u(){return l===2}let h=!1;function d(...U){h||(h=!0,e.apply(null,U))}function m(U){r=setTimeout(()=>{r=null,t(w,u())},U)}function y(){i&&clearTimeout(i)}function w(U,...Y){if(h){y();return}if(U){y(),d.call(null,U,...Y);return}if(u()||o){y(),d.call(null,U,...Y);return}s<64&&(s*=2);let X;l===1?(l=2,X=0):X=(s+Math.random())*1e3,m(X)}let L=!1;function M(U){L||(L=!0,y(),!h&&(r!==null?(U||(l=2),clearTimeout(r),m(0)):U||(l=1)))}return m(0),i=setTimeout(()=>{o=!0,M(!0)},n),M}function QO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(t){return t!==void 0}function i_(t,e,n,s){if(s<e)throw r_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw r_(`Invalid value for '${t}'. Expected ${n} or less.`)}function XO(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var nu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(nu||(nu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||r||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e,n,s,r,i,o,l,u,h,d,m,y=!0,w=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=d,this.connectionFactory_=m,this.retry=y,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,M)=>{this.resolve_=L,this.reject_=M,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new al(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const u=l.loaded,h=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===nu.NO_ERROR,u=i.getStatus();if(!l||JO(u,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===nu.ABORT;s(!1,new al(!1,null,d));return}const h=this.successCodes_.indexOf(u)!==-1;s(!0,new al(h,i))})},n=(s,r)=>{const i=this.resolve_,o=this.reject_,l=r.connection;if(r.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());YO(u)?i(u):i()}catch(u){o(u)}else if(l!==null){const u=jO();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(r.canceled){const u=this.appDelete_?cw():qO();o(u)}else{const u=BO();o(u)}};this.canceled_?n(!1,new al(!1,null,!0)):this.backoffId_=KO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&QO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class al{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function eN(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function tN(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function nN(t,e){e&&(t["X-Firebase-GMPID"]=e)}function sN(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function rN(t,e,n,s,r,i,o=!0,l=!1){const u=XO(t.urlParams),h=t.url+u,d=Object.assign({},t.headers);return nN(d,e),eN(d,n),tN(d,i),sN(d,s),new ZO(h,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function oN(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this._service=e,n instanceof is?this._location=n:this._location=is.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new su(e,n)}get root(){const e=new is(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return oN(this._location.path)}get storage(){return this._service}get parent(){const e=iN(this._location.path);if(e===null)return null;const n=new is(this._location.bucket,e);return new su(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw zO(e)}}function o_(t,e){const n=e==null?void 0:e[FO];return n==null?null:is.makeFromBucketSpec(n,t)}function aN(t,e,n,s={}){t.host=`${e}:${n}`;const r=Qi(e);r&&(Yf(`https://${t.host}/b`),Xf("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:$y(i,t.app.options.projectId))}class cN{constructor(e,n,s,r,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=aw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=UO,this._maxUploadRetryTime=$O,this._requests=new Set,r!=null?this._bucket=is.makeFromBucketSpec(r,this._host):this._bucket=o_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=is.makeFromBucketSpec(this._url,e):this._bucket=o_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){i_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){i_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new su(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new GO(cw());{const o=rN(e,this._appId,s,r,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const a_="@firebase/storage",c_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="storage";function lN(t=ed(),e){t=_n(t);const s=bu(t,lw).getImmediate({identifier:e}),r=My("storage");return r&&uN(s,...r),s}function uN(t,e,n,s={}){aN(t,e,n,s)}function hN(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new cN(n,s,r,e,Yi)}function fN(){ji(new Zr(lw,hN,"PUBLIC").setMultipleInstances(!0)),Ss(a_,c_,""),Ss(a_,c_,"esm2020")}fN();const dN={apiKey:"AIzaSyBIu_0QMW5M2x_YPWj4-C192n6DiFSx5M0",authDomain:"stillup-88176.firebaseapp.com",projectId:"stillup-88176",storageBucket:"stillup-88176.firebasestorage.app",messagingSenderId:"742548395115",appId:"1:742548395115:web:fcca0f3108ebbf04290d2e",measurementId:"G-PBQX3K7GML"},jd=qy(dN),Bd=n1(jd),ju=LO(jd);lN(jd);const pN=async(t,e,n={})=>{try{const r=(await Ek(ju,t,e)).user;return await E1(gE(Bd,"users",r.uid),{email:r.email,...n,createdAt:new Date}),r}catch(s){throw console.error("Error registering user:",s.message),s}},mN=async(t,e)=>{try{return(await wk(ju,t,e)).user}catch(n){throw console.error("Error logging in:",n.message),n}},gN=async()=>{try{await Ak(ju)}catch(t){console.error("Error logging out:",t.message)}},Vh=async t=>{try{const e=gE(Bd,"users",t),n=await y1(e);return n.exists()?n.data():null}catch(e){return console.error("Error getting user data:",e.message),null}},kc=Gf("auth",()=>{const t=_t(null),e=_t(null),n=_t(!0),s=_t(null),r=Zt(()=>!!t.value),i=d=>{const m={"auth/invalid-email":"Adresa de email nu este validă.","auth/user-not-found":"Nu există niciun cont asociat cu acest email.","auth/wrong-password":"Parola introdusă este greșită.","auth/email-already-in-use":"Acest email este deja folosit.","auth/weak-password":"Parola este prea slabă (minim 6 caractere).","auth/missing-password":"Te rugăm să introduci o parolă.","auth/missing-email":"Te rugăm să introduci adresa de email.",default:"A apărut o eroare neașteptată. Încearcă din nou."};return m[d]||m.default};return{user:t,userData:e,loading:n,error:s,isAuthenticated:r,loadUser:()=>{n.value=!0,Ik(ju,async d=>{t.value=d,e.value=d?await Vh(d.uid):null,n.value=!1})},register:async(d,m,y={})=>{try{s.value=null;const w=await pN(d,m,y);t.value=w,e.value=await Vh(w.uid)}catch(w){console.error("Register failed:",w.code),s.value=i(w.code)}},login:async(d,m)=>{try{s.value=null;const y=await mN(d,m);t.value=y,e.value=await Vh(y.uid)}catch(y){console.error("Login failed:",y.code),s.value=i(y.code)}},logout:async()=>{try{await gN(),t.value=null,e.value=null,s.value=null}catch(d){s.value=i(d.code)}}}}),ci=Gf("theme",{state:()=>({isDarkMode:!1,currentMood:"street"}),getters:{moodColors:t=>({street:{primary:"#1C1C1C",secondary:"#E0E0E0",accent:"#0D0D0D"},elegant:{primary:"#2C3E50",secondary:"#34495E",accent:"#95A5A6"},chill:{primary:"#3498DB",secondary:"#5DADE2",accent:"#85C1E9"},sport:{primary:"#27AE60",secondary:"#2ECC71",accent:"#58D68D"}})[t.currentMood]},actions:{toggleTheme(){this.isDarkMode=!this.isDarkMode,this.applyTheme(),this.saveTheme()},setMood(t){this.currentMood=t,this.applyTheme(),this.saveTheme()},applyTheme(){const t=document.documentElement;this.isDarkMode?t.setAttribute("data-bs-theme","dark"):t.setAttribute("data-bs-theme","light");const e=this.moodColors;t.style.setProperty("--mood-primary",e.primary),t.style.setProperty("--mood-secondary",e.secondary),t.style.setProperty("--mood-accent",e.accent)},saveTheme(){localStorage.setItem("stillup_theme",JSON.stringify({isDarkMode:this.isDarkMode,currentMood:this.currentMood}))},loadTheme(){const t=localStorage.getItem("stillup_theme");if(t){const e=JSON.parse(t);this.isDarkMode=e.isDarkMode,this.currentMood=e.currentMood}this.applyTheme()}}}),$s=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},_N={class:"mood-switcher"},yN={__name:"MoodSwitcher",setup(t){const e=ci(),n=Zt({get:()=>e.currentMood,set:s=>e.setMood(s)});return(s,r)=>(je(),We("div",_N,[or(k("select",{"onUpdate:modelValue":r[0]||(r[0]=i=>n.value=i),class:"form-select form-select-sm"},[...r[1]||(r[1]=[k("option",{value:"street"},"Urban",-1),k("option",{value:"elegant"},"Elegant",-1),k("option",{value:"chill"},"Casual",-1),k("option",{value:"sport"},"Sport",-1)])],512),[[Gh,n.value]])]))}},l_=$s(yN,[["__scopeId","data-v-de49b1d8"]]),uw="/assets/logo_black-BdLACx-D.png",hw="/assets/logo_white-DIq0LmxL.png",vN={class:"container-fluid"},EN={class:"brand-logo"},wN=["src"],bN={class:"collapse navbar-collapse",id:"navbarNav"},TN={class:"navbar-nav me-auto mb-2 mb-lg-0"},IN={class:"nav-item"},AN={class:"nav-item"},RN={class:"navbar-actions"},SN={class:"mood-wrapper d-none d-lg-block"},CN={key:0,class:"cart-badge"},PN={key:0,class:"auth-section"},kN={key:1,class:"auth-section"},ON={class:"mobile-mood d-lg-none mt-3"},NN={__name:"Navbar",setup(t){const e=Qo(),n=Eu(),s=kc(),r=ci(),i=()=>{r.toggleTheme()},o=()=>{s.logout(),e.push("/")};return(l,u)=>{const h=Ki("router-link");return je(),We("nav",{class:"navbar navbar-expand-lg sticky-top",style:gr({background:ft(r).isDarkMode?"rgba(0,0,0,0.3)":"rgba(255,255,255,0.2)",border:ft(r).isDarkMode?"1px solid rgba(255,255,255,0.2)":"1px solid rgba(255,255,255,0.3)"})},[k("div",vN,[$e(h,{to:"/",class:"navbar-brand"},{default:An(()=>[k("span",EN,[k("img",{src:ft(r).isDarkMode?ft(hw):ft(uw),alt:"logo_stillUP",class:"img-fluid",style:{width:"100px",height:"auto"}},null,8,wN)])]),_:1}),u[5]||(u[5]=k("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav"},[k("span",{class:"navbar-toggler-icon"})],-1)),k("div",bN,[k("ul",TN,[k("li",IN,[$e(h,{to:"/",class:"nav-link"},{default:An(()=>[...u[0]||(u[0]=[Pt("Acasă",-1)])]),_:1})]),k("li",AN,[$e(h,{to:"/shop",class:"nav-link"},{default:An(()=>[...u[1]||(u[1]=[Pt("Produse",-1)])]),_:1})])]),k("div",RN,[k("div",SN,[$e(l_)]),k("button",{onClick:i,class:"btn btn-icon",title:"Toggle theme"},[k("i",{class:dc(ft(r).isDarkMode?"bi bi-sun-fill":"bi bi-moon-fill")},null,2)]),$e(h,{to:"/cart",class:"btn btn-icon position-relative",title:"Cart"},{default:An(()=>[u[2]||(u[2]=k("i",{class:"bi bi-cart"},null,-1)),ft(n).cartCount>0?(je(),We("span",CN,qt(ft(n).cartCount),1)):Fi("",!0)]),_:1}),ft(s).isAuthenticated?(je(),We("div",PN,[k("button",{onClick:o,class:"btn btn-outline-danger btn-sm"},[...u[3]||(u[3]=[k("i",{class:"bi bi-box-arrow-right d-lg-none"},null,-1),k("span",{class:"d-none d-lg-inline"},"Logout",-1)])])])):(je(),We("div",kN,[$e(h,{to:"/login",class:"btn btn-primary btn-sm"},{default:An(()=>[...u[4]||(u[4]=[k("i",{class:"bi bi-person d-lg-none"},null,-1),k("span",{class:"d-none d-lg-inline"},"Loghează-te",-1)])]),_:1})]))]),k("div",ON,[$e(l_)])])])],4)}}},DN=$s(NN,[["__scopeId","data-v-abcf1a1e"]]),xN={class:"footer mt-5"},VN={class:"container py-4"},LN={class:"row"},MN={class:"col-md-4 mb-3"},FN=["src"],UN={class:"col-md-4 mb-3"},$N={class:"list-unstyled"},jN={__name:"Footer",setup(t){const e=ci();return(n,s)=>{const r=Ki("router-link");return je(),We("footer",xN,[k("div",VN,[k("div",LN,[k("div",MN,[k("img",{src:ft(e).isDarkMode?ft(hw):ft(uw),alt:"logo_stillUP",class:"img-fluid",style:{width:"130px",height:"auto"}},null,8,FN),s[0]||(s[0]=k("p",{class:"text-muted"},"Starea ta, stilul tău",-1))]),k("div",UN,[s[4]||(s[4]=k("h6",null,"Linkuri rapide",-1)),k("ul",$N,[k("li",null,[$e(r,{to:"/",class:"footer-link"},{default:An(()=>[...s[1]||(s[1]=[Pt("Acasă",-1)])]),_:1})]),k("li",null,[$e(r,{to:"/shop",class:"footer-link"},{default:An(()=>[...s[2]||(s[2]=[Pt("Produse",-1)])]),_:1})]),k("li",null,[$e(r,{to:"/cart",class:"footer-link"},{default:An(()=>[...s[3]||(s[3]=[Pt("Coș",-1)])]),_:1})])])]),s[5]||(s[5]=Hh('<div class="col-md-4 mb-3" data-v-622ca140><h6 data-v-622ca140>Conectează-te</h6><div class="social-icons" data-v-622ca140><a href="#" class="social-link" data-v-622ca140><i class="bi bi-instagram" data-v-622ca140></i></a><a href="#" class="social-link" data-v-622ca140><i class="bi bi-facebook" data-v-622ca140></i></a><a href="#" class="social-link" data-v-622ca140><i class="bi bi-twitter-x" data-v-622ca140></i></a><a href="#" class="social-link" data-v-622ca140><i class="bi bi-tiktok" data-v-622ca140></i></a></div></div>',1))]),s[6]||(s[6]=k("hr",{class:"my-3"},null,-1)),s[7]||(s[7]=k("div",{class:"row"},[k("div",{class:"col-12 text-center"},[k("p",{class:"text-muted mb-0"},"© 2025 stillUP. Toate drepturile rezervate.")])],-1))])])}}},BN=$s(jN,[["__scopeId","data-v-622ca140"]]),qN={id:"app"},HN={__name:"App",setup(t){const e=Eu(),n=kc(),s=ci();return gc(()=>{e.loadCart(),n.loadUser(),s.loadTheme()}),(r,i)=>{const o=Ki("router-view");return je(),We("div",qN,[$e(DN),$e(o),$e(BN)])}}},WN="modulepreload",zN=function(t){return"/"+t},u_={},GN=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(u=>{if(u=zN(u),u in u_)return;u_[u]=!0;const h=u.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":WN,h||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),h)return new Promise((y,w)=>{m.addEventListener("load",y),m.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},KN="/assets/tonik-U0wwiY6nRGA-unsplash-Dzc5axWj.jpg",QN={class:"card-img-wrapper"},YN=["src","alt"],XN={class:"card-body d-flex flex-column"},JN={class:"card-title"},ZN={class:"card-text text-muted small"},eD={class:"mt-auto"},tD={class:"d-flex justify-content-between align-items-center mb-2"},nD={class:"price"},sD=jf({__name:"ProductCard",props:{product:{}},setup(t){const e=t,n=Eu(),s=Qo(),r=l=>{l.stopPropagation(),n.addToCart(e.product)},i=()=>{s.push({name:"ProductPage",params:{id:String(e.product.id)}})},o=l=>({street:"#FF6B35",elegant:"#2C3E50",chill:"#3498DB",sport:"#27AE60"})[l??""]||"#6c757d";return(l,u)=>{var h;return je(),We("div",{class:"product-card h-100",onClick:i,role:"button"},[k("div",QN,[k("img",{src:t.product.image,alt:t.product.name,class:"card-img-top"},null,8,YN),k("span",{class:"badge",style:gr({background:o(t.product.mood)})},qt((h=t.product.mood)==null?void 0:h.toUpperCase()),5)]),k("div",XN,[k("h5",JN,qt(t.product.name),1),k("p",ZN,qt(t.product.description),1),k("div",eD,[k("div",tD,[k("span",nD,qt(t.product.price.toFixed(2))+" RON",1)]),k("button",{onClick:zf(r,["stop"]),class:"btn btn-primary w-100"},[...u[0]||(u[0]=[k("i",{class:"bi bi-cart-plus"},null,-1),Pt(" Adaugă în coș ",-1)])])])])])}}}),fw=$s(sD,[["__scopeId","data-v-cc55686e"]]),rD=["src"],iD=.6,oD={__name:"Carousel",setup(t){const e=[{icon:new URL("/assets/icon1-BG5UIAfL.png",import.meta.url)},{icon:new URL("/assets/icon2-BqAixMuN.png",import.meta.url)},{icon:new URL("/assets/icon3-CFi6rLXa.png",import.meta.url)},{icon:new URL("/assets/icon4-kkwh5FnX.png",import.meta.url)},{icon:new URL("/assets/icon5-Dvzcyq1u.png",import.meta.url)},{icon:new URL("/assets/icon6-B8eKyvj1.png",import.meta.url)}],n=[...e,...e],s=_t(0);let r=null,i=!1;const o=()=>{i||(s.value-=iD),Math.abs(s.value)>=e.length*240&&(s.value=0),r=requestAnimationFrame(o)},l=()=>i=!0,u=()=>i=!1;return gc(()=>{r=requestAnimationFrame(o)}),Bf(()=>cancelAnimationFrame(r)),(h,d)=>(je(),We("div",{class:"carousel-wrapper",onMouseenter:l,onMouseleave:u},[k("div",{class:"carousel-track",style:gr({transform:`translateX(${s.value}px)`})},[(je(),We(Pn,null,Za(n,m=>k("div",{key:m.message+Math.random(),class:"carousel-item"},[k("img",{src:m.icon,alt:"icon"},null,8,rD),k("p",null,qt(m.message),1)])),64))],4)],32))}},aD=$s(oD,[["__scopeId","data-v-92cd543b"]]),dw=async()=>{try{return(await v1(t1(Bd,"products"))).docs.map(e=>({id:e.id,...e.data()}))}catch(t){return console.error("Error fetching products from Firestore:",t),[]}},cD={class:"home"},lD={class:"hero"},uD={class:"container"},hD={class:"row align-items-center min-vh-70"},fD={class:"col-lg-6 text-center text-lg-start mb-5 mb-lg-0"},dD={class:"hero-content"},pD={class:"d-flex gap-3 justify-content-center justify-content-lg-start flex-wrap"},mD={class:"carousel-section py-5"},gD={class:"container"},_D={class:"row g-4"},yD=["onClick"],vD={class:"mood-icon"},ED={class:"mood-title"},wD={class:"mood-description"},bD={class:"featured-products py-5"},TD={class:"container"},ID={key:0,class:"text-center py-5"},AD={key:1,class:"row row-cols-1 row-cols-sm-2 row-cols-lg-3 row-cols-xl-4 g-4"},RD={class:"text-center mt-5"},SD={class:"cta-section"},CD={class:"container hero2"},PD={class:"cta-card"},kD={class:"row align-items-center"},OD={class:"col-lg-4 text-center text-lg-end"},ND={__name:"Home",setup(t){const e=Qo(),n=ci(),s=_t([]),r=_t(!0),i=_t(null),o=[{name:"street",label:"Urban",icon:"bi bi-lightning-fill",color:"#FF6B35",description:"Îndrăzneț & Urban"},{name:"elegant",label:"Elegant",icon:"bi bi-gem",color:"#2C3E50",description:"Rafinat & Clasic"},{name:"chill",label:"Relaxat",icon:"bi bi-cloud-sun",color:"#3498DB",description:"Lejer & Relaxat"},{name:"sport",label:"Sport",icon:"bi bi-trophy",color:"#27AE60",description:"Activ & Dinamic"}],l=u=>{n.setMood(u),e.push("/shop")};return gc(async()=>{try{const u=await dw();s.value=u.slice(0,8)}catch(u){console.error("Eroare la încărcarea produselor:",u)}finally{r.value=!1}}),(u,h)=>{const d=Ki("router-link");return je(),We("div",cD,[k("section",lD,[h[5]||(h[5]=k("div",{class:"hero-overlay"},null,-1)),k("div",uD,[k("div",hD,[k("div",fD,[k("div",dD,[h[1]||(h[1]=k("span",{class:"badge hero-badge mb-3"},"Colecția Nouă 2025",-1)),h[2]||(h[2]=k("h1",{class:"display-2 fw-bold mb-4 animate-fade-in"},[Pt("Starea ta,"),k("br"),Pt("stilul tău")],-1)),h[3]||(h[3]=k("p",{class:"lead mb-4 hero-subtitle"},"Descoperă haine care se potrivesc cu starea ta și îți remarca stilul",-1)),k("div",pD,[$e(d,{to:"/shop",class:"btn btn-outline-light btn-lg w-100"},{default:An(()=>[...h[0]||(h[0]=[k("i",{class:"bi bi-shop me-2"},null,-1),Pt("Cumpără acum ",-1)])]),_:1})])])]),h[4]||(h[4]=k("div",{class:"col-lg-6"},[k("div",{class:"hero-image-grid"},[k("div",{class:"hero-image hero-image-1"},[k("img",{src:KN,alt:"Modă 1"})])])],-1))])])]),k("section",mD,[$e(aD)]),k("section",{class:"mood-section py-5",ref_key:"moodsSection",ref:i},[k("div",gD,[h[7]||(h[7]=k("div",{class:"text-center mb-5"},[k("h2",{class:"display-4 fw-bold mb-3"},"Găsește-ți stilul"),k("p",{class:"lead text-muted"},"Alege un vibe care se potrivește personalității și stilului tău")],-1)),k("div",_D,[(je(),We(Pn,null,Za(o,m=>k("div",{class:"col-6 col-md-3",key:m.name},[k("div",{class:"mood-card",onClick:y=>l(m.name),style:gr({"--mood-color":m.color})},[k("div",vD,[k("i",{class:dc(m.icon)},null,2)]),k("h4",ED,qt(m.label),1),k("p",wD,qt(m.description),1),h[6]||(h[6]=k("div",{class:"mood-arrow"},[k("i",{class:"bi bi-arrow-right"})],-1))],12,yD)])),64))])])],512),k("section",bD,[k("div",TD,[h[10]||(h[10]=k("div",{class:"section-header text-center mb-5"},[k("h2",{class:"display-5 fw-bold mb-3"},"Tendințe actuale"),k("p",{class:"lead text-muted"},"Stiluri pe care toată lumea le iubește")],-1)),r.value?(je(),We("div",ID,[...h[8]||(h[8]=[k("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},[k("span",{class:"visually-hidden"},"Se încarcă...")],-1)])])):(je(),We("div",AD,[(je(!0),We(Pn,null,Za(s.value,m=>(je(),We("div",{key:m.id,class:"col"},[$e(fw,{product:m},null,8,["product"])]))),128))])),k("div",RD,[$e(d,{to:"/shop",class:"btn btn-primary btn-lg px-5"},{default:An(()=>[...h[9]||(h[9]=[Pt(" Vezi toate produsele ",-1),k("i",{class:"bi bi-arrow-right ms-2"},null,-1)])]),_:1})])])]),k("section",SD,[k("div",CD,[k("div",PD,[k("div",kD,[h[12]||(h[12]=k("div",{class:"col-lg-8 text-center text-lg-start mb-4 mb-lg-0"},[k("h2",{class:"display-5 fw-bold mb-3"},"Gata să îți upgradezi garderoba?"),k("p",{class:"lead mb-0"},"Alătură-te miilor de clienți fericiți și găsește-ți stilul perfect astăzi")],-1)),k("div",OD,[$e(d,{to:"/register",class:"btn btn-light btn-lg px-5"},{default:An(()=>[...h[11]||(h[11]=[Pt(" Începe acum ",-1),k("i",{class:"bi bi-arrow-right ms-2"},null,-1)])]),_:1})])])])])])])}}},DD=$s(ND,[["__scopeId","data-v-ec21d326"]]),xD={class:"shop main-content"},VD={class:"container py-5"},LD={class:"row mb-4"},MD={class:"col-md-4 mb-3"},FD={class:"col-md-4 mb-3"},UD={class:"col-md-4 mb-3"},$D={key:0,class:"text-center py-5"},jD={key:1,class:"text-center py-5"},BD={key:2,class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-4"},qD={__name:"Shop",setup(t){const e=ci(),n=_t([]),s=_t(!0),r=_t(""),i=_t(""),o=_t(""),l=Zt(()=>n.value.filter(u=>{const h=u.name.toLowerCase().includes(r.value.toLowerCase())||u.description.toLowerCase().includes(r.value.toLowerCase()),d=!i.value||u.category===i.value,m=!o.value||u.mood===o.value;return h&&d&&m}));return No(()=>e.currentMood,u=>{o.value=u}),gc(async()=>{try{n.value=await dw()}catch(u){console.error("Eroare la încărcarea produselor:",u)}finally{s.value=!1}}),(u,h)=>(je(),We("div",xD,[k("div",VD,[h[7]||(h[7]=k("h1",{class:"mb-4"},"Toate Produsele",-1)),k("div",LD,[k("div",MD,[or(k("input",{"onUpdate:modelValue":h[0]||(h[0]=d=>r.value=d),type:"text",class:"form-control",placeholder:"Caută produse..."},null,512),[[xo,r.value]])]),k("div",FD,[or(k("select",{"onUpdate:modelValue":h[1]||(h[1]=d=>i.value=d),class:"form-select"},[...h[3]||(h[3]=[Hh('<option value="" data-v-73a288cc>Toate categoriile</option><option value="tricouri" data-v-73a288cc>Tricouri</option><option value="bottoms" data-v-73a288cc>Pantaloni</option><option value="outerwear" data-v-73a288cc>Îmbrăcăminte exterioară</option><option value="accessories" data-v-73a288cc>Accesorii</option><option value="shoes" data-v-73a288cc>Încălțăminte</option>',6)])],512),[[Gh,i.value]])]),k("div",UD,[or(k("select",{"onUpdate:modelValue":h[2]||(h[2]=d=>o.value=d),class:"form-select"},[...h[4]||(h[4]=[Hh('<option value="" data-v-73a288cc>Toate stilurile</option><option value="urban" data-v-73a288cc>Urban</option><option value="elegant" data-v-73a288cc>Elegant</option><option value="casual" data-v-73a288cc>Casual</option><option value="sport" data-v-73a288cc>Sport</option>',5)])],512),[[Gh,o.value]])])]),s.value?(je(),We("div",$D,[...h[5]||(h[5]=[k("div",{class:"spinner-border text-primary",role:"status"},[k("span",{class:"visually-hidden"},"Se încarcă...")],-1)])])):l.value.length===0?(je(),We("div",jD,[...h[6]||(h[6]=[k("i",{class:"bi bi-search display-1 text-muted"},null,-1),k("p",{class:"mt-3"},"Nu s-au găsit produse",-1)])])):(je(),We("div",BD,[(je(!0),We(Pn,null,Za(l.value,d=>(je(),We("div",{key:d.id,class:"col"},[$e(fw,{product:d},null,8,["product"])]))),128))]))])]))}},HD=$s(qD,[["__scopeId","data-v-73a288cc"]]),WD={class:"cart main-content"},zD={class:"container py-5"},GD={key:0,class:"empty-state"},KD={key:1},QD={class:"row"},YD={class:"col-lg-8"},XD={class:"card mb-4"},JD={class:"card-body"},ZD=["src","alt"],ex={class:"item-details"},tx={class:"mb-1"},nx={class:"text-muted mb-1"},sx={class:"text-primary fw-bold"},rx={class:"quantity-controls"},ix=["onClick"],ox=["value","onChange"],ax=["onClick"],cx={class:"item-total"},lx=["onClick"],ux={class:"col-lg-4"},hx={class:"card"},fx={class:"card-body"},dx={class:"d-flex justify-content-between mb-2"},px={class:"d-flex justify-content-between mb-3"},mx={class:"text-primary"},gx={__name:"Cart",setup(t){const e=kc(),n=Qo(),s=Eu(),r=Zt(()=>s.cartItems),i=Zt(()=>s.cartTotal),o=()=>{e.user?n.push("/checkout"):(localStorage.setItem("redirectAfterLogin","/cart"),alert("Trebuie să fiți logat pentru a plasa comanda. Veți fi redirecționat către pagina de autentificare."),n.push("/login"))},l=(y,w)=>{const L=parseInt(w.target.value);L>0&&s.updateQuantity(y,L)},u=y=>{s.updateQuantity(y.id,y.quantity+1)},h=y=>{y.quantity>1&&s.updateQuantity(y.id,y.quantity-1)},d=y=>{s.removeFromCart(y)},m=()=>{confirm("Sigur doriți să goliți coșul?")&&s.clearCart()};return(y,w)=>{const L=Ki("router-link");return je(),We("div",WD,[k("div",zD,[w[13]||(w[13]=k("h1",{class:"mb-4"},"Coșul de cumpărături",-1)),r.value.length===0?(je(),We("div",GD,[w[1]||(w[1]=k("i",{class:"bi bi-cart-x"},null,-1)),w[2]||(w[2]=k("h3",null,"Coșul tău este gol",-1)),w[3]||(w[3]=k("p",null,"Adaugă produse pentru a începe",-1)),$e(L,{to:"/shop",class:"btn btn-primary"},{default:An(()=>[...w[0]||(w[0]=[Pt(" Continuă cumpărăturile ",-1)])]),_:1})])):(je(),We("div",KD,[k("div",QD,[k("div",YD,[k("div",XD,[k("div",JD,[(je(!0),We(Pn,null,Za(r.value,M=>(je(),We("div",{key:M.id,class:"cart-item"},[k("img",{src:M.image,alt:M.name},null,8,ZD),k("div",ex,[k("h5",tx,qt(M.name),1),k("p",nx,qt(M.description),1),k("span",sx,qt(M.price.toFixed(2))+" RON",1)]),k("div",rx,[k("button",{onClick:U=>h(M),class:"btn btn-outline-secondary btn-sm"},[...w[4]||(w[4]=[k("i",{class:"bi bi-dash"},null,-1)])],8,ix),k("input",{type:"number",value:M.quantity,onChange:U=>l(M.id,U),class:"form-control form-control-sm",min:"1"},null,40,ox),k("button",{onClick:U=>u(M),class:"btn btn-outline-secondary btn-sm"},[...w[5]||(w[5]=[k("i",{class:"bi bi-plus"},null,-1)])],8,ax)]),k("div",cx,[k("strong",null,qt((M.price*M.quantity).toFixed(2))+" RON",1)]),k("button",{onClick:U=>d(M.id),class:"btn btn-outline-danger btn-sm"},[...w[6]||(w[6]=[k("i",{class:"bi bi-trash"},null,-1),Pt(" Șterge ",-1)])],8,lx)]))),128))])])]),k("div",ux,[k("div",hx,[k("div",fx,[w[9]||(w[9]=k("h5",{class:"card-title"},"Rezumat comandă",-1)),w[10]||(w[10]=k("hr",null,null,-1)),k("div",dx,[w[7]||(w[7]=k("span",null,"Subtotal:",-1)),k("strong",null,qt(i.value.toFixed(2))+" RON",1)]),w[11]||(w[11]=k("div",{class:"d-flex justify-content-between mb-2"},[k("span",null,"Livrare:"),k("strong",null,"Gratuit")],-1)),w[12]||(w[12]=k("hr",null,null,-1)),k("div",px,[w[8]||(w[8]=k("h5",null,"Total:",-1)),k("h5",mx,qt(i.value.toFixed(2))+" RON",1)]),k("button",{onClick:o,class:"btn btn-primary w-100 mb-2"}," Finalizare comanda "),k("button",{onClick:m,class:"btn btn-outline-secondary w-100"}," Golește coșul ")])])])])]))])])}}},_x=$s(gx,[["__scopeId","data-v-79f1643a"]]),yx={class:"login main-content"},vx={class:"container"},Ex={class:"auth-container"},wx={class:"card-body p-4"},bx={class:"mb-3"},Tx={class:"mb-3"},Ix={key:0,class:"alert alert-danger"},Ax={key:1,class:"alert alert-danger mt-3"},Rx=["disabled"],Sx={key:0,class:"spinner-border spinner-border-sm me-2"},Cx={class:"text-center mb-0"},Px={__name:"Login",setup(t){const e=ci(),n=Qo(),s=kc(),r=_t(""),i=_t(""),o=_t(""),l=_t(!1),u=async()=>{o.value="",s.error=null,l.value=!0;try{if(await s.login(r.value,i.value),!s.error){const h=localStorage.getItem("redirectAfterLogin")||"/";n.push(h),localStorage.removeItem("redirectAfterLogin")}}catch(h){console.error("Eroare la autentificare:",h),o.value="A apărut o eroare la autentificare."}finally{l.value=!1}};return(h,d)=>{const m=Ki("router-link");return je(),We("div",yx,[k("div",vx,[k("div",Ex,[k("div",{class:"card shadow",style:gr({background:ft(e).isDarkMode?"rgba(0,0,0,0.3)":"rgba(255,255,255,0.2)",border:ft(e).isDarkMode?"1px solid rgba(255,255,255,0.2)":"1px solid rgba(255,255,255,0.3)"})},[k("div",wx,[d[7]||(d[7]=k("h2",{class:"text-center mb-4"},[Pt("Autentificare în "),k("strong",null,"stillUP")],-1)),k("form",{onSubmit:zf(u,["prevent"])},[k("div",bx,[d[2]||(d[2]=k("label",{for:"email",class:"form-label"},"Email",-1)),or(k("input",{"onUpdate:modelValue":d[0]||(d[0]=y=>r.value=y),type:"email",class:"form-control",id:"email",required:"",placeholder:"Introdu adresa de email"},null,512),[[xo,r.value]])]),k("div",Tx,[d[3]||(d[3]=k("label",{for:"password",class:"form-label"},"Parolă",-1)),or(k("input",{"onUpdate:modelValue":d[1]||(d[1]=y=>i.value=y),type:"password",class:"form-control",id:"password",required:"",placeholder:"Introdu parola"},null,512),[[xo,i.value]])]),o.value?(je(),We("div",Ix,qt(o.value),1)):Fi("",!0),ft(s).error?(je(),We("div",Ax,qt(ft(s).error),1)):Fi("",!0),k("button",{type:"submit",class:"btn btn-primary w-100 mb-3",disabled:l.value},[l.value?(je(),We("span",Sx)):Fi("",!0),d[4]||(d[4]=Pt(" Autentificare ",-1))],8,Rx),k("p",Cx,[d[6]||(d[6]=Pt(" Nu ai încă un cont? ",-1)),$e(m,{to:"/register"},{default:An(()=>[...d[5]||(d[5]=[Pt("Înregistrează-te aici",-1)])]),_:1})])],32)])],4)])])])}}},kx=$s(Px,[["__scopeId","data-v-aae27434"]]),Ox={class:"register main-content"},Nx={class:"container"},Dx={class:"auth-container"},xx={class:"card-body p-4"},Vx={class:"mb-3"},Lx={class:"mb-3"},Mx={class:"mb-3"},Fx={key:0,class:"alert alert-danger"},Ux={key:1,class:"alert alert-danger mt-3"},$x=["disabled"],jx={key:0,class:"spinner-border spinner-border-sm me-2"},Bx={class:"text-center mb-0"},qx={__name:"Register",setup(t){const e=ci(),n=Qo(),s=kc(),r=_t(""),i=_t(""),o=_t(""),l=_t(""),u=_t(!1),h=async()=>{if(l.value="",s.error=null,i.value!==o.value){l.value="Parolele nu se potrivesc.";return}if(i.value.length<6){l.value="Parola trebuie să aibă cel puțin 6 caractere.";return}u.value=!0;try{if(await s.register(r.value,i.value),!s.error){const d=localStorage.getItem("redirectAfterLogin")||"/";n.push(d),localStorage.removeItem("redirectAfterLogin")}}catch(d){console.error("Eroare la înregistrare:",d),l.value="A apărut o eroare la crearea contului."}finally{u.value=!1}};return(d,m)=>{const y=Ki("router-link");return je(),We("div",Ox,[k("div",Nx,[k("div",Dx,[k("div",{class:"card shadow",style:gr({background:ft(e).isDarkMode?"rgba(0,0,0,0.3)":"rgba(255,255,255,0.2)",border:ft(e).isDarkMode?"1px solid rgba(255,255,255,0.2)":"1px solid rgba(255,255,255,0.3)"})},[k("div",xx,[m[9]||(m[9]=k("h2",{class:"text-center mb-4"},"Creează un cont",-1)),k("form",{onSubmit:zf(h,["prevent"])},[k("div",Vx,[m[3]||(m[3]=k("label",{for:"email",class:"form-label"},"Adresă de email",-1)),or(k("input",{"onUpdate:modelValue":m[0]||(m[0]=w=>r.value=w),type:"email",class:"form-control",id:"email",required:"",placeholder:"Introdu adresa ta de email"},null,512),[[xo,r.value]])]),k("div",Lx,[m[4]||(m[4]=k("label",{for:"password",class:"form-label"},"Parolă",-1)),or(k("input",{"onUpdate:modelValue":m[1]||(m[1]=w=>i.value=w),type:"password",class:"form-control",id:"password",required:"",placeholder:"Cel puțin 6 caractere"},null,512),[[xo,i.value]])]),k("div",Mx,[m[5]||(m[5]=k("label",{for:"confirmPassword",class:"form-label"},"Confirmă parola",-1)),or(k("input",{"onUpdate:modelValue":m[2]||(m[2]=w=>o.value=w),type:"password",class:"form-control",id:"confirmPassword",required:"",placeholder:"Reintrodu parola"},null,512),[[xo,o.value]])]),l.value?(je(),We("div",Fx,qt(l.value),1)):Fi("",!0),ft(s).error?(je(),We("div",Ux,qt(ft(s).error),1)):Fi("",!0),k("button",{type:"submit",class:"btn btn-primary w-100 mb-3",disabled:u.value},[u.value?(je(),We("span",jx)):Fi("",!0),m[6]||(m[6]=Pt(" Înregistrează-te ",-1))],8,$x),k("p",Bx,[m[8]||(m[8]=Pt(" Ai deja un cont? ",-1)),$e(y,{to:"/login"},{default:An(()=>[...m[7]||(m[7]=[Pt("Autentifică-te aici",-1)])]),_:1})])],32)])],4)])])])}}},Hx=$s(qx,[["__scopeId","data-v-1109d671"]]),Wx=[{path:"/",name:"Home",component:DD},{path:"/shop",name:"Shop",component:HD},{path:"/cart",name:"Cart",component:_x},{path:"/login",name:"Login",component:kx},{path:"/register",name:"Register",component:Hx},{path:"/product/:id",name:"ProductPage",component:()=>GN(()=>import("./ProductPage-BMG38cMg.js"),__vite__mapDeps([0,1]))}],zx=wR({history:ZA(),routes:Wx});var Gx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Kx={exports:{}};/*!
  * Bootstrap v5.3.8 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(t,e){(function(n,s){t.exports=s()})(Gx,function(){const n=new Map,s={set(_,c,p){n.has(_)||n.set(_,new Map);const v=n.get(_);v.has(c)||v.size===0?v.set(c,p):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(v.keys())[0]}.`)},get:(_,c)=>n.has(_)&&n.get(_).get(c)||null,remove(_,c){if(!n.has(_))return;const p=n.get(_);p.delete(c),p.size===0&&n.delete(_)}},r="transitionend",i=_=>(_&&window.CSS&&window.CSS.escape&&(_=_.replace(/#([^\s"#']+)/g,(c,p)=>`#${CSS.escape(p)}`)),_),o=_=>_==null?`${_}`:Object.prototype.toString.call(_).match(/\s([a-z]+)/i)[1].toLowerCase(),l=_=>{_.dispatchEvent(new Event(r))},u=_=>!(!_||typeof _!="object")&&(_.jquery!==void 0&&(_=_[0]),_.nodeType!==void 0),h=_=>u(_)?_.jquery?_[0]:_:typeof _=="string"&&_.length>0?document.querySelector(i(_)):null,d=_=>{if(!u(_)||_.getClientRects().length===0)return!1;const c=getComputedStyle(_).getPropertyValue("visibility")==="visible",p=_.closest("details:not([open])");if(!p)return c;if(p!==_){const v=_.closest("summary");if(v&&v.parentNode!==p||v===null)return!1}return c},m=_=>!_||_.nodeType!==Node.ELEMENT_NODE||!!_.classList.contains("disabled")||(_.disabled!==void 0?_.disabled:_.hasAttribute("disabled")&&_.getAttribute("disabled")!=="false"),y=_=>{if(!document.documentElement.attachShadow)return null;if(typeof _.getRootNode=="function"){const c=_.getRootNode();return c instanceof ShadowRoot?c:null}return _ instanceof ShadowRoot?_:_.parentNode?y(_.parentNode):null},w=()=>{},L=_=>{_.offsetHeight},M=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,U=[],Y=()=>document.documentElement.dir==="rtl",K=_=>{var c;c=()=>{const p=M();if(p){const v=_.NAME,O=p.fn[v];p.fn[v]=_.jQueryInterface,p.fn[v].Constructor=_,p.fn[v].noConflict=()=>(p.fn[v]=O,_.jQueryInterface)}},document.readyState==="loading"?(U.length||document.addEventListener("DOMContentLoaded",()=>{for(const p of U)p()}),U.push(c)):c()},X=(_,c=[],p=_)=>typeof _=="function"?_.call(...c):p,ne=(_,c,p=!0)=>{if(!p)return void X(_);const v=($=>{if(!$)return 0;let{transitionDuration:J,transitionDelay:re}=window.getComputedStyle($);const he=Number.parseFloat(J),fe=Number.parseFloat(re);return he||fe?(J=J.split(",")[0],re=re.split(",")[0],1e3*(Number.parseFloat(J)+Number.parseFloat(re))):0})(c)+5;let O=!1;const N=({target:$})=>{$===c&&(O=!0,c.removeEventListener(r,N),X(_))};c.addEventListener(r,N),setTimeout(()=>{O||l(c)},v)},de=(_,c,p,v)=>{const O=_.length;let N=_.indexOf(c);return N===-1?!p&&v?_[O-1]:_[0]:(N+=p?1:-1,v&&(N=(N+O)%O),_[Math.max(0,Math.min(N,O-1))])},Se=/[^.]*(?=\..*)\.|.*/,S=/\..*/,b=/::\d+$/,T={};let P=1;const C={mouseenter:"mouseover",mouseleave:"mouseout"},x=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function A(_,c){return c&&`${c}::${P++}`||_.uidEvent||P++}function pt(_){const c=A(_);return _.uidEvent=c,T[c]=T[c]||{},T[c]}function Ut(_,c,p=null){return Object.values(_).find(v=>v.callable===c&&v.delegationSelector===p)}function et(_,c,p){const v=typeof c=="string",O=v?p:c||p;let N=kn(_);return x.has(N)||(N=_),[v,O,N]}function Te(_,c,p,v,O){if(typeof c!="string"||!_)return;let[N,$,J]=et(c,p,v);c in C&&($=(Ce=>function(Ae){if(!Ae.relatedTarget||Ae.relatedTarget!==Ae.delegateTarget&&!Ae.delegateTarget.contains(Ae.relatedTarget))return Ce.call(this,Ae)})($));const re=pt(_),he=re[J]||(re[J]={}),fe=Ut(he,$,N?p:null);if(fe)return void(fe.oneOff=fe.oneOff&&O);const ce=A($,c.replace(Se,"")),De=N?function(ve,Ce,Ae){return function Pe(rt){const ut=ve.querySelectorAll(Ce);for(let{target:Me}=rt;Me&&Me!==this;Me=Me.parentNode)for(const Ye of ut)if(Ye===Me)return Tt(rt,{delegateTarget:Me}),Pe.oneOff&&z.off(ve,rt.type,Ce,Ae),Ae.apply(Me,[rt])}}(_,p,$):function(ve,Ce){return function Ae(Pe){return Tt(Pe,{delegateTarget:ve}),Ae.oneOff&&z.off(ve,Pe.type,Ce),Ce.apply(ve,[Pe])}}(_,$);De.delegationSelector=N?p:null,De.callable=$,De.oneOff=O,De.uidEvent=ce,he[ce]=De,_.addEventListener(J,De,N)}function Ve(_,c,p,v,O){const N=Ut(c[p],v,O);N&&(_.removeEventListener(p,N,!!O),delete c[p][N.uidEvent])}function nn(_,c,p,v){const O=c[p]||{};for(const[N,$]of Object.entries(O))N.includes(v)&&Ve(_,c,p,$.callable,$.delegationSelector)}function kn(_){return _=_.replace(S,""),C[_]||_}const z={on(_,c,p,v){Te(_,c,p,v,!1)},one(_,c,p,v){Te(_,c,p,v,!0)},off(_,c,p,v){if(typeof c!="string"||!_)return;const[O,N,$]=et(c,p,v),J=$!==c,re=pt(_),he=re[$]||{},fe=c.startsWith(".");if(N===void 0){if(fe)for(const ce of Object.keys(re))nn(_,re,ce,c.slice(1));for(const[ce,De]of Object.entries(he)){const ve=ce.replace(b,"");J&&!c.includes(ve)||Ve(_,re,$,De.callable,De.delegationSelector)}}else{if(!Object.keys(he).length)return;Ve(_,re,$,N,O?p:null)}},trigger(_,c,p){if(typeof c!="string"||!_)return null;const v=M();let O=null,N=!0,$=!0,J=!1;c!==kn(c)&&v&&(O=v.Event(c,p),v(_).trigger(O),N=!O.isPropagationStopped(),$=!O.isImmediatePropagationStopped(),J=O.isDefaultPrevented());const re=Tt(new Event(c,{bubbles:N,cancelable:!0}),p);return J&&re.preventDefault(),$&&_.dispatchEvent(re),re.defaultPrevented&&O&&O.preventDefault(),re}};function Tt(_,c={}){for(const[p,v]of Object.entries(c))try{_[p]=v}catch{Object.defineProperty(_,p,{configurable:!0,get:()=>v})}return _}function Mn(_){if(_==="true")return!0;if(_==="false")return!1;if(_===Number(_).toString())return Number(_);if(_===""||_==="null")return null;if(typeof _!="string")return _;try{return JSON.parse(decodeURIComponent(_))}catch{return _}}function yn(_){return _.replace(/[A-Z]/g,c=>`-${c.toLowerCase()}`)}const It={setDataAttribute(_,c,p){_.setAttribute(`data-bs-${yn(c)}`,p)},removeDataAttribute(_,c){_.removeAttribute(`data-bs-${yn(c)}`)},getDataAttributes(_){if(!_)return{};const c={},p=Object.keys(_.dataset).filter(v=>v.startsWith("bs")&&!v.startsWith("bsConfig"));for(const v of p){let O=v.replace(/^bs/,"");O=O.charAt(0).toLowerCase()+O.slice(1),c[O]=Mn(_.dataset[v])}return c},getDataAttribute:(_,c)=>Mn(_.getAttribute(`data-bs-${yn(c)}`))};class vt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(c){return c=this._mergeConfigObj(c),c=this._configAfterMerge(c),this._typeCheckConfig(c),c}_configAfterMerge(c){return c}_mergeConfigObj(c,p){const v=u(p)?It.getDataAttribute(p,"config"):{};return{...this.constructor.Default,...typeof v=="object"?v:{},...u(p)?It.getDataAttributes(p):{},...typeof c=="object"?c:{}}}_typeCheckConfig(c,p=this.constructor.DefaultType){for(const[v,O]of Object.entries(p)){const N=c[v],$=u(N)?"element":o(N);if(!new RegExp(O).test($))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${v}" provided type "${$}" but expected type "${O}".`)}}}class B extends vt{constructor(c,p){super(),(c=h(c))&&(this._element=c,this._config=this._getConfig(p),s.set(this._element,this.constructor.DATA_KEY,this))}dispose(){s.remove(this._element,this.constructor.DATA_KEY),z.off(this._element,this.constructor.EVENT_KEY);for(const c of Object.getOwnPropertyNames(this))this[c]=null}_queueCallback(c,p,v=!0){ne(c,p,v)}_getConfig(c){return c=this._mergeConfigObj(c,this._element),c=this._configAfterMerge(c),this._typeCheckConfig(c),c}static getInstance(c){return s.get(h(c),this.DATA_KEY)}static getOrCreateInstance(c,p={}){return this.getInstance(c)||new this(c,typeof p=="object"?p:null)}static get VERSION(){return"5.3.8"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(c){return`${c}${this.EVENT_KEY}`}}const ae=_=>{let c=_.getAttribute("data-bs-target");if(!c||c==="#"){let p=_.getAttribute("href");if(!p||!p.includes("#")&&!p.startsWith("."))return null;p.includes("#")&&!p.startsWith("#")&&(p=`#${p.split("#")[1]}`),c=p&&p!=="#"?p.trim():null}return c?c.split(",").map(p=>i(p)).join(","):null},j={find:(_,c=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(c,_)),findOne:(_,c=document.documentElement)=>Element.prototype.querySelector.call(c,_),children:(_,c)=>[].concat(..._.children).filter(p=>p.matches(c)),parents(_,c){const p=[];let v=_.parentNode.closest(c);for(;v;)p.push(v),v=v.parentNode.closest(c);return p},prev(_,c){let p=_.previousElementSibling;for(;p;){if(p.matches(c))return[p];p=p.previousElementSibling}return[]},next(_,c){let p=_.nextElementSibling;for(;p;){if(p.matches(c))return[p];p=p.nextElementSibling}return[]},focusableChildren(_){const c=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(p=>`${p}:not([tabindex^="-"])`).join(",");return this.find(c,_).filter(p=>!m(p)&&d(p))},getSelectorFromElement(_){const c=ae(_);return c&&j.findOne(c)?c:null},getElementFromSelector(_){const c=ae(_);return c?j.findOne(c):null},getMultipleElementsFromSelector(_){const c=ae(_);return c?j.find(c):[]}},pe=(_,c="hide")=>{const p=`click.dismiss${_.EVENT_KEY}`,v=_.NAME;z.on(document,p,`[data-bs-dismiss="${v}"]`,function(O){if(["A","AREA"].includes(this.tagName)&&O.preventDefault(),m(this))return;const N=j.getElementFromSelector(this)||this.closest(`.${v}`);_.getOrCreateInstance(N)[c]()})},Le=".bs.alert",I=`close${Le}`,R=`closed${Le}`;class D extends B{static get NAME(){return"alert"}close(){if(z.trigger(this._element,I).defaultPrevented)return;this._element.classList.remove("show");const c=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,c)}_destroyElement(){this._element.remove(),z.trigger(this._element,R),this.dispose()}static jQueryInterface(c){return this.each(function(){const p=D.getOrCreateInstance(this);if(typeof c=="string"){if(p[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);p[c](this)}})}}pe(D,"close"),K(D);const H='[data-bs-toggle="button"]';class W extends B{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(c){return this.each(function(){const p=W.getOrCreateInstance(this);c==="toggle"&&p[c]()})}}z.on(document,"click.bs.button.data-api",H,_=>{_.preventDefault();const c=_.target.closest(H);W.getOrCreateInstance(c).toggle()}),K(W);const q=".bs.swipe",ie=`touchstart${q}`,te=`touchmove${q}`,Z=`touchend${q}`,ee=`pointerdown${q}`,ye=`pointerup${q}`,oe={endCallback:null,leftCallback:null,rightCallback:null},me={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class ge extends vt{constructor(c,p){super(),this._element=c,c&&ge.isSupported()&&(this._config=this._getConfig(p),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return oe}static get DefaultType(){return me}static get NAME(){return"swipe"}dispose(){z.off(this._element,q)}_start(c){this._supportPointerEvents?this._eventIsPointerPenTouch(c)&&(this._deltaX=c.clientX):this._deltaX=c.touches[0].clientX}_end(c){this._eventIsPointerPenTouch(c)&&(this._deltaX=c.clientX-this._deltaX),this._handleSwipe(),X(this._config.endCallback)}_move(c){this._deltaX=c.touches&&c.touches.length>1?0:c.touches[0].clientX-this._deltaX}_handleSwipe(){const c=Math.abs(this._deltaX);if(c<=40)return;const p=c/this._deltaX;this._deltaX=0,p&&X(p>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(z.on(this._element,ee,c=>this._start(c)),z.on(this._element,ye,c=>this._end(c)),this._element.classList.add("pointer-event")):(z.on(this._element,ie,c=>this._start(c)),z.on(this._element,te,c=>this._move(c)),z.on(this._element,Z,c=>this._end(c)))}_eventIsPointerPenTouch(c){return this._supportPointerEvents&&(c.pointerType==="pen"||c.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Ie=".bs.carousel",Ke=".data-api",qe="ArrowLeft",Wt="ArrowRight",Et="next",Ot="prev",Nt="left",sn="right",yr=`slide${Ie}`,At=`slid${Ie}`,Dt=`keydown${Ie}`,li=`mouseenter${Ie}`,js=`mouseleave${Ie}`,Oc=`dragstart${Ie}`,ui=`load${Ie}${Ke}`,Nc=`click${Ie}${Ke}`,zt="carousel",hi="active",vr=".active",Er=".carousel-item",Bu=vr+Er,qu={[qe]:sn,[Wt]:Nt},wr={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Hu={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class br extends B{constructor(c,p){super(c,p),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=j.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===zt&&this.cycle()}static get Default(){return wr}static get DefaultType(){return Hu}static get NAME(){return"carousel"}next(){this._slide(Et)}nextWhenVisible(){!document.hidden&&d(this._element)&&this.next()}prev(){this._slide(Ot)}pause(){this._isSliding&&l(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?z.one(this._element,At,()=>this.cycle()):this.cycle())}to(c){const p=this._getItems();if(c>p.length-1||c<0)return;if(this._isSliding)return void z.one(this._element,At,()=>this.to(c));const v=this._getItemIndex(this._getActive());if(v===c)return;const O=c>v?Et:Ot;this._slide(O,p[c])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(c){return c.defaultInterval=c.interval,c}_addEventListeners(){this._config.keyboard&&z.on(this._element,Dt,c=>this._keydown(c)),this._config.pause==="hover"&&(z.on(this._element,li,()=>this.pause()),z.on(this._element,js,()=>this._maybeEnableCycle())),this._config.touch&&ge.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const p of j.find(".carousel-item img",this._element))z.on(p,Oc,v=>v.preventDefault());const c={leftCallback:()=>this._slide(this._directionToOrder(Nt)),rightCallback:()=>this._slide(this._directionToOrder(sn)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new ge(this._element,c)}_keydown(c){if(/input|textarea/i.test(c.target.tagName))return;const p=qu[c.key];p&&(c.preventDefault(),this._slide(this._directionToOrder(p)))}_getItemIndex(c){return this._getItems().indexOf(c)}_setActiveIndicatorElement(c){if(!this._indicatorsElement)return;const p=j.findOne(vr,this._indicatorsElement);p.classList.remove(hi),p.removeAttribute("aria-current");const v=j.findOne(`[data-bs-slide-to="${c}"]`,this._indicatorsElement);v&&(v.classList.add(hi),v.setAttribute("aria-current","true"))}_updateInterval(){const c=this._activeElement||this._getActive();if(!c)return;const p=Number.parseInt(c.getAttribute("data-bs-interval"),10);this._config.interval=p||this._config.defaultInterval}_slide(c,p=null){if(this._isSliding)return;const v=this._getActive(),O=c===Et,N=p||de(this._getItems(),v,O,this._config.wrap);if(N===v)return;const $=this._getItemIndex(N),J=ce=>z.trigger(this._element,ce,{relatedTarget:N,direction:this._orderToDirection(c),from:this._getItemIndex(v),to:$});if(J(yr).defaultPrevented||!v||!N)return;const re=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement($),this._activeElement=N;const he=O?"carousel-item-start":"carousel-item-end",fe=O?"carousel-item-next":"carousel-item-prev";N.classList.add(fe),L(N),v.classList.add(he),N.classList.add(he),this._queueCallback(()=>{N.classList.remove(he,fe),N.classList.add(hi),v.classList.remove(hi,fe,he),this._isSliding=!1,J(At)},v,this._isAnimated()),re&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return j.findOne(Bu,this._element)}_getItems(){return j.find(Er,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(c){return Y()?c===Nt?Ot:Et:c===Nt?Et:Ot}_orderToDirection(c){return Y()?c===Ot?Nt:sn:c===Ot?sn:Nt}static jQueryInterface(c){return this.each(function(){const p=br.getOrCreateInstance(this,c);if(typeof c!="number"){if(typeof c=="string"){if(p[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);p[c]()}}else p.to(c)})}}z.on(document,Nc,"[data-bs-slide], [data-bs-slide-to]",function(_){const c=j.getElementFromSelector(this);if(!c||!c.classList.contains(zt))return;_.preventDefault();const p=br.getOrCreateInstance(c),v=this.getAttribute("data-bs-slide-to");return v?(p.to(v),void p._maybeEnableCycle()):It.getDataAttribute(this,"slide")==="next"?(p.next(),void p._maybeEnableCycle()):(p.prev(),void p._maybeEnableCycle())}),z.on(window,ui,()=>{const _=j.find('[data-bs-ride="carousel"]');for(const c of _)br.getOrCreateInstance(c)}),K(br);const us=".bs.collapse",Dc=`show${us}`,xc=`shown${us}`,na=`hide${us}`,fi=`hidden${us}`,Wu=`click${us}.data-api`,Fn="show",Bs="collapse",di="collapsing",sa=`:scope .${Bs} .${Bs}`,pi='[data-bs-toggle="collapse"]',Vc={parent:null,toggle:!0},zu={parent:"(null|element)",toggle:"boolean"};class qs extends B{constructor(c,p){super(c,p),this._isTransitioning=!1,this._triggerArray=[];const v=j.find(pi);for(const O of v){const N=j.getSelectorFromElement(O),$=j.find(N).filter(J=>J===this._element);N!==null&&$.length&&this._triggerArray.push(O)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Vc}static get DefaultType(){return zu}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let c=[];if(this._config.parent&&(c=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(O=>O!==this._element).map(O=>qs.getOrCreateInstance(O,{toggle:!1}))),c.length&&c[0]._isTransitioning||z.trigger(this._element,Dc).defaultPrevented)return;for(const O of c)O.hide();const p=this._getDimension();this._element.classList.remove(Bs),this._element.classList.add(di),this._element.style[p]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const v=`scroll${p[0].toUpperCase()+p.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(di),this._element.classList.add(Bs,Fn),this._element.style[p]="",z.trigger(this._element,xc)},this._element,!0),this._element.style[p]=`${this._element[v]}px`}hide(){if(this._isTransitioning||!this._isShown()||z.trigger(this._element,na).defaultPrevented)return;const c=this._getDimension();this._element.style[c]=`${this._element.getBoundingClientRect()[c]}px`,L(this._element),this._element.classList.add(di),this._element.classList.remove(Bs,Fn);for(const p of this._triggerArray){const v=j.getElementFromSelector(p);v&&!this._isShown(v)&&this._addAriaAndCollapsedClass([p],!1)}this._isTransitioning=!0,this._element.style[c]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(di),this._element.classList.add(Bs),z.trigger(this._element,fi)},this._element,!0)}_isShown(c=this._element){return c.classList.contains(Fn)}_configAfterMerge(c){return c.toggle=!!c.toggle,c.parent=h(c.parent),c}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const c=this._getFirstLevelChildren(pi);for(const p of c){const v=j.getElementFromSelector(p);v&&this._addAriaAndCollapsedClass([p],this._isShown(v))}}_getFirstLevelChildren(c){const p=j.find(sa,this._config.parent);return j.find(c,this._config.parent).filter(v=>!p.includes(v))}_addAriaAndCollapsedClass(c,p){if(c.length)for(const v of c)v.classList.toggle("collapsed",!p),v.setAttribute("aria-expanded",p)}static jQueryInterface(c){const p={};return typeof c=="string"&&/show|hide/.test(c)&&(p.toggle=!1),this.each(function(){const v=qs.getOrCreateInstance(this,p);if(typeof c=="string"){if(v[c]===void 0)throw new TypeError(`No method named "${c}"`);v[c]()}})}}z.on(document,Wu,pi,function(_){(_.target.tagName==="A"||_.delegateTarget&&_.delegateTarget.tagName==="A")&&_.preventDefault();for(const c of j.getMultipleElementsFromSelector(this))qs.getOrCreateInstance(c,{toggle:!1}).toggle()}),K(qs);var Yt="top",Gt="bottom",rn="right",$t="left",hs="auto",Rn=[Yt,Gt,rn,$t],Xn="start",Tr="end",ra="clippingParents",no="viewport",Hs="popper",so="reference",mi=Rn.reduce(function(_,c){return _.concat([c+"-"+Xn,c+"-"+Tr])},[]),ro=[].concat(Rn,[hs]).reduce(function(_,c){return _.concat([c,c+"-"+Xn,c+"-"+Tr])},[]),ia="beforeRead",oa="read",Lc="afterRead",Jn="beforeMain",On="main",Ir="afterMain",Ar="beforeWrite",io="write",st="afterWrite",gi=[ia,oa,Lc,Jn,On,Ir,Ar,io,st];function on(_){return _?(_.nodeName||"").toLowerCase():null}function jt(_){if(_==null)return window;if(_.toString()!=="[object Window]"){var c=_.ownerDocument;return c&&c.defaultView||window}return _}function Ws(_){return _ instanceof jt(_).Element||_ instanceof Element}function vn(_){return _ instanceof jt(_).HTMLElement||_ instanceof HTMLElement}function aa(_){return typeof ShadowRoot<"u"&&(_ instanceof jt(_).ShadowRoot||_ instanceof ShadowRoot)}const ca={name:"applyStyles",enabled:!0,phase:"write",fn:function(_){var c=_.state;Object.keys(c.elements).forEach(function(p){var v=c.styles[p]||{},O=c.attributes[p]||{},N=c.elements[p];vn(N)&&on(N)&&(Object.assign(N.style,v),Object.keys(O).forEach(function($){var J=O[$];J===!1?N.removeAttribute($):N.setAttribute($,J===!0?"":J)}))})},effect:function(_){var c=_.state,p={popper:{position:c.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(c.elements.popper.style,p.popper),c.styles=p,c.elements.arrow&&Object.assign(c.elements.arrow.style,p.arrow),function(){Object.keys(c.elements).forEach(function(v){var O=c.elements[v],N=c.attributes[v]||{},$=Object.keys(c.styles.hasOwnProperty(v)?c.styles[v]:p[v]).reduce(function(J,re){return J[re]="",J},{});vn(O)&&on(O)&&(Object.assign(O.style,$),Object.keys(N).forEach(function(J){O.removeAttribute(J)}))})}},requires:["computeStyles"]};function Un(_){return _.split("-")[0]}var zs=Math.max,fs=Math.min,Sn=Math.round;function oo(){var _=navigator.userAgentData;return _!=null&&_.brands&&Array.isArray(_.brands)?_.brands.map(function(c){return c.brand+"/"+c.version}).join(" "):navigator.userAgent}function la(){return!/^((?!chrome|android).)*safari/i.test(oo())}function Gs(_,c,p){c===void 0&&(c=!1),p===void 0&&(p=!1);var v=_.getBoundingClientRect(),O=1,N=1;c&&vn(_)&&(O=_.offsetWidth>0&&Sn(v.width)/_.offsetWidth||1,N=_.offsetHeight>0&&Sn(v.height)/_.offsetHeight||1);var $=(Ws(_)?jt(_):window).visualViewport,J=!la()&&p,re=(v.left+(J&&$?$.offsetLeft:0))/O,he=(v.top+(J&&$?$.offsetTop:0))/N,fe=v.width/O,ce=v.height/N;return{width:fe,height:ce,top:he,right:re+fe,bottom:he+ce,left:re,x:re,y:he}}function ao(_){var c=Gs(_),p=_.offsetWidth,v=_.offsetHeight;return Math.abs(c.width-p)<=1&&(p=c.width),Math.abs(c.height-v)<=1&&(v=c.height),{x:_.offsetLeft,y:_.offsetTop,width:p,height:v}}function ua(_,c){var p=c.getRootNode&&c.getRootNode();if(_.contains(c))return!0;if(p&&aa(p)){var v=c;do{if(v&&_.isSameNode(v))return!0;v=v.parentNode||v.host}while(v)}return!1}function an(_){return jt(_).getComputedStyle(_)}function Gu(_){return["table","td","th"].indexOf(on(_))>=0}function ds(_){return((Ws(_)?_.ownerDocument:_.document)||window.document).documentElement}function co(_){return on(_)==="html"?_:_.assignedSlot||_.parentNode||(aa(_)?_.host:null)||ds(_)}function Zn(_){return vn(_)&&an(_).position!=="fixed"?_.offsetParent:null}function _i(_){for(var c=jt(_),p=Zn(_);p&&Gu(p)&&an(p).position==="static";)p=Zn(p);return p&&(on(p)==="html"||on(p)==="body"&&an(p).position==="static")?c:p||function(v){var O=/firefox/i.test(oo());if(/Trident/i.test(oo())&&vn(v)&&an(v).position==="fixed")return null;var N=co(v);for(aa(N)&&(N=N.host);vn(N)&&["html","body"].indexOf(on(N))<0;){var $=an(N);if($.transform!=="none"||$.perspective!=="none"||$.contain==="paint"||["transform","perspective"].indexOf($.willChange)!==-1||O&&$.willChange==="filter"||O&&$.filter&&$.filter!=="none")return N;N=N.parentNode}return null}(_)||c}function yi(_){return["top","bottom"].indexOf(_)>=0?"x":"y"}function ps(_,c,p){return zs(_,fs(c,p))}function ha(_){return Object.assign({},{top:0,right:0,bottom:0,left:0},_)}function Rr(_,c){return c.reduce(function(p,v){return p[v]=_,p},{})}const Sr={name:"arrow",enabled:!0,phase:"main",fn:function(_){var c,p=_.state,v=_.name,O=_.options,N=p.elements.arrow,$=p.modifiersData.popperOffsets,J=Un(p.placement),re=yi(J),he=[$t,rn].indexOf(J)>=0?"height":"width";if(N&&$){var fe=function(it,nt){return ha(typeof(it=typeof it=="function"?it(Object.assign({},nt.rects,{placement:nt.placement})):it)!="number"?it:Rr(it,Rn))}(O.padding,p),ce=ao(N),De=re==="y"?Yt:$t,ve=re==="y"?Gt:rn,Ce=p.rects.reference[he]+p.rects.reference[re]-$[re]-p.rects.popper[he],Ae=$[re]-p.rects.reference[re],Pe=_i(N),rt=Pe?re==="y"?Pe.clientHeight||0:Pe.clientWidth||0:0,ut=Ce/2-Ae/2,Me=fe[De],Ye=rt-ce[he]-fe[ve],xe=rt/2-ce[he]/2+ut,He=ps(Me,xe,Ye),tt=re;p.modifiersData[v]=((c={})[tt]=He,c.centerOffset=He-xe,c)}},effect:function(_){var c=_.state,p=_.options.element,v=p===void 0?"[data-popper-arrow]":p;v!=null&&(typeof v!="string"||(v=c.elements.popper.querySelector(v)))&&ua(c.elements.popper,v)&&(c.elements.arrow=v)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ks(_){return _.split("-")[1]}var fa={top:"auto",right:"auto",bottom:"auto",left:"auto"};function mt(_){var c,p=_.popper,v=_.popperRect,O=_.placement,N=_.variation,$=_.offsets,J=_.position,re=_.gpuAcceleration,he=_.adaptive,fe=_.roundOffsets,ce=_.isFixed,De=$.x,ve=De===void 0?0:De,Ce=$.y,Ae=Ce===void 0?0:Ce,Pe=typeof fe=="function"?fe({x:ve,y:Ae}):{x:ve,y:Ae};ve=Pe.x,Ae=Pe.y;var rt=$.hasOwnProperty("x"),ut=$.hasOwnProperty("y"),Me=$t,Ye=Yt,xe=window;if(he){var He=_i(p),tt="clientHeight",it="clientWidth";He===jt(p)&&an(He=ds(p)).position!=="static"&&J==="absolute"&&(tt="scrollHeight",it="scrollWidth"),(O===Yt||(O===$t||O===rn)&&N===Tr)&&(Ye=Gt,Ae-=(ce&&He===xe&&xe.visualViewport?xe.visualViewport.height:He[tt])-v.height,Ae*=re?1:-1),O!==$t&&(O!==Yt&&O!==Gt||N!==Tr)||(Me=rn,ve-=(ce&&He===xe&&xe.visualViewport?xe.visualViewport.width:He[it])-v.width,ve*=re?1:-1)}var nt,St=Object.assign({position:J},he&&fa),Nn=fe===!0?function(ns,En){var qn=ns.x,Hn=ns.y,wt=En.devicePixelRatio||1;return{x:Sn(qn*wt)/wt||0,y:Sn(Hn*wt)/wt||0}}({x:ve,y:Ae},jt(p)):{x:ve,y:Ae};return ve=Nn.x,Ae=Nn.y,re?Object.assign({},St,((nt={})[Ye]=ut?"0":"",nt[Me]=rt?"0":"",nt.transform=(xe.devicePixelRatio||1)<=1?"translate("+ve+"px, "+Ae+"px)":"translate3d("+ve+"px, "+Ae+"px, 0)",nt)):Object.assign({},St,((c={})[Ye]=ut?Ae+"px":"",c[Me]=rt?ve+"px":"",c.transform="",c))}const da={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(_){var c=_.state,p=_.options,v=p.gpuAcceleration,O=v===void 0||v,N=p.adaptive,$=N===void 0||N,J=p.roundOffsets,re=J===void 0||J,he={placement:Un(c.placement),variation:Ks(c.placement),popper:c.elements.popper,popperRect:c.rects.popper,gpuAcceleration:O,isFixed:c.options.strategy==="fixed"};c.modifiersData.popperOffsets!=null&&(c.styles.popper=Object.assign({},c.styles.popper,mt(Object.assign({},he,{offsets:c.modifiersData.popperOffsets,position:c.options.strategy,adaptive:$,roundOffsets:re})))),c.modifiersData.arrow!=null&&(c.styles.arrow=Object.assign({},c.styles.arrow,mt(Object.assign({},he,{offsets:c.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:re})))),c.attributes.popper=Object.assign({},c.attributes.popper,{"data-popper-placement":c.placement})},data:{}};var lo={passive:!0};const uo={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(_){var c=_.state,p=_.instance,v=_.options,O=v.scroll,N=O===void 0||O,$=v.resize,J=$===void 0||$,re=jt(c.elements.popper),he=[].concat(c.scrollParents.reference,c.scrollParents.popper);return N&&he.forEach(function(fe){fe.addEventListener("scroll",p.update,lo)}),J&&re.addEventListener("resize",p.update,lo),function(){N&&he.forEach(function(fe){fe.removeEventListener("scroll",p.update,lo)}),J&&re.removeEventListener("resize",p.update,lo)}},data:{}};var Mc={left:"right",right:"left",bottom:"top",top:"bottom"};function vi(_){return _.replace(/left|right|bottom|top/g,function(c){return Mc[c]})}var ho={start:"end",end:"start"};function es(_){return _.replace(/start|end/g,function(c){return ho[c]})}function fo(_){var c=jt(_);return{scrollLeft:c.pageXOffset,scrollTop:c.pageYOffset}}function pa(_){return Gs(ds(_)).left+fo(_).scrollLeft}function Qs(_){var c=an(_),p=c.overflow,v=c.overflowX,O=c.overflowY;return/auto|scroll|overlay|hidden/.test(p+O+v)}function ma(_){return["html","body","#document"].indexOf(on(_))>=0?_.ownerDocument.body:vn(_)&&Qs(_)?_:ma(co(_))}function Ys(_,c){var p;c===void 0&&(c=[]);var v=ma(_),O=v===((p=_.ownerDocument)==null?void 0:p.body),N=jt(v),$=O?[N].concat(N.visualViewport||[],Qs(v)?v:[]):v,J=c.concat($);return O?J:J.concat(Ys(co($)))}function Cr(_){return Object.assign({},_,{left:_.x,top:_.y,right:_.x+_.width,bottom:_.y+_.height})}function ga(_,c,p){return c===no?Cr(function(v,O){var N=jt(v),$=ds(v),J=N.visualViewport,re=$.clientWidth,he=$.clientHeight,fe=0,ce=0;if(J){re=J.width,he=J.height;var De=la();(De||!De&&O==="fixed")&&(fe=J.offsetLeft,ce=J.offsetTop)}return{width:re,height:he,x:fe+pa(v),y:ce}}(_,p)):Ws(c)?function(v,O){var N=Gs(v,!1,O==="fixed");return N.top=N.top+v.clientTop,N.left=N.left+v.clientLeft,N.bottom=N.top+v.clientHeight,N.right=N.left+v.clientWidth,N.width=v.clientWidth,N.height=v.clientHeight,N.x=N.left,N.y=N.top,N}(c,p):Cr(function(v){var O,N=ds(v),$=fo(v),J=(O=v.ownerDocument)==null?void 0:O.body,re=zs(N.scrollWidth,N.clientWidth,J?J.scrollWidth:0,J?J.clientWidth:0),he=zs(N.scrollHeight,N.clientHeight,J?J.scrollHeight:0,J?J.clientHeight:0),fe=-$.scrollLeft+pa(v),ce=-$.scrollTop;return an(J||N).direction==="rtl"&&(fe+=zs(N.clientWidth,J?J.clientWidth:0)-re),{width:re,height:he,x:fe,y:ce}}(ds(_)))}function Ei(_){var c,p=_.reference,v=_.element,O=_.placement,N=O?Un(O):null,$=O?Ks(O):null,J=p.x+p.width/2-v.width/2,re=p.y+p.height/2-v.height/2;switch(N){case Yt:c={x:J,y:p.y-v.height};break;case Gt:c={x:J,y:p.y+p.height};break;case rn:c={x:p.x+p.width,y:re};break;case $t:c={x:p.x-v.width,y:re};break;default:c={x:p.x,y:p.y}}var he=N?yi(N):null;if(he!=null){var fe=he==="y"?"height":"width";switch($){case Xn:c[he]=c[he]-(p[fe]/2-v[fe]/2);break;case Tr:c[he]=c[he]+(p[fe]/2-v[fe]/2)}}return c}function Pr(_,c){c===void 0&&(c={});var p=c,v=p.placement,O=v===void 0?_.placement:v,N=p.strategy,$=N===void 0?_.strategy:N,J=p.boundary,re=J===void 0?ra:J,he=p.rootBoundary,fe=he===void 0?no:he,ce=p.elementContext,De=ce===void 0?Hs:ce,ve=p.altBoundary,Ce=ve!==void 0&&ve,Ae=p.padding,Pe=Ae===void 0?0:Ae,rt=ha(typeof Pe!="number"?Pe:Rr(Pe,Rn)),ut=De===Hs?so:Hs,Me=_.rects.popper,Ye=_.elements[Ce?ut:De],xe=function(En,qn,Hn,wt){var Es=qn==="clippingParents"?function(ot){var wn=Ys(co(ot)),Wn=["absolute","fixed"].indexOf(an(ot).position)>=0&&vn(ot)?_i(ot):ot;return Ws(Wn)?wn.filter(function(Dr){return Ws(Dr)&&ua(Dr,Wn)&&on(Dr)!=="body"}):[]}(En):[].concat(qn),ws=[].concat(Es,[Hn]),vo=ws[0],Kt=ws.reduce(function(ot,wn){var Wn=ga(En,wn,wt);return ot.top=zs(Wn.top,ot.top),ot.right=fs(Wn.right,ot.right),ot.bottom=fs(Wn.bottom,ot.bottom),ot.left=zs(Wn.left,ot.left),ot},ga(En,vo,wt));return Kt.width=Kt.right-Kt.left,Kt.height=Kt.bottom-Kt.top,Kt.x=Kt.left,Kt.y=Kt.top,Kt}(Ws(Ye)?Ye:Ye.contextElement||ds(_.elements.popper),re,fe,$),He=Gs(_.elements.reference),tt=Ei({reference:He,element:Me,placement:O}),it=Cr(Object.assign({},Me,tt)),nt=De===Hs?it:He,St={top:xe.top-nt.top+rt.top,bottom:nt.bottom-xe.bottom+rt.bottom,left:xe.left-nt.left+rt.left,right:nt.right-xe.right+rt.right},Nn=_.modifiersData.offset;if(De===Hs&&Nn){var ns=Nn[O];Object.keys(St).forEach(function(En){var qn=[rn,Gt].indexOf(En)>=0?1:-1,Hn=[Yt,Gt].indexOf(En)>=0?"y":"x";St[En]+=ns[Hn]*qn})}return St}function Fc(_,c){c===void 0&&(c={});var p=c,v=p.placement,O=p.boundary,N=p.rootBoundary,$=p.padding,J=p.flipVariations,re=p.allowedAutoPlacements,he=re===void 0?ro:re,fe=Ks(v),ce=fe?J?mi:mi.filter(function(Ce){return Ks(Ce)===fe}):Rn,De=ce.filter(function(Ce){return he.indexOf(Ce)>=0});De.length===0&&(De=ce);var ve=De.reduce(function(Ce,Ae){return Ce[Ae]=Pr(_,{placement:Ae,boundary:O,rootBoundary:N,padding:$})[Un(Ae)],Ce},{});return Object.keys(ve).sort(function(Ce,Ae){return ve[Ce]-ve[Ae]})}const kr={name:"flip",enabled:!0,phase:"main",fn:function(_){var c=_.state,p=_.options,v=_.name;if(!c.modifiersData[v]._skip){for(var O=p.mainAxis,N=O===void 0||O,$=p.altAxis,J=$===void 0||$,re=p.fallbackPlacements,he=p.padding,fe=p.boundary,ce=p.rootBoundary,De=p.altBoundary,ve=p.flipVariations,Ce=ve===void 0||ve,Ae=p.allowedAutoPlacements,Pe=c.options.placement,rt=Un(Pe),ut=re||(rt!==Pe&&Ce?function(ot){if(Un(ot)===hs)return[];var wn=vi(ot);return[es(ot),wn,es(wn)]}(Pe):[vi(Pe)]),Me=[Pe].concat(ut).reduce(function(ot,wn){return ot.concat(Un(wn)===hs?Fc(c,{placement:wn,boundary:fe,rootBoundary:ce,padding:he,flipVariations:Ce,allowedAutoPlacements:Ae}):wn)},[]),Ye=c.rects.reference,xe=c.rects.popper,He=new Map,tt=!0,it=Me[0],nt=0;nt<Me.length;nt++){var St=Me[nt],Nn=Un(St),ns=Ks(St)===Xn,En=[Yt,Gt].indexOf(Nn)>=0,qn=En?"width":"height",Hn=Pr(c,{placement:St,boundary:fe,rootBoundary:ce,altBoundary:De,padding:he}),wt=En?ns?rn:$t:ns?Gt:Yt;Ye[qn]>xe[qn]&&(wt=vi(wt));var Es=vi(wt),ws=[];if(N&&ws.push(Hn[Nn]<=0),J&&ws.push(Hn[wt]<=0,Hn[Es]<=0),ws.every(function(ot){return ot})){it=St,tt=!1;break}He.set(St,ws)}if(tt)for(var vo=function(ot){var wn=Me.find(function(Wn){var Dr=He.get(Wn);if(Dr)return Dr.slice(0,ot).every(function(Qc){return Qc})});if(wn)return it=wn,"break"},Kt=Ce?3:1;Kt>0&&vo(Kt)!=="break";Kt--);c.placement!==it&&(c.modifiersData[v]._skip=!0,c.placement=it,c.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function _a(_,c,p){return p===void 0&&(p={x:0,y:0}),{top:_.top-c.height-p.y,right:_.right-c.width+p.x,bottom:_.bottom-c.height+p.y,left:_.left-c.width-p.x}}function ya(_){return[Yt,rn,Gt,$t].some(function(c){return _[c]>=0})}const po={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(_){var c=_.state,p=_.name,v=c.rects.reference,O=c.rects.popper,N=c.modifiersData.preventOverflow,$=Pr(c,{elementContext:"reference"}),J=Pr(c,{altBoundary:!0}),re=_a($,v),he=_a(J,O,N),fe=ya(re),ce=ya(he);c.modifiersData[p]={referenceClippingOffsets:re,popperEscapeOffsets:he,isReferenceHidden:fe,hasPopperEscaped:ce},c.attributes.popper=Object.assign({},c.attributes.popper,{"data-popper-reference-hidden":fe,"data-popper-escaped":ce})}},mo={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(_){var c=_.state,p=_.options,v=_.name,O=p.offset,N=O===void 0?[0,0]:O,$=ro.reduce(function(fe,ce){return fe[ce]=function(De,ve,Ce){var Ae=Un(De),Pe=[$t,Yt].indexOf(Ae)>=0?-1:1,rt=typeof Ce=="function"?Ce(Object.assign({},ve,{placement:De})):Ce,ut=rt[0],Me=rt[1];return ut=ut||0,Me=(Me||0)*Pe,[$t,rn].indexOf(Ae)>=0?{x:Me,y:ut}:{x:ut,y:Me}}(ce,c.rects,N),fe},{}),J=$[c.placement],re=J.x,he=J.y;c.modifiersData.popperOffsets!=null&&(c.modifiersData.popperOffsets.x+=re,c.modifiersData.popperOffsets.y+=he),c.modifiersData[v]=$}},go={name:"popperOffsets",enabled:!0,phase:"read",fn:function(_){var c=_.state,p=_.name;c.modifiersData[p]=Ei({reference:c.rects.reference,element:c.rects.popper,placement:c.placement})},data:{}},wi={name:"preventOverflow",enabled:!0,phase:"main",fn:function(_){var c=_.state,p=_.options,v=_.name,O=p.mainAxis,N=O===void 0||O,$=p.altAxis,J=$!==void 0&&$,re=p.boundary,he=p.rootBoundary,fe=p.altBoundary,ce=p.padding,De=p.tether,ve=De===void 0||De,Ce=p.tetherOffset,Ae=Ce===void 0?0:Ce,Pe=Pr(c,{boundary:re,rootBoundary:he,padding:ce,altBoundary:fe}),rt=Un(c.placement),ut=Ks(c.placement),Me=!ut,Ye=yi(rt),xe=Ye==="x"?"y":"x",He=c.modifiersData.popperOffsets,tt=c.rects.reference,it=c.rects.popper,nt=typeof Ae=="function"?Ae(Object.assign({},c.rects,{placement:c.placement})):Ae,St=typeof nt=="number"?{mainAxis:nt,altAxis:nt}:Object.assign({mainAxis:0,altAxis:0},nt),Nn=c.modifiersData.offset?c.modifiersData.offset[c.placement]:null,ns={x:0,y:0};if(He){if(N){var En,qn=Ye==="y"?Yt:$t,Hn=Ye==="y"?Gt:rn,wt=Ye==="y"?"height":"width",Es=He[Ye],ws=Es+Pe[qn],vo=Es-Pe[Hn],Kt=ve?-it[wt]/2:0,ot=ut===Xn?tt[wt]:it[wt],wn=ut===Xn?-it[wt]:-tt[wt],Wn=c.elements.arrow,Dr=ve&&Wn?ao(Wn):{width:0,height:0},Qc=c.modifiersData["arrow#persistent"]?c.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},bp=Qc[qn],Tp=Qc[Hn],Yc=ps(0,tt[wt],Dr[wt]),kb=Me?tt[wt]/2-Kt-Yc-bp-St.mainAxis:ot-Yc-bp-St.mainAxis,Ob=Me?-tt[wt]/2+Kt+Yc+Tp+St.mainAxis:wn+Yc+Tp+St.mainAxis,ih=c.elements.arrow&&_i(c.elements.arrow),Nb=ih?Ye==="y"?ih.clientTop||0:ih.clientLeft||0:0,Ip=(En=Nn==null?void 0:Nn[Ye])!=null?En:0,Db=Es+Ob-Ip,Ap=ps(ve?fs(ws,Es+kb-Ip-Nb):ws,Es,ve?zs(vo,Db):vo);He[Ye]=Ap,ns[Ye]=Ap-Es}if(J){var Rp,xb=Ye==="x"?Yt:$t,Vb=Ye==="x"?Gt:rn,Ci=He[xe],Xc=xe==="y"?"height":"width",Sp=Ci+Pe[xb],Cp=Ci-Pe[Vb],oh=[Yt,$t].indexOf(rt)!==-1,Pp=(Rp=Nn==null?void 0:Nn[xe])!=null?Rp:0,kp=oh?Sp:Ci-tt[Xc]-it[Xc]-Pp+St.altAxis,Op=oh?Ci+tt[Xc]+it[Xc]-Pp-St.altAxis:Cp,Np=ve&&oh?function(Lb,Mb,ah){var Dp=ps(Lb,Mb,ah);return Dp>ah?ah:Dp}(kp,Ci,Op):ps(ve?kp:Sp,Ci,ve?Op:Cp);He[xe]=Np,ns[xe]=Np-Ci}c.modifiersData[v]=ns}},requiresIfExists:["offset"]};function Uc(_,c,p){p===void 0&&(p=!1);var v,O,N=vn(c),$=vn(c)&&function(ce){var De=ce.getBoundingClientRect(),ve=Sn(De.width)/ce.offsetWidth||1,Ce=Sn(De.height)/ce.offsetHeight||1;return ve!==1||Ce!==1}(c),J=ds(c),re=Gs(_,$,p),he={scrollLeft:0,scrollTop:0},fe={x:0,y:0};return(N||!N&&!p)&&((on(c)!=="body"||Qs(J))&&(he=(v=c)!==jt(v)&&vn(v)?{scrollLeft:(O=v).scrollLeft,scrollTop:O.scrollTop}:fo(v)),vn(c)?((fe=Gs(c,!0)).x+=c.clientLeft,fe.y+=c.clientTop):J&&(fe.x=pa(J))),{x:re.left+he.scrollLeft-fe.x,y:re.top+he.scrollTop-fe.y,width:re.width,height:re.height}}function $c(_){var c=new Map,p=new Set,v=[];function O(N){p.add(N.name),[].concat(N.requires||[],N.requiresIfExists||[]).forEach(function($){if(!p.has($)){var J=c.get($);J&&O(J)}}),v.push(N)}return _.forEach(function(N){c.set(N.name,N)}),_.forEach(function(N){p.has(N.name)||O(N)}),v}var ms={placement:"bottom",modifiers:[],strategy:"absolute"};function va(){for(var _=arguments.length,c=new Array(_),p=0;p<_;p++)c[p]=arguments[p];return!c.some(function(v){return!(v&&typeof v.getBoundingClientRect=="function")})}function bi(_){_===void 0&&(_={});var c=_,p=c.defaultModifiers,v=p===void 0?[]:p,O=c.defaultOptions,N=O===void 0?ms:O;return function($,J,re){re===void 0&&(re=N);var he,fe,ce={placement:"bottom",orderedModifiers:[],options:Object.assign({},ms,N),modifiersData:{},elements:{reference:$,popper:J},attributes:{},styles:{}},De=[],ve=!1,Ce={state:ce,setOptions:function(Pe){var rt=typeof Pe=="function"?Pe(ce.options):Pe;Ae(),ce.options=Object.assign({},N,ce.options,rt),ce.scrollParents={reference:Ws($)?Ys($):$.contextElement?Ys($.contextElement):[],popper:Ys(J)};var ut,Me,Ye=function(xe){var He=$c(xe);return gi.reduce(function(tt,it){return tt.concat(He.filter(function(nt){return nt.phase===it}))},[])}((ut=[].concat(v,ce.options.modifiers),Me=ut.reduce(function(xe,He){var tt=xe[He.name];return xe[He.name]=tt?Object.assign({},tt,He,{options:Object.assign({},tt.options,He.options),data:Object.assign({},tt.data,He.data)}):He,xe},{}),Object.keys(Me).map(function(xe){return Me[xe]})));return ce.orderedModifiers=Ye.filter(function(xe){return xe.enabled}),ce.orderedModifiers.forEach(function(xe){var He=xe.name,tt=xe.options,it=tt===void 0?{}:tt,nt=xe.effect;if(typeof nt=="function"){var St=nt({state:ce,name:He,instance:Ce,options:it});De.push(St||function(){})}}),Ce.update()},forceUpdate:function(){if(!ve){var Pe=ce.elements,rt=Pe.reference,ut=Pe.popper;if(va(rt,ut)){ce.rects={reference:Uc(rt,_i(ut),ce.options.strategy==="fixed"),popper:ao(ut)},ce.reset=!1,ce.placement=ce.options.placement,ce.orderedModifiers.forEach(function(nt){return ce.modifiersData[nt.name]=Object.assign({},nt.data)});for(var Me=0;Me<ce.orderedModifiers.length;Me++)if(ce.reset!==!0){var Ye=ce.orderedModifiers[Me],xe=Ye.fn,He=Ye.options,tt=He===void 0?{}:He,it=Ye.name;typeof xe=="function"&&(ce=xe({state:ce,options:tt,name:it,instance:Ce})||ce)}else ce.reset=!1,Me=-1}}},update:(he=function(){return new Promise(function(Pe){Ce.forceUpdate(),Pe(ce)})},function(){return fe||(fe=new Promise(function(Pe){Promise.resolve().then(function(){fe=void 0,Pe(he())})})),fe}),destroy:function(){Ae(),ve=!0}};if(!va($,J))return Ce;function Ae(){De.forEach(function(Pe){return Pe()}),De=[]}return Ce.setOptions(re).then(function(Pe){!ve&&re.onFirstUpdate&&re.onFirstUpdate(Pe)}),Ce}}var jc=bi(),Bc=bi({defaultModifiers:[uo,go,da,ca]}),Or=bi({defaultModifiers:[uo,go,da,ca,mo,kr,wi,Sr,po]});const cn=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Ir,afterRead:Lc,afterWrite:st,applyStyles:ca,arrow:Sr,auto:hs,basePlacements:Rn,beforeMain:Jn,beforeRead:ia,beforeWrite:Ar,bottom:Gt,clippingParents:ra,computeStyles:da,createPopper:Or,createPopperBase:jc,createPopperLite:Bc,detectOverflow:Pr,end:Tr,eventListeners:uo,flip:kr,hide:po,left:$t,main:On,modifierPhases:gi,offset:mo,placements:ro,popper:Hs,popperGenerator:bi,popperOffsets:go,preventOverflow:wi,read:oa,reference:so,right:rn,start:Xn,top:Yt,variationPlacements:mi,viewport:no,write:io},Symbol.toStringTag,{value:"Module"})),Ea="dropdown",gs=".bs.dropdown",_s=".data-api",a="ArrowUp",f="ArrowDown",g=`hide${gs}`,E=`hidden${gs}`,V=`show${gs}`,F=`shown${gs}`,se=`click${gs}${_s}`,Oe=`keydown${gs}${_s}`,Rt=`keyup${gs}${_s}`,ze="show",lt='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',$n=`${lt}.${ze}`,jn=".dropdown-menu",ys=Y()?"top-end":"top-start",vs=Y()?"top-start":"top-end",_o=Y()?"bottom-end":"bottom-start",wa=Y()?"bottom-start":"bottom-end",pw=Y()?"left-start":"right-start",mw=Y()?"right-start":"left-start",gw={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},_w={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ts extends B{constructor(c,p){super(c,p),this._popper=null,this._parent=this._element.parentNode,this._menu=j.next(this._element,jn)[0]||j.prev(this._element,jn)[0]||j.findOne(jn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return gw}static get DefaultType(){return _w}static get NAME(){return Ea}toggle(){return this._isShown()?this.hide():this.show()}show(){if(m(this._element)||this._isShown())return;const c={relatedTarget:this._element};if(!z.trigger(this._element,V,c).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const p of[].concat(...document.body.children))z.on(p,"mouseover",w);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ze),this._element.classList.add(ze),z.trigger(this._element,F,c)}}hide(){if(m(this._element)||!this._isShown())return;const c={relatedTarget:this._element};this._completeHide(c)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(c){if(!z.trigger(this._element,g,c).defaultPrevented){if("ontouchstart"in document.documentElement)for(const p of[].concat(...document.body.children))z.off(p,"mouseover",w);this._popper&&this._popper.destroy(),this._menu.classList.remove(ze),this._element.classList.remove(ze),this._element.setAttribute("aria-expanded","false"),It.removeDataAttribute(this._menu,"popper"),z.trigger(this._element,E,c)}}_getConfig(c){if(typeof(c=super._getConfig(c)).reference=="object"&&!u(c.reference)&&typeof c.reference.getBoundingClientRect!="function")throw new TypeError(`${Ea.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return c}_createPopper(){if(cn===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let c=this._element;this._config.reference==="parent"?c=this._parent:u(this._config.reference)?c=h(this._config.reference):typeof this._config.reference=="object"&&(c=this._config.reference);const p=this._getPopperConfig();this._popper=Or(c,this._menu,p)}_isShown(){return this._menu.classList.contains(ze)}_getPlacement(){const c=this._parent;if(c.classList.contains("dropend"))return pw;if(c.classList.contains("dropstart"))return mw;if(c.classList.contains("dropup-center"))return"top";if(c.classList.contains("dropdown-center"))return"bottom";const p=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return c.classList.contains("dropup")?p?vs:ys:p?wa:_o}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:c}=this._config;return typeof c=="string"?c.split(",").map(p=>Number.parseInt(p,10)):typeof c=="function"?p=>c(p,this._element):c}_getPopperConfig(){const c={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(It.setDataAttribute(this._menu,"popper","static"),c.modifiers=[{name:"applyStyles",enabled:!1}]),{...c,...X(this._config.popperConfig,[void 0,c])}}_selectMenuItem({key:c,target:p}){const v=j.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(O=>d(O));v.length&&de(v,p,c===f,!v.includes(p)).focus()}static jQueryInterface(c){return this.each(function(){const p=ts.getOrCreateInstance(this,c);if(typeof c=="string"){if(p[c]===void 0)throw new TypeError(`No method named "${c}"`);p[c]()}})}static clearMenus(c){if(c.button===2||c.type==="keyup"&&c.key!=="Tab")return;const p=j.find($n);for(const v of p){const O=ts.getInstance(v);if(!O||O._config.autoClose===!1)continue;const N=c.composedPath(),$=N.includes(O._menu);if(N.includes(O._element)||O._config.autoClose==="inside"&&!$||O._config.autoClose==="outside"&&$||O._menu.contains(c.target)&&(c.type==="keyup"&&c.key==="Tab"||/input|select|option|textarea|form/i.test(c.target.tagName)))continue;const J={relatedTarget:O._element};c.type==="click"&&(J.clickEvent=c),O._completeHide(J)}}static dataApiKeydownHandler(c){const p=/input|textarea/i.test(c.target.tagName),v=c.key==="Escape",O=[a,f].includes(c.key);if(!O&&!v||p&&!v)return;c.preventDefault();const N=this.matches(lt)?this:j.prev(this,lt)[0]||j.next(this,lt)[0]||j.findOne(lt,c.delegateTarget.parentNode),$=ts.getOrCreateInstance(N);if(O)return c.stopPropagation(),$.show(),void $._selectMenuItem(c);$._isShown()&&(c.stopPropagation(),$.hide(),N.focus())}}z.on(document,Oe,lt,ts.dataApiKeydownHandler),z.on(document,Oe,jn,ts.dataApiKeydownHandler),z.on(document,se,ts.clearMenus),z.on(document,Rt,ts.clearMenus),z.on(document,se,lt,function(_){_.preventDefault(),ts.getOrCreateInstance(this).toggle()}),K(ts);const Hd="backdrop",Wd="show",zd=`mousedown.bs.${Hd}`,yw={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},vw={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Gd extends vt{constructor(c){super(),this._config=this._getConfig(c),this._isAppended=!1,this._element=null}static get Default(){return yw}static get DefaultType(){return vw}static get NAME(){return Hd}show(c){if(!this._config.isVisible)return void X(c);this._append();const p=this._getElement();this._config.isAnimated&&L(p),p.classList.add(Wd),this._emulateAnimation(()=>{X(c)})}hide(c){this._config.isVisible?(this._getElement().classList.remove(Wd),this._emulateAnimation(()=>{this.dispose(),X(c)})):X(c)}dispose(){this._isAppended&&(z.off(this._element,zd),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const c=document.createElement("div");c.className=this._config.className,this._config.isAnimated&&c.classList.add("fade"),this._element=c}return this._element}_configAfterMerge(c){return c.rootElement=h(c.rootElement),c}_append(){if(this._isAppended)return;const c=this._getElement();this._config.rootElement.append(c),z.on(c,zd,()=>{X(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(c){ne(c,this._getElement(),this._config.isAnimated)}}const qc=".bs.focustrap",Ew=`focusin${qc}`,ww=`keydown.tab${qc}`,Kd="backward",bw={autofocus:!0,trapElement:null},Tw={autofocus:"boolean",trapElement:"element"};class Qd extends vt{constructor(c){super(),this._config=this._getConfig(c),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return bw}static get DefaultType(){return Tw}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),z.off(document,qc),z.on(document,Ew,c=>this._handleFocusin(c)),z.on(document,ww,c=>this._handleKeydown(c)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,z.off(document,qc))}_handleFocusin(c){const{trapElement:p}=this._config;if(c.target===document||c.target===p||p.contains(c.target))return;const v=j.focusableChildren(p);v.length===0?p.focus():this._lastTabNavDirection===Kd?v[v.length-1].focus():v[0].focus()}_handleKeydown(c){c.key==="Tab"&&(this._lastTabNavDirection=c.shiftKey?Kd:"forward")}}const Yd=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Xd=".sticky-top",Hc="padding-right",Jd="margin-right";class Ku{constructor(){this._element=document.body}getWidth(){const c=document.documentElement.clientWidth;return Math.abs(window.innerWidth-c)}hide(){const c=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Hc,p=>p+c),this._setElementAttributes(Yd,Hc,p=>p+c),this._setElementAttributes(Xd,Jd,p=>p-c)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Hc),this._resetElementAttributes(Yd,Hc),this._resetElementAttributes(Xd,Jd)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(c,p,v){const O=this.getWidth();this._applyManipulationCallback(c,N=>{if(N!==this._element&&window.innerWidth>N.clientWidth+O)return;this._saveInitialAttribute(N,p);const $=window.getComputedStyle(N).getPropertyValue(p);N.style.setProperty(p,`${v(Number.parseFloat($))}px`)})}_saveInitialAttribute(c,p){const v=c.style.getPropertyValue(p);v&&It.setDataAttribute(c,p,v)}_resetElementAttributes(c,p){this._applyManipulationCallback(c,v=>{const O=It.getDataAttribute(v,p);O!==null?(It.removeDataAttribute(v,p),v.style.setProperty(p,O)):v.style.removeProperty(p)})}_applyManipulationCallback(c,p){if(u(c))p(c);else for(const v of j.find(c,this._element))p(v)}}const Bn=".bs.modal",Iw=`hide${Bn}`,Aw=`hidePrevented${Bn}`,Zd=`hidden${Bn}`,ep=`show${Bn}`,Rw=`shown${Bn}`,Sw=`resize${Bn}`,Cw=`click.dismiss${Bn}`,Pw=`mousedown.dismiss${Bn}`,kw=`keydown.dismiss${Bn}`,Ow=`click${Bn}.data-api`,tp="modal-open",np="show",Qu="modal-static",Nw={backdrop:!0,focus:!0,keyboard:!0},Dw={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ti extends B{constructor(c,p){super(c,p),this._dialog=j.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ku,this._addEventListeners()}static get Default(){return Nw}static get DefaultType(){return Dw}static get NAME(){return"modal"}toggle(c){return this._isShown?this.hide():this.show(c)}show(c){this._isShown||this._isTransitioning||z.trigger(this._element,ep,{relatedTarget:c}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(tp),this._adjustDialog(),this._backdrop.show(()=>this._showElement(c)))}hide(){this._isShown&&!this._isTransitioning&&(z.trigger(this._element,Iw).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(np),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){z.off(window,Bn),z.off(this._dialog,Bn),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Gd({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Qd({trapElement:this._element})}_showElement(c){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const p=j.findOne(".modal-body",this._dialog);p&&(p.scrollTop=0),L(this._element),this._element.classList.add(np),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,z.trigger(this._element,Rw,{relatedTarget:c})},this._dialog,this._isAnimated())}_addEventListeners(){z.on(this._element,kw,c=>{c.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),z.on(window,Sw,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),z.on(this._element,Pw,c=>{z.one(this._element,Cw,p=>{this._element===c.target&&this._element===p.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(tp),this._resetAdjustments(),this._scrollBar.reset(),z.trigger(this._element,Zd)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(z.trigger(this._element,Aw).defaultPrevented)return;const c=this._element.scrollHeight>document.documentElement.clientHeight,p=this._element.style.overflowY;p==="hidden"||this._element.classList.contains(Qu)||(c||(this._element.style.overflowY="hidden"),this._element.classList.add(Qu),this._queueCallback(()=>{this._element.classList.remove(Qu),this._queueCallback(()=>{this._element.style.overflowY=p},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const c=this._element.scrollHeight>document.documentElement.clientHeight,p=this._scrollBar.getWidth(),v=p>0;if(v&&!c){const O=Y()?"paddingLeft":"paddingRight";this._element.style[O]=`${p}px`}if(!v&&c){const O=Y()?"paddingRight":"paddingLeft";this._element.style[O]=`${p}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(c,p){return this.each(function(){const v=Ti.getOrCreateInstance(this,c);if(typeof c=="string"){if(v[c]===void 0)throw new TypeError(`No method named "${c}"`);v[c](p)}})}}z.on(document,Ow,'[data-bs-toggle="modal"]',function(_){const c=j.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&_.preventDefault(),z.one(c,ep,v=>{v.defaultPrevented||z.one(c,Zd,()=>{d(this)&&this.focus()})});const p=j.findOne(".modal.show");p&&Ti.getInstance(p).hide(),Ti.getOrCreateInstance(c).toggle(this)}),pe(Ti),K(Ti);const Xs=".bs.offcanvas",sp=".data-api",xw=`load${Xs}${sp}`,rp="show",ip="showing",op="hiding",ap=".offcanvas.show",Vw=`show${Xs}`,Lw=`shown${Xs}`,Mw=`hide${Xs}`,cp=`hidePrevented${Xs}`,lp=`hidden${Xs}`,Fw=`resize${Xs}`,Uw=`click${Xs}${sp}`,$w=`keydown.dismiss${Xs}`,jw={backdrop:!0,keyboard:!0,scroll:!1},Bw={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Js extends B{constructor(c,p){super(c,p),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return jw}static get DefaultType(){return Bw}static get NAME(){return"offcanvas"}toggle(c){return this._isShown?this.hide():this.show(c)}show(c){this._isShown||z.trigger(this._element,Vw,{relatedTarget:c}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new Ku().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(ip),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(rp),this._element.classList.remove(ip),z.trigger(this._element,Lw,{relatedTarget:c})},this._element,!0))}hide(){this._isShown&&(z.trigger(this._element,Mw).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(op),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(rp,op),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Ku().reset(),z.trigger(this._element,lp)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const c=!!this._config.backdrop;return new Gd({className:"offcanvas-backdrop",isVisible:c,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:c?()=>{this._config.backdrop!=="static"?this.hide():z.trigger(this._element,cp)}:null})}_initializeFocusTrap(){return new Qd({trapElement:this._element})}_addEventListeners(){z.on(this._element,$w,c=>{c.key==="Escape"&&(this._config.keyboard?this.hide():z.trigger(this._element,cp))})}static jQueryInterface(c){return this.each(function(){const p=Js.getOrCreateInstance(this,c);if(typeof c=="string"){if(p[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);p[c](this)}})}}z.on(document,Uw,'[data-bs-toggle="offcanvas"]',function(_){const c=j.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&_.preventDefault(),m(this))return;z.one(c,lp,()=>{d(this)&&this.focus()});const p=j.findOne(ap);p&&p!==c&&Js.getInstance(p).hide(),Js.getOrCreateInstance(c).toggle(this)}),z.on(window,xw,()=>{for(const _ of j.find(ap))Js.getOrCreateInstance(_).show()}),z.on(window,Fw,()=>{for(const _ of j.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(_).position!=="fixed"&&Js.getOrCreateInstance(_).hide()}),pe(Js),K(Js);const up={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},qw=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Hw=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Ww=(_,c)=>{const p=_.nodeName.toLowerCase();return c.includes(p)?!qw.has(p)||!!Hw.test(_.nodeValue):c.filter(v=>v instanceof RegExp).some(v=>v.test(p))},zw={allowList:up,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Gw={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Kw={entry:"(string|element|function|null)",selector:"(string|element)"};class Qw extends vt{constructor(c){super(),this._config=this._getConfig(c)}static get Default(){return zw}static get DefaultType(){return Gw}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(c=>this._resolvePossibleFunction(c)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(c){return this._checkContent(c),this._config.content={...this._config.content,...c},this}toHtml(){const c=document.createElement("div");c.innerHTML=this._maybeSanitize(this._config.template);for(const[O,N]of Object.entries(this._config.content))this._setContent(c,N,O);const p=c.children[0],v=this._resolvePossibleFunction(this._config.extraClass);return v&&p.classList.add(...v.split(" ")),p}_typeCheckConfig(c){super._typeCheckConfig(c),this._checkContent(c.content)}_checkContent(c){for(const[p,v]of Object.entries(c))super._typeCheckConfig({selector:p,entry:v},Kw)}_setContent(c,p,v){const O=j.findOne(v,c);O&&((p=this._resolvePossibleFunction(p))?u(p)?this._putElementInTemplate(h(p),O):this._config.html?O.innerHTML=this._maybeSanitize(p):O.textContent=p:O.remove())}_maybeSanitize(c){return this._config.sanitize?function(p,v,O){if(!p.length)return p;if(O&&typeof O=="function")return O(p);const N=new window.DOMParser().parseFromString(p,"text/html"),$=[].concat(...N.body.querySelectorAll("*"));for(const J of $){const re=J.nodeName.toLowerCase();if(!Object.keys(v).includes(re)){J.remove();continue}const he=[].concat(...J.attributes),fe=[].concat(v["*"]||[],v[re]||[]);for(const ce of he)Ww(ce,fe)||J.removeAttribute(ce.nodeName)}return N.body.innerHTML}(c,this._config.allowList,this._config.sanitizeFn):c}_resolvePossibleFunction(c){return X(c,[void 0,this])}_putElementInTemplate(c,p){if(this._config.html)return p.innerHTML="",void p.append(c);p.textContent=c.textContent}}const Yw=new Set(["sanitize","allowList","sanitizeFn"]),Yu="fade",Wc="show",Xw=".tooltip-inner",hp=".modal",fp="hide.bs.modal",ba="hover",Xu="focus",Ju="click",Jw={AUTO:"auto",TOP:"top",RIGHT:Y()?"left":"right",BOTTOM:"bottom",LEFT:Y()?"right":"left"},Zw={allowList:up,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},eb={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Ii extends B{constructor(c,p){if(cn===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(c,p),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Zw}static get DefaultType(){return eb}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),z.off(this._element.closest(hp),fp,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const c=z.trigger(this._element,this.constructor.eventName("show")),p=(y(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(c.defaultPrevented||!p)return;this._disposePopper();const v=this._getTipElement();this._element.setAttribute("aria-describedby",v.getAttribute("id"));const{container:O}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(O.append(v),z.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(v),v.classList.add(Wc),"ontouchstart"in document.documentElement)for(const N of[].concat(...document.body.children))z.on(N,"mouseover",w);this._queueCallback(()=>{z.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!z.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Wc),"ontouchstart"in document.documentElement)for(const c of[].concat(...document.body.children))z.off(c,"mouseover",w);this._activeTrigger[Ju]=!1,this._activeTrigger[Xu]=!1,this._activeTrigger[ba]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),z.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(c){const p=this._getTemplateFactory(c).toHtml();if(!p)return null;p.classList.remove(Yu,Wc),p.classList.add(`bs-${this.constructor.NAME}-auto`);const v=(O=>{do O+=Math.floor(1e6*Math.random());while(document.getElementById(O));return O})(this.constructor.NAME).toString();return p.setAttribute("id",v),this._isAnimated()&&p.classList.add(Yu),p}setContent(c){this._newContent=c,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(c){return this._templateFactory?this._templateFactory.changeContent(c):this._templateFactory=new Qw({...this._config,content:c,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Xw]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(c){return this.constructor.getOrCreateInstance(c.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Yu)}_isShown(){return this.tip&&this.tip.classList.contains(Wc)}_createPopper(c){const p=X(this._config.placement,[this,c,this._element]),v=Jw[p.toUpperCase()];return Or(this._element,c,this._getPopperConfig(v))}_getOffset(){const{offset:c}=this._config;return typeof c=="string"?c.split(",").map(p=>Number.parseInt(p,10)):typeof c=="function"?p=>c(p,this._element):c}_resolvePossibleFunction(c){return X(c,[this._element,this._element])}_getPopperConfig(c){const p={placement:c,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:v=>{this._getTipElement().setAttribute("data-popper-placement",v.state.placement)}}]};return{...p,...X(this._config.popperConfig,[void 0,p])}}_setListeners(){const c=this._config.trigger.split(" ");for(const p of c)if(p==="click")z.on(this._element,this.constructor.eventName("click"),this._config.selector,v=>{const O=this._initializeOnDelegatedTarget(v);O._activeTrigger[Ju]=!(O._isShown()&&O._activeTrigger[Ju]),O.toggle()});else if(p!=="manual"){const v=p===ba?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),O=p===ba?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");z.on(this._element,v,this._config.selector,N=>{const $=this._initializeOnDelegatedTarget(N);$._activeTrigger[N.type==="focusin"?Xu:ba]=!0,$._enter()}),z.on(this._element,O,this._config.selector,N=>{const $=this._initializeOnDelegatedTarget(N);$._activeTrigger[N.type==="focusout"?Xu:ba]=$._element.contains(N.relatedTarget),$._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},z.on(this._element.closest(hp),fp,this._hideModalHandler)}_fixTitle(){const c=this._element.getAttribute("title");c&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",c),this._element.setAttribute("data-bs-original-title",c),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(c,p){clearTimeout(this._timeout),this._timeout=setTimeout(c,p)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(c){const p=It.getDataAttributes(this._element);for(const v of Object.keys(p))Yw.has(v)&&delete p[v];return c={...p,...typeof c=="object"&&c?c:{}},c=this._mergeConfigObj(c),c=this._configAfterMerge(c),this._typeCheckConfig(c),c}_configAfterMerge(c){return c.container=c.container===!1?document.body:h(c.container),typeof c.delay=="number"&&(c.delay={show:c.delay,hide:c.delay}),typeof c.title=="number"&&(c.title=c.title.toString()),typeof c.content=="number"&&(c.content=c.content.toString()),c}_getDelegateConfig(){const c={};for(const[p,v]of Object.entries(this._config))this.constructor.Default[p]!==v&&(c[p]=v);return c.selector=!1,c.trigger="manual",c}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(c){return this.each(function(){const p=Ii.getOrCreateInstance(this,c);if(typeof c=="string"){if(p[c]===void 0)throw new TypeError(`No method named "${c}"`);p[c]()}})}}K(Ii);const tb=".popover-header",nb=".popover-body",sb={...Ii.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},rb={...Ii.DefaultType,content:"(null|string|element|function)"};class zc extends Ii{static get Default(){return sb}static get DefaultType(){return rb}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[tb]:this._getTitle(),[nb]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(c){return this.each(function(){const p=zc.getOrCreateInstance(this,c);if(typeof c=="string"){if(p[c]===void 0)throw new TypeError(`No method named "${c}"`);p[c]()}})}}K(zc);const Zu=".bs.scrollspy",ib=`activate${Zu}`,dp=`click${Zu}`,ob=`load${Zu}.data-api`,yo="active",eh="[href]",pp=".nav-link",ab=`${pp}, .nav-item > ${pp}, .list-group-item`,cb={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},lb={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Ta extends B{constructor(c,p){super(c,p),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return cb}static get DefaultType(){return lb}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const c of this._observableSections.values())this._observer.observe(c)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(c){return c.target=h(c.target)||document.body,c.rootMargin=c.offset?`${c.offset}px 0px -30%`:c.rootMargin,typeof c.threshold=="string"&&(c.threshold=c.threshold.split(",").map(p=>Number.parseFloat(p))),c}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(z.off(this._config.target,dp),z.on(this._config.target,dp,eh,c=>{const p=this._observableSections.get(c.target.hash);if(p){c.preventDefault();const v=this._rootElement||window,O=p.offsetTop-this._element.offsetTop;if(v.scrollTo)return void v.scrollTo({top:O,behavior:"smooth"});v.scrollTop=O}}))}_getNewObserver(){const c={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(p=>this._observerCallback(p),c)}_observerCallback(c){const p=$=>this._targetLinks.get(`#${$.target.id}`),v=$=>{this._previousScrollData.visibleEntryTop=$.target.offsetTop,this._process(p($))},O=(this._rootElement||document.documentElement).scrollTop,N=O>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=O;for(const $ of c){if(!$.isIntersecting){this._activeTarget=null,this._clearActiveClass(p($));continue}const J=$.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(N&&J){if(v($),!O)return}else N||J||v($)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const c=j.find(eh,this._config.target);for(const p of c){if(!p.hash||m(p))continue;const v=j.findOne(decodeURI(p.hash),this._element);d(v)&&(this._targetLinks.set(decodeURI(p.hash),p),this._observableSections.set(p.hash,v))}}_process(c){this._activeTarget!==c&&(this._clearActiveClass(this._config.target),this._activeTarget=c,c.classList.add(yo),this._activateParents(c),z.trigger(this._element,ib,{relatedTarget:c}))}_activateParents(c){if(c.classList.contains("dropdown-item"))j.findOne(".dropdown-toggle",c.closest(".dropdown")).classList.add(yo);else for(const p of j.parents(c,".nav, .list-group"))for(const v of j.prev(p,ab))v.classList.add(yo)}_clearActiveClass(c){c.classList.remove(yo);const p=j.find(`${eh}.${yo}`,c);for(const v of p)v.classList.remove(yo)}static jQueryInterface(c){return this.each(function(){const p=Ta.getOrCreateInstance(this,c);if(typeof c=="string"){if(p[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);p[c]()}})}}z.on(window,ob,()=>{for(const _ of j.find('[data-bs-spy="scroll"]'))Ta.getOrCreateInstance(_)}),K(Ta);const Ai=".bs.tab",ub=`hide${Ai}`,hb=`hidden${Ai}`,fb=`show${Ai}`,db=`shown${Ai}`,pb=`click${Ai}`,mb=`keydown${Ai}`,gb=`load${Ai}`,_b="ArrowLeft",mp="ArrowRight",yb="ArrowUp",gp="ArrowDown",th="Home",_p="End",Ri="active",yp="fade",nh="show",vp=".dropdown-toggle",sh=`:not(${vp})`,Ep='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',rh=`.nav-link${sh}, .list-group-item${sh}, [role="tab"]${sh}, ${Ep}`,vb=`.${Ri}[data-bs-toggle="tab"], .${Ri}[data-bs-toggle="pill"], .${Ri}[data-bs-toggle="list"]`;class Si extends B{constructor(c){super(c),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),z.on(this._element,mb,p=>this._keydown(p)))}static get NAME(){return"tab"}show(){const c=this._element;if(this._elemIsActive(c))return;const p=this._getActiveElem(),v=p?z.trigger(p,ub,{relatedTarget:c}):null;z.trigger(c,fb,{relatedTarget:p}).defaultPrevented||v&&v.defaultPrevented||(this._deactivate(p,c),this._activate(c,p))}_activate(c,p){c&&(c.classList.add(Ri),this._activate(j.getElementFromSelector(c)),this._queueCallback(()=>{c.getAttribute("role")==="tab"?(c.removeAttribute("tabindex"),c.setAttribute("aria-selected",!0),this._toggleDropDown(c,!0),z.trigger(c,db,{relatedTarget:p})):c.classList.add(nh)},c,c.classList.contains(yp)))}_deactivate(c,p){c&&(c.classList.remove(Ri),c.blur(),this._deactivate(j.getElementFromSelector(c)),this._queueCallback(()=>{c.getAttribute("role")==="tab"?(c.setAttribute("aria-selected",!1),c.setAttribute("tabindex","-1"),this._toggleDropDown(c,!1),z.trigger(c,hb,{relatedTarget:p})):c.classList.remove(nh)},c,c.classList.contains(yp)))}_keydown(c){if(![_b,mp,yb,gp,th,_p].includes(c.key))return;c.stopPropagation(),c.preventDefault();const p=this._getChildren().filter(O=>!m(O));let v;if([th,_p].includes(c.key))v=p[c.key===th?0:p.length-1];else{const O=[mp,gp].includes(c.key);v=de(p,c.target,O,!0)}v&&(v.focus({preventScroll:!0}),Si.getOrCreateInstance(v).show())}_getChildren(){return j.find(rh,this._parent)}_getActiveElem(){return this._getChildren().find(c=>this._elemIsActive(c))||null}_setInitialAttributes(c,p){this._setAttributeIfNotExists(c,"role","tablist");for(const v of p)this._setInitialAttributesOnChild(v)}_setInitialAttributesOnChild(c){c=this._getInnerElement(c);const p=this._elemIsActive(c),v=this._getOuterElement(c);c.setAttribute("aria-selected",p),v!==c&&this._setAttributeIfNotExists(v,"role","presentation"),p||c.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(c,"role","tab"),this._setInitialAttributesOnTargetPanel(c)}_setInitialAttributesOnTargetPanel(c){const p=j.getElementFromSelector(c);p&&(this._setAttributeIfNotExists(p,"role","tabpanel"),c.id&&this._setAttributeIfNotExists(p,"aria-labelledby",`${c.id}`))}_toggleDropDown(c,p){const v=this._getOuterElement(c);if(!v.classList.contains("dropdown"))return;const O=(N,$)=>{const J=j.findOne(N,v);J&&J.classList.toggle($,p)};O(vp,Ri),O(".dropdown-menu",nh),v.setAttribute("aria-expanded",p)}_setAttributeIfNotExists(c,p,v){c.hasAttribute(p)||c.setAttribute(p,v)}_elemIsActive(c){return c.classList.contains(Ri)}_getInnerElement(c){return c.matches(rh)?c:j.findOne(rh,c)}_getOuterElement(c){return c.closest(".nav-item, .list-group-item")||c}static jQueryInterface(c){return this.each(function(){const p=Si.getOrCreateInstance(this);if(typeof c=="string"){if(p[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);p[c]()}})}}z.on(document,pb,Ep,function(_){["A","AREA"].includes(this.tagName)&&_.preventDefault(),m(this)||Si.getOrCreateInstance(this).show()}),z.on(window,gb,()=>{for(const _ of j.find(vb))Si.getOrCreateInstance(_)}),K(Si);const Nr=".bs.toast",Eb=`mouseover${Nr}`,wb=`mouseout${Nr}`,bb=`focusin${Nr}`,Tb=`focusout${Nr}`,Ib=`hide${Nr}`,Ab=`hidden${Nr}`,Rb=`show${Nr}`,Sb=`shown${Nr}`,wp="hide",Gc="show",Kc="showing",Cb={animation:"boolean",autohide:"boolean",delay:"number"},Pb={animation:!0,autohide:!0,delay:5e3};class Ia extends B{constructor(c,p){super(c,p),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Pb}static get DefaultType(){return Cb}static get NAME(){return"toast"}show(){z.trigger(this._element,Rb).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(wp),L(this._element),this._element.classList.add(Gc,Kc),this._queueCallback(()=>{this._element.classList.remove(Kc),z.trigger(this._element,Sb),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(z.trigger(this._element,Ib).defaultPrevented||(this._element.classList.add(Kc),this._queueCallback(()=>{this._element.classList.add(wp),this._element.classList.remove(Kc,Gc),z.trigger(this._element,Ab)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Gc),super.dispose()}isShown(){return this._element.classList.contains(Gc)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(c,p){switch(c.type){case"mouseover":case"mouseout":this._hasMouseInteraction=p;break;case"focusin":case"focusout":this._hasKeyboardInteraction=p}if(p)return void this._clearTimeout();const v=c.relatedTarget;this._element===v||this._element.contains(v)||this._maybeScheduleHide()}_setListeners(){z.on(this._element,Eb,c=>this._onInteraction(c,!0)),z.on(this._element,wb,c=>this._onInteraction(c,!1)),z.on(this._element,bb,c=>this._onInteraction(c,!0)),z.on(this._element,Tb,c=>this._onInteraction(c,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(c){return this.each(function(){const p=Ia.getOrCreateInstance(this,c);if(typeof c=="string"){if(p[c]===void 0)throw new TypeError(`No method named "${c}"`);p[c](this)}})}}return pe(Ia),K(Ia),{Alert:D,Button:W,Carousel:br,Collapse:qs,Dropdown:ts,Modal:Ti,Offcanvas:Js,Popover:zc,ScrollSpy:Ta,Tab:Si,Toast:Ia,Tooltip:Ii}})})(Kx);const qd=aA(HN),Qx=uA();qd.use(Qx);qd.use(zx);qd.mount("#app");export{$s as _,Eu as a,Yx as b,t1 as c,jf as d,Bd as e,We as f,v1 as g,k as h,ft as i,Pt as j,je as k,gc as o,Jx as q,_t as r,qt as t,ci as u,Zx as w};
